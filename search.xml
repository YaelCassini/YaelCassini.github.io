<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>计算机动画HW1 - 路径曲线与运动物体控制</title>
      <link href="/2023/05/16/Cardinal-Spline/"/>
      <url>/2023/05/16/Cardinal-Spline/</url>
      
        <content type="html"><![CDATA[<p>课程名称：计算机动画    实验项目名称：路径曲线与运动物体控制  实验日期：2020 年 9 月 27 日</p><span id="more"></span><div class="tag link"><a class="link-card" title="code" href="https://github.com/YaelCassini/CA_HW1"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png"/></div><div class="right"><p class="text">code</p><p class="url">https://github.com/YaelCassini/CA_HW1</p></div></a></div><div class="tag link"><a class="link-card" title="video" href="https://www.bilibili.com/video/BV1T34y1B7WJ/"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png"/></div><div class="right"><p class="text">video</p><p class="url">https://www.bilibili.com/video/BV1T34y1B7WJ/</p></div></a></div><div class="tag link"><a class="link-card" title="report" href="https://yaelcassini.github.io/2023/05/16/%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E5%92%8C%E7%9F%A2%E9%87%8F%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E5%85%B3%E9%94%AE%E5%B8%A7%E5%8A%A8%E7%94%BB/"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png"/></div><div class="right"><p class="text">report</p><p class="url">https://yaelcassini.github.io/2023/05/16/%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E5%92%8C%E7%9F%A2%E9%87%8F%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E5%85%B3%E9%94%AE%E5%B8%A7%E5%8A%A8%E7%94%BB/</p></div></a></div><div class="story post-story"><h2 id="一、-实验目的和要求"><a href="#一、-实验目的和要求" class="headerlink" title="一、 实验目的和要求"></a>一、 实验目的和要求</h2><ol><li>设计并实现一个路径曲线，通过不同参数控制曲线状态，并实现对物体沿生成路线运动的控制。</li><li>通过上述实验内容，了解动画动态控制的基本原理何方法，提高动画编程能力。</li></ol></div><div class="story post-story"><h2 id="二、-实验内容和原理"><a href="#二、-实验内容和原理" class="headerlink" title="二、 实验内容和原理"></a>二、 实验内容和原理</h2><ol><li>选用 Cardinal 曲线表示运动路径，掌握它的表示和算法，了解不同控制参数对曲线形状和状态的影响。</li><li>编写代码实现 Cardinal 曲线算法，对照 cardinal 样条曲线的数学表示和程序之间的对应关系。</li><li>给定若干关键控制点的位置（这些控制点可以大致描述某个运动路径的形状），用上述程序计算出控制点之间的插值点，显示出样条曲线。</li><li>改变曲线弯曲程度的参数$τ∈[0，1]$大小和控制插值点数目的参数 grain ，观察曲线形状的变化。</li><li>在路径曲线上放置一小汽车，使其在沿生成的 cardinal 曲线运动，汽车速度和加速度可以调节。</li></ol></div><div class="story post-story"><h2 id="三、-实验平台"><a href="#三、-实验平台" class="headerlink" title="三、 实验平台"></a>三、 实验平台</h2><p>Qt 5.14.2 @ Windows</p></div><div class="story post-story"><h2 id="四、-实验步骤"><a href="#四、-实验步骤" class="headerlink" title="四、 实验步骤"></a>四、 实验步骤</h2><ol><li>首先，对照Cardinal 样条曲线的数学表达和程序中计算代码的对应关系。<br>Cardinal 样条曲线矩阵表示：<br>$$$ P(u) &#x3D; U^T M B $$$<br>其中，u 是幂次最高为 3 的插值变量，且u∈[0,1]， M 是 Hermite 多项式矩阵，B 是曲线中，用户指定的关键点数据。其矩阵展开表示。<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161622.jpg" alt="图片alt" title="图片title"></li></ol><p>其中，$P_i-1，P_i，P_i+1，P_i+2$，是用户指定的控制点控制点，参数τ 控制曲线的弯曲程度。<br>为了实现 Cardinal 样条曲线计算，创建 spline 类。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">class spline</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">    double *ax,*bx,*cx,*dx;//P(u)系数</span><br><span class="line">    double *ay,*by,*cy,*dy;//P(u)系数</span><br><span class="line">    double *A,*B,*C,*D,*E;//计算弧长所用系数</span><br><span class="line">    double* matrix[4];//计算矩阵</span><br><span class="line">    double tension;//参数τ</span><br><span class="line">    int num;//关键点个数</span><br><span class="line">    int grain;//每两个关键点之间插值点的个数（含关键点）</span><br><span class="line">    bool create_flag=false;//是否已经为指针分配空间（判断是否需要delete）</span><br><span class="line">    vector&lt;QPoint&gt; all_points;//所有点</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    spline();</span><br><span class="line">     //生成CubicSpline曲线</span><br><span class="line">    void set_Spline(vector&lt;QPoint&gt;&amp; vec,int _grain,double _tension);</span><br><span class="line">    //计算生成的三次样条曲线上所有插值点</span><br><span class="line">    void CubicSpline(vector&lt;QPoint&gt;&amp; vec);</span><br><span class="line">    double calc_Total_length();  //计算曲线总长度</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    void init_Matrix(); //初始化矩阵</span><br><span class="line">    void init_spline_Coefficient(vector&lt;QPoint&gt;&amp; vec);//计算P(u)系数</span><br><span class="line"></span><br><span class="line">    QPoint calc_Interpolation(int i,double u);//计算内部插值点</span><br><span class="line">    point calc_double_Interpolation(int i,double u);//计算内部插值点（坐标为double类型）</span><br><span class="line"></span><br><span class="line">    vector&lt;QPoint&gt;&amp; get_all_points();  //返回储存所有插值点的vector</span><br><span class="line"></span><br><span class="line">    void init_length_Coefficient(int _num);//初始化长度计算参数</span><br><span class="line">    double f(int i,double u); //f函数</span><br><span class="line">    double simpson(int i,double a,double b);//求样条曲线长度</span><br><span class="line">    double calc_U(double s,int i,double u1,double u2);//根据长度计算参数u的值</span><br><span class="line">    void clear();//清除数据</span><br><span class="line"></span><br><span class="line">    ~spline()&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>其中 set_Spline 函数根据关键点数组 vec、插值点数目 _grain、和控制曲线弯曲程度的参数 _tension 生成样条曲线所需要的计算数据<br>（如矩阵数值，P(u)系数等）。具体算法见源码。</p><p>其中init_Matrix 函数计算矩阵中的数值，即为 P(u)公式中的矩阵M。init_spline_Coefficient 函数计算不同曲线段中的P(u)多项式系数，即为公式中的 M*B（分 x，y 两个方向计算）。具体算法见源码。</p><ol start="2"><li><pre><code>CubicSpline 函数，根据_grain 值生成不同的u 值，并计算曲线上所有插值点的坐标，储存在名为 all_points 的 vector 中。</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//计算曲线上所有插值点</span><br><span class="line">void spline::CubicSpline(vector&lt;QPoint&gt;&amp; vec)</span><br><span class="line">&#123;</span><br><span class="line">    //当没清除就再次点击生成曲线时，不清除之前的插值点，插入间隔点</span><br><span class="line">    QPoint temp(0,0);</span><br><span class="line">    all_points.push_back(temp);</span><br><span class="line"></span><br><span class="line">    //根据设置的插值点个数参数，计算对应的u值</span><br><span class="line">    int num=vec.size();</span><br><span class="line">    double* u = new double[grain];</span><br><span class="line">    for (int i = 0; i&lt;grain; i++) &#123;</span><br><span class="line">        u[i] = ((double)i) / grain;  //u [0,1]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //根据u值和曲线参数计算插值点坐标</span><br><span class="line">    for (int i = 0; i&lt;num-1; i++) &#123;</span><br><span class="line">        QPoint p1=vec[i];</span><br><span class="line">        //加入关键点</span><br><span class="line">        all_points.push_back(p1);</span><br><span class="line">        for (int j = 1; j&lt;grain; j++) &#123;</span><br><span class="line">            QPoint temp=calc_Interpolation(i,u[j]);</span><br><span class="line">            all_points.push_back(temp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //加入关键点</span><br><span class="line">    QPoint p1=vec[num-1];</span><br><span class="line">    all_points.push_back(p1);</span><br><span class="line"></span><br><span class="line">    delete []u;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>其中，calc_Interpolation 函数根据曲线段序号i，和参数 u 的不同值，计算具体一个插值点的坐标。</p><ol start="3"><li><pre><code>编写 paintWindow 类作为画板，继承自 QWidget 类。在paintWindow 类中编写鼠标回调函数mousePressEvent，记录通过鼠标交互选定的关键点。以及绘制函数 paintEvent，在每次update（）时调用。paintWindow 类定义具体如下：</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">class paintWindow : public QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">private:</span><br><span class="line">    spline* sp;</span><br><span class="line">    int grain;  //每个曲线区间有多少个插值点（包括两端关键点）</span><br><span class="line">    double tension;  //参数，控制曲线弯曲程度</span><br><span class="line"></span><br><span class="line">    bool ifDrawInpoint=false;  //是否显示插值点</span><br><span class="line"></span><br><span class="line">    int time;//时间</span><br><span class="line">    QTimer* timer;  //计时器</span><br><span class="line">    QPixmap* car[5];  //储存小车位图信息</span><br><span class="line"></span><br><span class="line">    int car_index;//显示第几种小车</span><br><span class="line">    int pen_index=0;//使用第几种笔刷</span><br><span class="line"></span><br><span class="line">    double speed;  //小车速度</span><br><span class="line">    double accelerate;  //小车加速度</span><br><span class="line"></span><br><span class="line">    point now_point;  //运动当前点</span><br><span class="line">    point next_point;  //运动下一个点</span><br><span class="line">    double ratio;  //旋转角度</span><br><span class="line"></span><br><span class="line">    vector&lt;QPoint&gt; points;//储存所有关键点</span><br><span class="line"></span><br><span class="line">    bool endflag=false;  //小车是否运动到曲线末端</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    paintWindow();</span><br><span class="line"></span><br><span class="line">    void paintEvent(QPaintEvent *);  //绘制函数</span><br><span class="line">    void mousePressEvent(QMouseEvent *e);  //鼠标回调函数</span><br><span class="line"></span><br><span class="line">    void create_Spline(int _grain, double _tension);  //生成并显示cubicspline曲线</span><br><span class="line">    void start_Move(double _speed,double _accelarate);  //小车开始运动</span><br><span class="line">    void stop_Move();  //小车暂停运动</span><br><span class="line">    void continue_Move();  //小车继续运动</span><br><span class="line"></span><br><span class="line">    int numbers();  //关键点个数</span><br><span class="line">    double total_length();  //曲线总长度</span><br><span class="line">    double now_length();  //小车当前走过的路线长度</span><br><span class="line">    int get_spline_index(double now_len);  //获取小车当前在哪一段曲线</span><br><span class="line">    double get_Ratio();  //获取当前曲线斜率</span><br><span class="line"></span><br><span class="line">    void change_car();  //改变小车</span><br><span class="line">    void change_pen(QPainter&amp; paint);  //改变笔刷</span><br><span class="line">    void change_DrawInPoint();  //改变是否绘制插值点的控制变量</span><br><span class="line">    QPixmap* now_car();  //当前小车位图指针</span><br><span class="line"></span><br><span class="line">    void clear();</span><br><span class="line">private slots:</span><br><span class="line">    void changeState();  //连接计时器，改变小车坐标，旋转角度等信息</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><pre><code>鼠标回调函数mousePressEvent，记录通过鼠标交互选定的关键点。绘制函数 paintEvent，根据数据变化，绘制所有的关键点、曲线，已经选择是否绘制插值点。</code></pre></li><li><pre><code>引入QTimer 类作为计时器，每隔一段时间调用 changestate 函数，改变小车坐标及旋转角度等。其中now_point 是当前小车位置，next_point 是下一个小车位置。get_Ratio 函数计算当下曲线的斜率，以及小车旋转角度。</code></pre></li><li><pre><code>MainWindow 设计及按钮槽函数</code></pre><p>MainWindow 窗口设计如下：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161623.jpg" alt="图片alt" title="图片title"></p></li></ol><p>MainWindow 类设计：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class MainWindow : public QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">private:</span><br><span class="line">    paintWindow* p_w;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    MainWindow(QWidget *parent = nullptr);</span><br><span class="line">    ~MainWindow();</span><br><span class="line"></span><br><span class="line">private slots:</span><br><span class="line">    void on_create_clicked();//绘制曲线并显示</span><br><span class="line">    void on_clear_clicked();//清屏</span><br><span class="line">    void on_start_clicked();//开始运动按钮槽函数</span><br><span class="line">    void on_show_clicked();//展示插值点按钮槽函数</span><br><span class="line">    void on_stop_move_clicked();//停止运动按钮槽函数</span><br><span class="line">    void on_continue_move_clicked();//继续运动按钮槽函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    void update_numbers();//更新关键点数目</span><br><span class="line">    void on_change_clicked();</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    Ui::MainWindow *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="五、-实验结果分析"><a href="#五、-实验结果分析" class="headerlink" title="五、 实验结果分析"></a>五、 实验结果分析</h2><p>选取控制点：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161624.jpg" alt="图片alt" title="图片title"></p><p>绘制曲线：同时显示关键点个数和路线总长度。<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161625.jpg" alt="图片alt" title="图片title"></p><p>不同参数对曲线值的影响：</p><p>1、不同的 grain：grain&#x3D;5（红色）和 grain&#x3D;60（蓝色）<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161626.jpg" alt="图片alt" title="图片title"></p><p>2、不同的tension（τ）：分别为：<br>0（绿色），0.25（灰色），0.5（红色），0.75（蓝色），1.0（黄色）<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161627.jpg" alt="图片alt" title="图片title"></p><p>显示插值点（白色为内部插值点）：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161628.jpg" alt="图片alt" title="图片title"></p><p>小车开始运动：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161629.jpg" alt="图片alt" title="图片title"></p><p>更换小车：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161630.jpg" alt="图片alt" title="图片title"></p></div>]]></content>
      
      
      <categories>
          
          <category> Homework </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Computer Animation </tag>
            
            <tag> Spline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机动画HW2 - 线性插值和矢量线性插值关键帧动画</title>
      <link href="/2023/05/16/Keyframe-Interpolation/"/>
      <url>/2023/05/16/Keyframe-Interpolation/</url>
      
        <content type="html"><![CDATA[<p>课程名称：计算机动画    实验项目名称：线性插值和矢量线性插值关键帧动画  实验日期：2020 年 11 月 6 日</p><span id="more"></span><div class="tag link"><a class="link-card" title="code" href="https://github.com/YaelCassini/CA_HW2"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png"/></div><div class="right"><p class="text">code</p><p class="url">https://github.com/YaelCassini/CA_HW2</p></div></a></div><div class="tag link"><a class="link-card" title="video" href="https://www.bilibili.com/video/BV1zL4y137rn/"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png"/></div><div class="right"><p class="text">video</p><p class="url">https://www.bilibili.com/video/BV1zL4y137rn/</p></div></a></div><div class="tag link"><a class="link-card" title="report" href="https://yaelcassini.github.io/2023/05/16/%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E5%92%8C%E7%9F%A2%E9%87%8F%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E5%85%B3%E9%94%AE%E5%B8%A7%E5%8A%A8%E7%94%BB/"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png"/></div><div class="right"><p class="text">report</p><p class="url">https://yaelcassini.github.io/2023/05/16/%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E5%92%8C%E7%9F%A2%E9%87%8F%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E5%85%B3%E9%94%AE%E5%B8%A7%E5%8A%A8%E7%94%BB/</p></div></a></div><div class="story post-story"><h2 id="一、-实验目的和要求"><a href="#一、-实验目的和要求" class="headerlink" title="一、 实验目的和要求"></a>一、 实验目的和要求</h2><ol><li>关键帧动画技术是计算机动画中的一类重要技术。本实验选取线性插值和矢量线性插值作为实验内容，旨在了解关键帧动画系统的结构，变形算法的思想以及不同算法对应的不同性能。</li><li>本实验要求实现线性插值和矢量线性插值两种关键帧插值算法的图形化界面展示，用户通过鼠标点击交互选定起点帧和终点帧的关键点，由程序自行生成起始帧的图形，并且通过计算得到中间的插值图像，连续播放形成关键帧动画。</li></ol></div><div class="story post-story"><h2 id="二、-实验内容和原理"><a href="#二、-实验内容和原理" class="headerlink" title="二、 实验内容和原理"></a>二、 实验内容和原理</h2><p>系统包括三个部分：</p><ol><li>输入数据：包括初始形状数据和终止形状数据, 一般为事先定义好的整型变量数据,如简单的几何物体形状(苹果，凳子，陶罐)以及简单的动物形状(大象，马)等。也可以设计交互界面，用户通过界面交互输入数据。</li><li>插值算法：包括线性插值和矢量线性插值。</li></ol><ul><li><p>线性插值：对于初始和终止形状上每个点的坐标 $P_i$  进行线性插值得到物体变形的中间形状；</p></li><li><p>矢量线性插值：对初始形状和终止形状上每两个相邻点计算其对应的矢量的长度和角度，然后对其进行线性插值得到中间长度和角度， 对起点帧和终点帧的第一个关键点进行线性插值得到中间图像的第一个关键点。顺序连接插值后定义的各个矢量得到中间变化形状。插值变量变化范围是[0，1], 插值变量等于 0 时对应于初始形状，插值变量等于 0 时对应于终止形状；数据类型为 double。</p></li></ul><ol start="3"><li>插值结果输出。用户可以在图形化界面中自行指定插值帧的个数以及动画刷新频率，程序会根据其设定的参数生成不同效果的关键帧动画并播放动画。用户可以通过点击不同插值方式的按钮，反复播放不同算法生成的插值结果。</li></ol></div><div class="story post-story"><h2 id="三、-实验平台"><a href="#三、-实验平台" class="headerlink" title="三、 实验平台"></a>三、 实验平台</h2><p>Qt 5.14.2 @ Windows</p></div><div class="story post-story"><h2 id="四、-实验步骤"><a href="#四、-实验步骤" class="headerlink" title="四、 实验步骤"></a>四、 实验步骤</h2><h3 id="1-线性插值："><a href="#1-线性插值：" class="headerlink" title="1.线性插值："></a>1.线性插值：</h3><p>指定两幅关键画面图形(最简单的是大小不同的两个矩形，分别由４个点构成。学生也可以自己构造更复杂的图形，如由若干点构成的手图形)， 然后计算两幅图对应点的线性距离来得到它们的中间画面图形。<br>设图形上有 N 个点，$(x_i，y_i),  i&#x3D;1,…N$;  初始图形的点记为$(x_{0i}， y_{0i})$，终止图形记为$(x_{1i}，y_{1i})$，生成的中间图形记为$(x_{ti}，y_{ti})$，设生成 M 个画面，则有：</p><p>$$$ x_{ti} &#x3D; x_0<em>t + x_1</em>(1-t);t&#x3D;1,…M; y_{ti} &#x3D; y_0<em>t + y_1</em>(1-t); $$$</p><p>线性插值代码实现：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">if (mode == 0)</span><br><span class="line">&#123;</span><br><span class="line">inter_points.clear();</span><br><span class="line">double t = 1.0 * time / grain;</span><br><span class="line">for (int i = 0; i &lt; start_points.size(); i++)</span><br><span class="line">&#123;</span><br><span class="line">QPoint temp;</span><br><span class="line">double x0 = start_points[i].x();</span><br><span class="line">double y0 = start_points[i].y();</span><br><span class="line">double x1 = end_points[i].x();</span><br><span class="line">double y1 = end_points[i].y();</span><br><span class="line">double x = (1 - t) * x0 + t * x1;</span><br><span class="line">double y = (1 - t) * y0 + t * y1;</span><br><span class="line"></span><br><span class="line">temp.setX(x);</span><br><span class="line">temp.setY(y);</span><br><span class="line">inter_points.push_back(temp);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-矢量线性插值："><a href="#2-矢量线性插值：" class="headerlink" title="2.矢量线性插值："></a>2.矢量线性插值：</h3><p>与线性差值框架类似，但插值变量不再是线性插值中的点坐标表(x, y), 而是把图形曲线上每两个邻近点看成一个矢量，这样就能把由N 个点构成的曲线分解成 N-1 个矢量。初始图形的矢量记为$(a_{0i}， p_{0i})$，终止图形记为$(a_{1i}，p_{1i})$，生成的中间图形记为$(a_{ti}，p_{ti})$,  设生成 M 个画面，则有：</p><p>$$$ a_{ti} &#x3D; a_0<em>t + a_1</em>(1-t);  t&#x3D;1,…M; p_{ti} &#x3D; p_0<em>t + p_1</em>(1-t); $$$</p><p>矢量线性插值代码实现：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">//mode==1:普通矢量线性插值(不规定矢量插值方向)</span><br><span class="line">else if(mode==1)</span><br><span class="line">&#123;</span><br><span class="line">    inter_points.clear();</span><br><span class="line">    double t=1.0*time/grain;</span><br><span class="line">    QPoint temp;</span><br><span class="line">    double x0=start_points[0].x();</span><br><span class="line">    double y0=start_points[0].y();</span><br><span class="line">    double x1=end_points[0].x();</span><br><span class="line">    double y1=end_points[0].y();</span><br><span class="line">    double x=(1-t)*x0+t*x1;</span><br><span class="line">    double y=(1-t)*y0+t*y1;</span><br><span class="line">    temp.setX(x);</span><br><span class="line">    temp.setY(y);</span><br><span class="line">    inter_points.push_back(temp);</span><br><span class="line">    for(int i=0;i&lt;start_vectors.size();i++)</span><br><span class="line">    &#123;</span><br><span class="line">        double vec_a0=start_vectors[i].a;</span><br><span class="line">        double vec_p0=start_vectors[i].p;</span><br><span class="line">        double vec_a1=end_vectors[i].a;</span><br><span class="line">        double vec_p1=end_vectors[i].p;</span><br><span class="line">        if(vec_a0&lt;0)vec_a0+=2*PI;</span><br><span class="line">        if(vec_a1&lt;0)vec_a1+=2*PI;</span><br><span class="line">        if(vec_a1-vec_a0&gt;PI)vec_a0+=2*PI;</span><br><span class="line">        if(vec_a1-vec_a0&lt;-PI)vec_a1+=2*PI;</span><br><span class="line"></span><br><span class="line">        double vec_a=(1-t)*vec_a0+t*vec_a1;</span><br><span class="line">        double vec_p=(1-t)*vec_p0+t*vec_p1;</span><br><span class="line">        x+=vec_p*cos(vec_a);</span><br><span class="line">        y+=vec_p*sin(vec_a);</span><br><span class="line">        temp.setX(x);</span><br><span class="line">        temp.setY(y);</span><br><span class="line">        inter_points.push_back(temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>本次试验中，我还对矢量线性插值进行了三种不同的改良：分别是规定矢量顺时针旋转、规定矢量逆时针旋转以及规定矢量旋转角度小于π。<br>使用控制变量 mode：mode 为 1、2、3 时分别在矢量插值函数代码中插入不同语句。</p><h3 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h3><p>编写paintWindow 类作为画板，继承自 QWidget 类。在 paintWindow 类中编写鼠标回调函数 mousePressEvent，记录通过鼠标交互选定的关键点。以及绘制函数paintEvent，在每次 update()时调用。paintWindow 类定义具体如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">class paintWindow : public QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">private:</span><br><span class="line">    int grain;  //每个曲线区间有多少个插值点(包括两端关键点)</span><br><span class="line">    int speed;  //刷新速度(改为int)</span><br><span class="line">    int mode=0; //插值模式</span><br><span class="line">    int pen_index=0;//使用第几种笔刷</span><br><span class="line">    int time;//时间</span><br><span class="line">    QTimer* timer;  //计时器</span><br><span class="line"></span><br><span class="line">    vector&lt;QPoint&gt; start_points;//储存起点帧点坐标</span><br><span class="line">    vector&lt;Vector&gt; start_vectors;//储存起点帧向量</span><br><span class="line">    vector&lt;QPoint&gt; end_points;//储存终点帧点坐标</span><br><span class="line">    vector&lt;Vector&gt; end_vectors;//储存终点帧向量</span><br><span class="line">    vector&lt;QPoint&gt; inter_points;//储存当前插值帧关键点</span><br><span class="line"></span><br><span class="line">    bool start_draw=false; //是否绘制起始帧图像</span><br><span class="line">    bool end_draw=false; //是否绘制终止帧图像</span><br><span class="line"></span><br><span class="line">    bool startframe=true; //是否处于起始帧选定状态</span><br><span class="line">    bool endframe=true; //是否处于终止帧选定状态</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    paintWindow();</span><br><span class="line"></span><br><span class="line">    void change_frame(); //从起始帧切换到终止帧</span><br><span class="line">    void finish_frame(); //结束终止帧交互</span><br><span class="line">    void calc_vectors();  //计算关键帧向量</span><br><span class="line"></span><br><span class="line">    void set_interpolation(int _grain,int _speed, int _mode);  //设置动画参数</span><br><span class="line">    void paintEvent(QPaintEvent *);  //绘制函数</span><br><span class="line">    void mousePressEvent(QMouseEvent *e);  //鼠标回调函数</span><br><span class="line">    int numbers();  //关键点个数</span><br><span class="line">    void change_pen();  //改变笔刷</span><br><span class="line">    void clear(); //清屏</span><br><span class="line">private slots:</span><br><span class="line">    void changeState();  //连接计时器，改变小车坐标，旋转角度等信息</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h3><p>鼠标回调函数 mousePressEvent，记录通过鼠标交互选定的关键点，储存在名为start_points 和 end_points 的vector 中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//鼠标回调函数，鼠标点击，加入关键点</span><br><span class="line">voidpaintWindow::mousePressEvent(QMouseEvent * e)</span><br><span class="line">&#123;</span><br><span class="line">if (startframe)start_points.push_back(e-&gt;pos());</span><br><span class="line">else if (endframe) end_points.push_back(e-&gt;pos());</span><br><span class="line">update();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h3><p>绘制函数 paintEvent，根据数据变化，绘制所有的关键点，起始帧图像，以及中间插值图像。(篇幅限制，此处省略部分代码)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">//绘制函数</span><br><span class="line">void paintWindow::paintEvent(QPaintEvent*)</span><br><span class="line">&#123;</span><br><span class="line">QPainter paint(this);</span><br><span class="line">if (start_points.size() &lt;= 0)return; //没有关键点6.</span><br><span class="line">//设置笔刷样式，绘制关键点</span><br><span class="line">paint.setPen(QPen(Qt::black, 5, Qt::DashDotLine, Qt::RoundCap));</span><br><span class="line">for (int i = 0; i &lt; start_points.size(); i++)</span><br><span class="line">paint.drawEllipse(start_points[i], 1, 1);</span><br><span class="line">for (int i = 0; i &lt; end_points.size(); i++)</span><br><span class="line">paint.drawEllipse(end_points[i], 1, 1);</span><br><span class="line">//设置笔刷样式，绘制起点帧图像</span><br><span class="line">//paint.setPen(QPen(Qt::blue,3,Qt::SolidLine,Qt::RoundCap));</span><br><span class="line">if (start_points.size() &gt; 0)</span><br><span class="line">&#123;</span><br><span class="line">if (start_draw)</span><br><span class="line">&#123;</span><br><span class="line">for (unsigned int i = 0; i &lt; start_points.size() - 1; i++)</span><br><span class="line">&#123;</span><br><span class="line">QPoint p1 = start_points[i];</span><br><span class="line">QPoint p2 = start_points[i + 1];</span><br><span class="line">paint.drawLine(p1, p2);</span><br><span class="line">&#125;</span><br><span class="line">QPoint p1 = start_points[0];</span><br><span class="line">QPoint p2 = start_points[start_points.size() - 1];</span><br><span class="line">paint.drawLine(p1, p2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//设置笔刷样式，绘制终点帧图像(省略)</span><br><span class="line">//设置笔刷样式，绘制插值帧图像</span><br><span class="line">//paint.setPen(QPen(Qt::red,3,Qt::DotLine,Qt::RoundCap));</span><br><span class="line">if (time != 0)</span><br><span class="line">&#123;</span><br><span class="line">if (inter_points.size() &gt; 0)</span><br><span class="line">&#123;</span><br><span class="line">for (unsigned int i = 0; i &lt; inter_points.size() - 1; i++)</span><br><span class="line">&#123;</span><br><span class="line">QPoint p1 = inter_points[i];</span><br><span class="line">QPoint p2 = inter_points[i + 1];</span><br><span class="line">paint.drawLine(p1, p2);</span><br><span class="line">&#125;</span><br><span class="line">QPoint p1 = inter_points[0];</span><br><span class="line">QPoint p2 = inter_points[inter_points.size() - 1];</span><br><span class="line">paint.drawLine(p1, p2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6"><a href="#6" class="headerlink" title="6."></a>6.</h3><p>引入QTimer 类作为计时器，每隔一段时间调用 changestate 函数， 在该函数中，改变当前插值图像信息。通过线性插值或者矢量线性插值计算，将当前插值图像的所有关键点坐标储存在名为inter_points 的vector 中。</p><h3 id="7-MainWindow-设计及按钮槽函数"><a href="#7-MainWindow-设计及按钮槽函数" class="headerlink" title="7. MainWindow 设计及按钮槽函数"></a>7. MainWindow 设计及按钮槽函数</h3><p>MainWindow 窗口设计如下：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161456.jpg" alt="图片alt" title="图片title"></p></div><div class="story post-story"><h2 id="五、-实验结果分析"><a href="#五、-实验结果分析" class="headerlink" title="五、 实验结果分析"></a>五、 实验结果分析</h2><p>分析不同起始帧和终止帧对应不同插值方法的效果和局限性：</p><h3 id="1-普通四边形-几乎不旋转"><a href="#1-普通四边形-几乎不旋转" class="headerlink" title="1)普通四边形(几乎不旋转)"></a>1)普通四边形(几乎不旋转)</h3><p><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161457.jpg" alt="图片alt" title="图片title"><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161458.jpg" alt="图片alt" title="图片title"><br>普通线性插值和第一种矢量线性插值(变换角不大于π)效果都很好，但是规定变换方向为顺时针或者逆时针的则出现了变形问题，通过分析，我找到了原因，这是因为有两条相邻的边，向量旋转方向相反，比如：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161459.jpg" alt="图片alt" title="图片title"></p><p>上图中绿色标注的边终点帧比起点帧的向量角度更小，而蓝色标注的边，则是终点帧比起点帧的向量角度更大，因此在选择向量顺时针插值时，绿色标注的边可以直接选择角度小于π的旋转方式，而蓝色标注的边则会选择大于π的旋转方式(几乎接近旋转一周)，因此导致图像插值过程中变形。</p><h3 id="2-边交叉的四边形-有一定的旋转角度-0-π-x2F-2"><a href="#2-边交叉的四边形-有一定的旋转角度-0-π-x2F-2" class="headerlink" title="2)边交叉的四边形(有一定的旋转角度(0 ~π&#x2F;2))"></a>2)边交叉的四边形(有一定的旋转角度(0 ~π&#x2F;2))</h3><p><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161460.jpg" alt="图片alt" title="图片title"><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161461.jpg" alt="图片alt" title="图片title"></p><p>可以看出上图中四种插值方式的效果都非常好，顺时针向量插值时，图像呈现顺时针转动效果，逆时针插值时效果相反。</p><h3 id="3-小车大小变化-有一定的旋转角度-π-x2F-2-π"><a href="#3-小车大小变化-有一定的旋转角度-π-x2F-2-π" class="headerlink" title="3)小车大小变化(有一定的旋转角度(π&#x2F;2 ~π))"></a>3)小车大小变化(有一定的旋转角度(π&#x2F;2 ~π))</h3><p><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161462.jpg" alt="图片alt" title="图片title"><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161463.jpg" alt="图片alt" title="图片title"></p><p>可以看出上图中直接线性插值方式会产生明显的变形，不能保持形状平滑变化，而其他三种矢量线性插值方式效果都表现得非常好。</p><h3 id="4-箭头图形-旋转角度接近π"><a href="#4-箭头图形-旋转角度接近π" class="headerlink" title="4)箭头图形(旋转角度接近π)"></a>4)箭头图形(旋转角度接近π)</h3><p><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161464.jpg" alt="图片alt" title="图片title"></p><p>可以看出上图中直接线性插值方式会产生明显的变形，不能保持形状平滑变化，第一种矢量线性插值方式也会产生非常严重的变形， 而规定了顺时针或者逆时针差值的矢量线性插值方式效果表现得非常好。<br>通过分析，我找到了原因，这是因为对第一种矢量线性差之方式， 有两条相邻的边，向量旋转方向在都接近π的情况下，一个比π略小一些，一个比π略大一些，比如：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161465.jpg" alt="图片alt" title="图片title"></p><p>上图中绿色标注的边终点帧比起点帧的向量大一个接近π的值， 于是算法在判断后，认为该边应该逆时针旋转插值，而蓝色标注的边， 则是终点帧比起点帧的向量大一个稍大于π的值(也可以看成是小一个接近π的值)，因此算法在判断后，认为该边应该顺时针旋转。这就导致了相邻的两个向量向着不同的方向旋转，因此导致图像插值过程中变形。</p><h3 id="5-复杂图像的关键帧插值动画"><a href="#5-复杂图像的关键帧插值动画" class="headerlink" title="5)复杂图像的关键帧插值动画"></a>5)复杂图像的关键帧插值动画</h3><p><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161466.jpg" alt="图片alt" title="图片title"><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202305161467.jpg" alt="图片alt" title="图片title"></p><p>如上图，可以看出，除了线性插值有明显的变形之外，其他三种矢量差值方式都表现得效果非常好。</p><h3 id="6-分析总结"><a href="#6-分析总结" class="headerlink" title="6)分析总结"></a>6)分析总结</h3><p>没有一种关键帧动画算法可以适用于所有的场景，通过对不同起始帧终止帧图像的情形的实践和分析，我总结出：</p><ol><li>对于方向基本没有变化的初始帧和终止帧，普通线性插值效果非常不错，第一种矢量线性插值算法(规定矢量旋转角度小于π)也表现非常好，第二三种矢量线性插值算法(规定矢量旋转方向为顺时针或者逆时针)则可能会产生较大的变形，原因是相邻两个矢量旋转角度一个大于零一个小于零。</li><li>对于方向有一定变化(0~π)的初始帧和终止帧，普通线性插值算法会使得插值图像有较大的变形(一般情况下，旋转角度大的， 变形程度也会更大)，而三种矢量线性插值算法都表现得效果非常好。</li><li>对于方向变化接近π的初始帧和终止帧，普通线性插值算法也会使得插值图像有较大的变形(一般情况下，旋转角度大的，变形程度也会更大)，第二三种矢量线性插值算法(规定矢量旋转方向为顺时针或者逆时针)也表现非常好，第一种矢量线性插值算法(规定矢量旋转角度小于π)则可能会产生较大的变形，原因是相邻两个矢量旋转角度一个大于π一个小于零π。</li><li>对于方向变化较大(π~2π)的初始帧和终止帧，效果可以参考第二条。</li><li>以上所有总结建立在本实验程序的演示基础上，本实验中产生这些现象的主要原因是，不能保证初始帧和终止帧有完全相同的角度，如果在更多元化的图形化交互界面中，可以将初始帧直接复制放大缩小平移旋转得到终止帧，则每一种矢量线性插值算法都不会产生上述的严重变形现象。</li><li>但是在真正的动画制作中，也不可能保证初始帧和终止帧有完全相同的角度，因此本次实验的分析还是非常具有实际意义的。</li></ol></div>]]></content>
      
      
      <categories>
          
          <category> Homework </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Computer Animation </tag>
            
            <tag> KeyFrame </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Relightable Neural Renderer 配置环境记录</title>
      <link href="/2023/05/15/Relightable-Neural-Renderer-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E8%AE%B0%E5%BD%95/"/>
      <url>/2023/05/15/Relightable-Neural-Renderer-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<ul><li>原Github仓库地址：<a href="https://github.com/LansburyCH/relightable-nr">https://github.com/LansburyCH/relightable-nr</a></li></ul><p>因为项目需要学习了Relightable Neural Rendering， 并尝试把源码下载到本地配置环境运行，被pytorch环境折磨的不轻，把最后成功的过程在这里放一下。<br><br>原仓库中记录的环境是<code>Ubuntu 16.04 + CUDA 9.0 + gcc 4.9.2 + Anaconda 3</code>，但因为手边没有合适的Linux服务器，所以使用windows环境配置，版本太老的cuda目前已经找不到合适的pytorch支持，最后使用的环境是<code>window 10 + python3.9.16 + pytorch 1.13.0 + cuda 11.7 + anaconda 3</code>，在两台windows系统电脑上都成功跑通了：一台是双3090，一台是1650。<br></p><h3 id="环境配置过程"><a href="#环境配置过程" class="headerlink" title="环境配置过程"></a>环境配置过程</h3><p>原仓库提供的environment环境文件太过杂乱，有很多不必要一一匹配的包，并且其中有很多版本都太老了已经无从下载，因此安装的时候就没有管这个environment了。<br>首先在官网安装cuda11.7版本，anaconda新建一个python3.9的环境，安装pytorch1.13.0，安装命令为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install pytorch==1.13.0 torchvision==0.14.0 torchaudio==0.13.0 pytorch-cuda=11.7 -c pytorch -c nvidia</span><br></pre></td></tr></table></figure><ul><li>安装旧版本的pytorch指令集：<a href="https://pytorch.org/get-started/previous-versions/">https://pytorch.org/get-started/previous-versions/</a></li></ul><p>安装后需要进行的步骤为：</p><ol><li>安装opencv：<code>conda install opencv</code></li><li>安装trimesh：<code>conda install -c conda-forge trimesh</code></li><li>安装torch-geometric。这里参考了：<a href="https://blog.csdn.net/xiangfengl/article/details/120254867#%E5%AE%89%E8%A3%85torch-%20geometric">https://blog.csdn.net/xiangfengl/article/details/120254867#%E5%AE%89%E8%A3%85torch-%20geometric</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install torch-scatter -f https://pytorch-geometric.com/whl/torch-1.13.0%2Bcu117.html</span><br><span class="line">pip install torch-sparse -f https://pytorch-geometric.com/whl/torch-1.13.0%2Bcu117.html</span><br><span class="line">pip install torch-cluster -f https://pytorch-geometric.com/whl/torch-1.13.0%2Bcu117.html</span><br><span class="line">pip install torch-spline-conv -f https://pytorch-geometric.com/whl/torch-1.13.0%2Bcu117.html</span><br><span class="line">pip install torch-geometric</span><br></pre></td></tr></table></figure></li><li><code>pip install pyshtools</code></li><li><code>pip install openexr</code></li><li><code>conda install tensorboardX</code></li><li><code>pip install pytorch_msssim</code></li></ol><h3 id="与此同时，源码需要做的修改："><a href="#与此同时，源码需要做的修改：" class="headerlink" title="与此同时，源码需要做的修改："></a>与此同时，源码需要做的修改：</h3><ol><li>nerural-renderer模块中，rasterize_cuda_kernel.cu中，将<br><code>#if  __CUDA_ARCH__ &lt; 600 and defined(__CUDA_ARCH__)</code>修改为<code>#if  __CUDA_ARCH__ &lt; 600 &amp;&amp; defined(__CUDA_ARCH__)</code>。</li><li>将源码cuda文件夹下所有的代码中的<code>AT_CHECK</code>替换为<code>TORCH_CHECK</code>。</li><li>在precompute.py, stitch_lp.py, train_rnr.py三个文件开头添加：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">os.environ[&#x27;OPENCV_IO_ENABLE_OPENEXR&#x27;] = &#x27;TRUE&#x27;</span><br></pre></td></tr></table></figure></li><li>将<code>np.int</code>修改为<code>np.int_</code></li><li>由于在windows系统下，将<code>num_workers = 8</code>修改为<code>num_workers = 0</code>。</li><li>使用windows系统，需要把sh文件修改为bat文件，在线转换工具：<a href="https://daniel-sc.github.io/bash-shell-to-bat-converter/">https://daniel-sc.github.io/bash-shell-to-bat-converter/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Neural Rendering </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Neural Rendering </tag>
            
            <tag> Rendering </tag>
            
            <tag> anaconda </tag>
            
            <tag> pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Relighing学习笔记</title>
      <link href="/2023/05/08/Relighing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/05/08/Relighing%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<ol><li>virual box 共享文件夹设置：</li></ol><ul><li><a href="https://blog.csdn.net/jumpingpig/article/details/104109395">https://blog.csdn.net/jumpingpig/article/details/104109395</a></li></ul><ol start="2"><li>欧几里德结构数据(Euclidean Structure Data) 以及非欧几里德结构数据(Non-Euclidean Structure Data)</li></ol><ul><li><a href="https://blog.csdn.net/imsuhxz/article/details/91361977">https://blog.csdn.net/imsuhxz/article/details/91361977</a></li></ul><ol start="3"><li>U-net网络结构：</li></ol><ul><li><a href="https://zhuanlan.zhihu.com/p/313283141">https://zhuanlan.zhihu.com/p/313283141</a></li></ul><ol start="4"><li>nn.ReplicationPad3d</li></ol><ul><li>使用输入边界的复制对输入张量进行填充。</li><li>Parameters</li><li><ul><li>padding(int,tuple)–填充的大小。如果是int，则在所有边界中使用相同的填充。如果是6 tuple，则使用(padding_left,padding_right, padding_top, padding_bottom, padding_front, padding_back )</li></ul></li></ul><ol start="5"><li>torch.nn.Conv3D</li></ol><ul><li>3D卷积, 输入的shape是(N, C_{in}, D, H, W) (N, C_{in}, D, H, W)(N, C_{in}, D, H, W)，输出shape(N, C_{out}, D_{out}, H_{out}, W_{out})</li><li>其中，就是batch_size；C_{in}对应着输入图像的通道数，比如RGB图像通道数为3；D为深度，H、W则是tensor的长宽。</li></ul><ol start="6"><li><p>torch.nn.BatchNorm3d</p></li><li><p>torch.nn.LeakyReLU</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Color-Management</title>
      <link href="/2023/04/24/Color-Management/"/>
      <url>/2023/04/24/Color-Management/</url>
      
        <content type="html"><![CDATA[<p>颜色管理是图形学中一个非常重要的课题，图形学与图像和颜色的可视化息息相关，但是我们有时候追求的是储存元数据的信息，有时候又追求的是图像看上去合理，符合美术工作人员的期待。不同的显示器、不同的颜色空间管理以及不同的人眼都会产生颜色的感知偏差。</p><h3 id="Gamma-矫正"><a href="#Gamma-矫正" class="headerlink" title="Gamma 矫正"></a>Gamma 矫正</h3><p>Gamma矫正最初是为了适应CRT显示器的非线性输出问题，目前存在则是主要为了适应人眼的非线性感知问题。</p><p>CRT显示器的非线性输出具体来说是，如果输入一个0.5的值到显示器，显示器会呈现出0.218的值</p><p>现在的Gamma矫正大多是为了拟合人眼的感知曲线，人眼对暗部细节的感知更加丰富，因此使用gamma矫正在储存图像时，相当于对源数据的暗部进行了展开，亮部进行了压缩，这样能储存更丰富的暗部细节信息。但gamma矫正本质上是一种编码格式，并不应该影响实际的数据，比如源数据在储存为RGB格式时做了gamma矫正，那么在从RGB文件中读取时要做反gamma矫正重新映射回源数据。</p><p>另外，由于历史遗留原因，我们使用的大部分显示器，仍然沿袭CRT显示器的这种非线性输出，也就是我们再把数据传递给显示器时需要做一个类似gamma矫正的变换，而显示器则会做一个类似CRT显示器的反gamma变换。</p><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ol><li>Games101-Lecture 20-Color and Perception</li></ol>]]></content>
      
      
      <categories>
          
          <category> Computer Graphics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Color </tag>
            
            <tag> Color Space </tag>
            
            <tag> Gamma Correction </tag>
            
            <tag> Tone Mapping </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PBR Neural Rendering</title>
      <link href="/2023/04/18/PBR-Neural-Rendering/"/>
      <url>/2023/04/18/PBR-Neural-Rendering/</url>
      
        <content type="html"><![CDATA[<ul><li><p>ICLR 2023：《Light Sampling Field and BRDF Representation for Physically-based Neural Rendering》</p></li><li><p><a href="https://www.researchgate.net/publication/369974931_Light_Sampling_Field_and_BRDF_Representation_for_Physically-based_Neural_Rendering">https://www.researchgate.net/publication/369974931_Light_Sampling_Field_and_BRDF_Representation_for_Physically-based_Neural_Rendering</a></p></li><li><p><a href="https://www.youtube.com/watch?v=qpIgS11DlJE">https://www.youtube.com/watch?v=qpIgS11DlJE</a></p></li><li><p><a href="https://docs.unrealengine.com/4.26/en-US/RenderingAndGraphics/Lightmass/VolumetricLightmaps/#:~:text=The%20Volumetric%20Lightmap%20allows%20previewing%20of%20objects%20with,the%20Volumetric%20Lightmap%20until%20lighting%20is%20built%20again">https://docs.unrealengine.com/4.26/en-US/RenderingAndGraphics/Lightmass/VolumetricLightmaps/#:~:text=The%20Volumetric%20Lightmap%20allows%20previewing%20of%20objects%20with,the%20Volumetric%20Lightmap%20until%20lighting%20is%20built%20again</a>.</p></li><li><p>NeRF：</p></li><li><p><a href="https://www.matthewtancik.com/nerf">https://www.matthewtancik.com/nerf</a></p></li><li><p>NeRV：</p></li><li><p><a href="https://pratulsrinivasan.github.io/nerv/">https://pratulsrinivasan.github.io/nerv/</a></p></li><li><p>NeRD：</p></li><li><p><a href="https://pratulsrinivasan.github.io/nerv/">https://pratulsrinivasan.github.io/nerv/</a></p></li><li><p>State of Art of Neural Rendering</p></li><li><p><a href="https://arxiv.org/abs/2004.03805">https://arxiv.org/abs/2004.03805</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Neural Rendering </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Neural Rendering </tag>
            
            <tag> Rendering </tag>
            
            <tag> PBR </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shadow Rendering</title>
      <link href="/2023/03/29/Shadow-Rendering/"/>
      <url>/2023/03/29/Shadow-Rendering/</url>
      
        <content type="html"><![CDATA[<h3 id="渲染技术研究报告——阴影绘制技术的发展历程及方法比较"><a href="#渲染技术研究报告——阴影绘制技术的发展历程及方法比较" class="headerlink" title="渲染技术研究报告——阴影绘制技术的发展历程及方法比较"></a>渲染技术研究报告——阴影绘制技术的发展历程及方法比较</h3><h4 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h4><p>阴影绘制是真实感渲染中非常重要的一个模块，对提高场景的真实度有着至关重要的作用，不管是使用光栅化的流程还是光线追踪的流程进行场景绘制，阴影绘制的技术都经过了多次的更新和迭代。我也在一些课程中学习过一些简单的阴影绘制方法，因此想借此机会对所有的阴影绘制方法做一个系统性的梳理和总结。阴影绘制的方法按照时间发展顺序主要有Shadow Volume算法、Shadow Map算法、PCF算法、PCSS算法、VSM算法等等。<br><br>首先，阴影的定义是Shadow is the region of space for which at least on point of the light source is occluded，也就是绘制中那些至少对一盏光源，其没有被直接照亮而是被其他物体遮挡住的区域。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292041.jpg" alt="图片alt" title="图片title"><br>图源Real-Time Rendering 4th<br>如上图所示，要实现阴影的绘制，需要考虑的有光源、遮挡物（Occluder）、接受物（Receiver）、本影区（umbra）半影区（penumbra）等。<br><br>其中，对于接收物体是平面的情况，我们可以直接通过光源位置、物体几何等信息进行光线求交几何计算，解析地得到平面上阴影的形状和范围（如下图），但是这显然无法处理复杂的场景阴影绘制，也不是我们需要的通用的方法，也因此本文仍然选择聚焦于在任何曲面或者几何体上产生阴影的通用方法。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292042.jpg" alt="图片alt" title="图片title"><br>图源Real-Time Rendering 4th</p><h4 id="二、Shadow-Volume算法诞生及其改进"><a href="#二、Shadow-Volume算法诞生及其改进" class="headerlink" title="二、Shadow Volume算法诞生及其改进"></a>二、Shadow Volume算法诞生及其改进</h4><p><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292043.jpg" alt="图片alt" title="图片title"><br>图源Real-Time Rendering 4th<br>Shadow Volume是Franklin在1977年提出的阴影绘制算法，虽然在今天这个算法由于其较大的开销已经不太被使用，但我们仍然可以从中学到一些基础的思维方式，并且由于该算法不是在图像空间进行的，因此不会像Shadow Map一样收到采样的影响。<br><br>Shadow Volume算法的基本思想是对于投影物体（以一个三角形为例），以光源为出发点建立一个类似金字塔的无限延伸的体积结构，并切除在光源点和投影物体之间的部分。所有包含在剩余体积范围内的区域都处在阴影中。<br><br>对于场景中的所有物体，都可以使用该方法建立其投影金字塔。在正常绘制场景时，对于每一哥Fragment，都需要遍历所有的投影金字塔，计算其是否被包含在其中并记录被包含的次数。被包含的越多，则该处阴影强度越大（阴影颜色更暗）。以此类推，绘制完成所有的Fragment。可想而知，对于较为复杂的场景，Shadow Volume方法需要的时间和空间开销都是巨大的，不仅需要管理每一个投影物体的投影金字塔，还需要对任何一个片元进行所有金字塔的遍历测试。如果场景中包含N个物体，且都可以投射阴影，则该算法的时间复杂度将达到O(n²)。<br></p><h4 id="三、Shadow-Map算法的诞生及其改进"><a href="#三、Shadow-Map算法的诞生及其改进" class="headerlink" title="三、Shadow Map算法的诞生及其改进"></a>三、Shadow Map算法的诞生及其改进</h4><p>早在 1968年，Arthur Appel就在研究隐藏面消除时提出了光线投射算法（Ray Casting），并首次给出了光线跟踪算法的描述。其具体思路是从每一个像素射出一条射线，然后找到最接近的物体挡住射线的路径，而视平面上每个像素的颜色取决于从可见光表面产生的亮度。<br></p><p>1974年，Catmull为了解决消隐问题提出了Z-Buffer算法，该算法的主要思路是使用一个屏幕空间的缓存，记录每一个像素点所对应的最小深度，在绘制每一个多边形时，与对应像素位置的当前最小深度做对比，如果小于该值则证明该多边形可见，绘制并更新Z-Buffer。Z-Buffer算法思路简单且通用性较好，为之后图形学的许多技术提供了理论基础。<br></p><p>因此在1978年，William以Z-Buffer算法为基础，提出了Shadow Map算法，主要思想就是维护一个从光源看出的Z-Buffer（也就是Shadow Map）。能从光源出发直接看到的区域就不属于阴影，否则属于阴影。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292044.jpg" alt="图片alt" title="图片title"><br>图源【3】<br>Shadow Map是一个2-pass的算法。算法主要步骤为：<br></p><ol><li>第一个pass：以光源为视点出发绘制场景，只需要绘制深度信息，像Z-Buffer算法一样记录屏幕空间上每一个像素点的最小深度，得到 Shadow Map。</li><li>第二个Pass：正常绘制场景。</li></ol><ul><li>在每个像素绘制时通过坐标转换，计算出其在光源坐标系下对应的屏幕坐标。</li><li>如果其在光源坐标系下的深度在浮点数精度下小于等于Shadow Map上对应位置的当前值，则证明该点被光源直接照亮，否则证明该点在阴影中。<br>其中，需要做的坐标转换为：首先根据片元当前的屏幕坐标，乘以当前相机投影矩阵的逆矩阵得到其世界坐标，再根据光源坐标系下的投影矩阵计算出在Shadow Map的屏幕坐标。其中，对于太阳光这样的平行光我们需要使用平行投影方式绘制Shadow Map，而对于点光源则应该使用透视投影绘制Shadow Map。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292045.jpg" alt="图片alt" title="图片title"><br>图源Real-Time Rendering 4th</li></ul><p>不难想到，如何选择Shadow Map绘制的视口是一个至关重要的问题，如果光源坐标系下的视口刚好可以包含正常绘制时所有能看到的物体，如上图中所示，则算法可行，否则可能会出现正常绘制时的某些Fragment对应的光源坐标系下的坐标超过视口范围，在Shadow Map上没有对应点，无法判断是否属于阴影的情况。另外，对于在场景中间的点光源（在不同方向上都可能投射阴影），则一般选择使用一个six-view cude，分别绘制不同方向上的Shadow Map。但这样的解决方法同样也带来了不同view交界处的走样问题。<br></p><p>Shadow Map算法的效果很大程度上受限于 Shadow Map的分辨率，因此在绘制Shadow Map时进行场景物体的剔除和剪枝也是十分有必要的，对于那些在相机中不可见的物体，在Shadow Map中也不需要绘制，这样可以有效缩小Shadow Map绘制的范围，从而对同样分辨率的Shadow Map达到更高的利用率和绘制精度。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292046.jpg" alt="图片alt" title="图片title"><br>图源Real-Time Rendering 4th</p><p>但是普通的Shadow Map算法不可避免地存在着问题，主要的两个问题有自遮挡问题（“surface acne”）和锯齿状走样问题。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292047.jpg" alt="图片alt" title="图片title"><br>图源网络</p><p>其中，自遮挡问题产生的原因是如下图，在从灯光出发进行Shadow Map绘制时，视线方向与接收投影的平面方向存在夹角，但是绘制时仅采样了像素中心的深度值作为整体的深度值。在第二个pass比较深度是就会出现本来同一平面但是有部分像素通不过Shadow Map的深度测试这种情况，从而导致如下图所示的阴影错误。对该问题可以使用设置比较的bias来尝试解决，但是bias过小时不能完全避免这种错误的产生，过大时又会产生如下图中右边所示的阴影和物体不贴合的错误（被称为Light Leaks 或者 Peter Panning），出现物体悬浮的绘制效果。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292048.jpg" alt="图片alt" title="图片title"><br>图源Real-Time Rendering 4th</p><p>另外一个解决Self-shadowing自遮挡问题的思路是修改绘制Shadow Map的过程，比如说绘制时进行面剔除（Face Culling），仅绘制模型的背面。这种方法在物体都是流形时（拥有背面和反面）效果较好，能很好地避免surface acne问题。但是无法处理某些模型只有单个面的情况。一种沿着这个思路的改进方法是Second-depth Shadow Map，是在绘制Shadow Map时选择front face和back face的中间值作为Shadow Map的采样值。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292049.jpg" alt="图片alt" title="图片title"><br>图源Real-Time Rendering 4th</p><p>而另一个问题锯齿状走样本质上还是由于Shadow Map的分辨率限制导致的，由于Shadow Map的绘制视口与相机绘制视口不同，可能会导致在相机坐标系下占很大部分的空间在Shadow Map中仅仅对应几个像素，因而导致其不能完全表达出该部分的相互遮挡信息，正常绘制时的较大区域可能整体无法通过Shadow Map的深度测试，产生锯齿状走样。<br></p><p>为了解决分辨率不够导致的锯齿状走样问题，Nvdia提出了CSM算法（Cascaded Shadow Maps），也就是使用级联的阴影贴图。其主要思想就是通过物体的距离，动态地进行不同分辨率的Shadow Map的绘制，比如说对远处的物体采用分辨率较小的Shadow Map，而对于较近处的物体则采用分辨率较大Shadow Map。LearnOpenGL中提供了一种基本的思路：<br><br>首先使用相机的视图和投影矩阵，反向计算出它所定义的视锥体在世界坐标系下的位置，然后将其划分为 n 个子视锥体，其中第i个截锥体的远平面是第i+1个截锥体的近平面。然后对于每一个截锥体中的物体依次渲染一张Shadow Map，在正常绘制时，则同样根据Fragment的Z值计算其应该属于哪一个截锥体，从而选取不同的Shadow Map。<br><br>需要注意的一点是，如果某个物体不在相机视锥体内，但在光源和某个截锥体之间，则绘制Shadow Map时也需要对其进行考虑，否则也会造成阴影绘制的错误。<br></p><h4 id="四、PCF算法-amp-PCSS算法"><a href="#四、PCF算法-amp-PCSS算法" class="headerlink" title="四、PCF算法&amp;PCSS算法"></a>四、PCF算法&amp;PCSS算法</h4><p>普通的Shadow Map只能得到非零即一的阴影测试值，只能绘制硬阴影，这显然不能满足我们真实感渲染的需求，因此在1987年，William T. Reeves引入了本来用于做抗锯齿的PCF算法（Percentage Closer Filter）到阴影绘制领域，在此基础上改良得到Shadow Map算法得到了PCSS算法。<br><br>该算法的基本思想是对深度测试的结果进行Filter（而不是直接对Shadow Map进行filter）。具体操作方法是：在第二个Pass进行正常绘制时，对于每一个Fragment的深度测试，不仅比较直接对应的Shadow Map像素，还要与其邻域内（比如说3*3）像素进行深度测试，小于等于（表示不在阴影中）则记为0，大于则记为1，得到一个01的矩阵，对其求平均得到一个0-1之间的浮点数值，则代表该像素的阴影值，这样就能实现软阴影的效果。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292050.jpg" alt="图片alt" title="图片title"><br>图源【7】<br>在以上这种思想的指导下我们不难发现，filter的邻域大小一定程度决定了得到的阴影边缘的平滑程度，也就是邻域越大越容易得到“软”阴影。而在生活中，当投影物体靠近接收物体时，我们得到的阴影边缘更硬，反之则较软。以此为指导，Fernando在2005年提出的PCSS算法是在PCF进行阴影绘制基础上的进一步改进。其主要思想是使用如下图所示的几何关系来估计半影区（Penumbra）的宽度（也就是阴影的软硬程度）。其中$d_blocker$指的是投影物体的深度也就是Shadow Map中储存的深度，$d_receiver$指的是接收物体的深度也就是当前片元的深度。而用此方法计算出的半影区的宽度可以指导我们进行PCF中filter邻域大小的选择。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292051.jpg" alt="图片alt" title="图片title"><br>图源【8】</p><p>PCSS算法的主要流程为：</p><ol><li>Blocker Search</li></ol><ul><li>在一个小的邻域内采样得到投影物体的平均深度。</li></ul><ol start="2"><li>Penumbra Estimation</li></ol><ul><li>根据投影物体的平均深度和当前片元的深度计算半影区的宽度。</li></ul><ol start="3"><li>Percentage Closer Filtering</li></ol><ul><li>根据计算出的半影区的宽度选定filter的邻域大小并进行PCF计算。<br>其中，在第一步进行投影物体深度的采样时，采样区域的大小可以用下图所示的这种方式选定，也就是根据投影物体的深度和光源的大小计算选定。<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292052.jpg" alt="图片alt" title="图片title"><br>图源【8】</li></ul><h4 id="五、VSM算法和VSSM算法"><a href="#五、VSM算法和VSSM算法" class="headerlink" title="五、VSM算法和VSSM算法"></a>五、VSM算法和VSSM算法</h4><p>VSM算法全称为Variance Shadow Mapping，VSSM算法全称为Variance Soft Shadow Mapping，这两种算法相互承袭，是一种使用统计学知识对PCSS算法的改进方案，其主要的思路是通过对Shadow Map中Block内的深度分布进行统计学估计，避免大量采样计算PCF的过程，从而加快阴影绘制速度。<br><br>PCF算法的基本思想就是在某一个邻域内测试有百分之多少的像素能使得当前片元通过深度测试。也就是测试当前片元的深度在该邻域内分布在百分之多少。VSSM算法引入了统计学的知识，假设当前邻域内的深度分布符合高斯分布，如果要测试当前片元的深度在该邻域内分布在百分之多少，只需要知道当前分布的均值和方差。<br><br>对于深度图邻域内均值的计算，我们可以自然地联想到对Shadow Map进行Mipmap查询。而对于方差的计算，VSM引入了以下的公式，因此我们只需要在绘制Shadow Map的同时绘制一个储存深度的平方的map。<br><br>$var(x)&#x3D;E(x^2),-E^2(x)$<br><br>这样在Shadow Map绘制完成后，对于其上的每一个点我们都能通过均值和方差得到该位置的一个深度的近似分布情况，从而可以根据当前片元的值，计算出其CDF。另外，VSM算法还引入了切比雪夫不等式（如下），只需要知道分布的期望和方差，就可以计算出x大于某个固定值的概率。<br><br>$P(x&gt;t)≤σ^2&#x2F;(σ^2+(t-μ)^2)$<br><br>切比雪夫不等式成立的条件是$t＞μ$，也就是当前的$d＞z_avg$。也就说如果Block内的平均深度小于当前Fragment的深度，就不能使用这种估计方法。<br></p><p>上面这种从统计学出发的估计解决了PCSS算法中的第三个步骤也就是PCF计算，但是PCSS算法中的第一个步骤Blocker Search仍然会耗费较长的时间，因此VSSM算法针对性地提出了估计方案。<br><br>对于一个Block，第一个步骤Block Search的目标是估计其中遮挡物的平均深度，我们可以设Block中的像素总数为N，平均深度为$Z_avg$，深度小于当前值（遮挡物）的像素数为N1，平均深度为$Z_occ$，深度大于当前值（接收物体）的像素数为N2，平均深度为$Z_unocc$。则可以得到等式：<br><br>$N_1&#x2F;N Z_unocc+N_2&#x2F;N Z_occ&#x3D;Z_avg$<br><br>不难看出，N_1&#x2F;N就是非遮挡物所占比例，也就可以转化为P（X≥t）。则上式可以转化为：<br><br>$P(x≥t) z_unocc+(1.0-P(x≥t)) z_occ&#x3D;z_avg$<br><br>要计算遮挡物的平均深度，可以使用：<br><br>$Z_occ&#x3D;(z_avg-P(x≥t) z_unocc)&#x2F;(1.0-P(x≥t))$<br><br>而其中的$Z_avg$可以通过Mipmap得到，因此VSSM假设非遮挡物的深度都是t，从而可以计算出遮挡物的平均深度，这种假设的理论依据是一般的接收物体都是一个平面。而对于那些不是一个平面的阴影接收物体，以及切比雪夫不成立的情况，VSSM这篇论文则提出了分治的解决方案。对不满足$d&gt;z_avg$的Block，将其分割为更小的sub-Block，再进行阴影的绘制计算。<br><br>具体的分治思路是，对于那些$z_avg＜d$的sub-Block，我们之前使用切比雪夫不等式的估计仍然是有效的，但是对于那些$z_avg≥d$的sub-Block，论文中选择了直接使用普通的PCSS算法进行阴影的绘制。其原因是论文认为分治之后的sub-Block较小，可以使用传统的PCF采样进行计算。论文使用类似四叉树的结构进行分治之后Block的管理和遍历。<br></p><h4 id="六、MSM算法"><a href="#六、MSM算法" class="headerlink" title="六、MSM算法"></a>六、MSM算法</h4><p>MSM算法全称为Moment Shadow Mapping。是Christoph Peters在2015年提出的一种阴影绘制方式。<br><br>MSM实际上是在VSSM算法的基础上，对使用统计学思想逼近Depth Map的分布进行阴影绘制这种想法的延续。VSSM算法中，仅仅使用到了Depth的平均值和方差（也就是一阶矩和二阶矩）去估计深度的分布情况，这显然是可能产生偏差的，比如说对于下图中右边这种深度的分布，集中分布在几个固定的值附近，这样的情况使用切比雪夫不等式去估计就会出现比较大的误差。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292053.jpg" alt="图片alt" title="图片title"><br>图源Games202<br>而为了让VSM中对分布的描述更加精确，Christoph Peters提出了使用高阶矩来描述分布的方法。如下图，蓝色表示真正的深度分布CDF，如果使用VSSM算法则只能对CDF逼近到红色线条的程度，而如果使用前四阶矩则能逼近到绿色线段的程度，这样能使得我们对深度分布的估计更精确，对PCF进行近似计算也就更精确。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292054.jpg" alt="图片alt" title="图片title"><br>图源【13】<br>Christoph的测试表明，相对于VSM和ESM算法，MSM算法能提供更小的Shadow绘制误差（如下图）。<br><br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202303292055.jpg" alt="图片alt" title="图片title"><br>图源【13】</p><h4 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h4><p>在当前的渲染领域，由于时序上降噪技术的引入，实时的光线追踪技术成为了可能，因此目前传统的阴影绘制方法或许没有像之前那样应用这么广泛，但是在顺着这条发展路径学习的过程中，我对渲染的一些理解仍然能加深，并且获得新的启发。传统渲染方式虽然在一定程度上是某个时代算力限制的产物，但是其中蕴含的思考方式和优化方法，相信仍然能在未来的学习中给我带来灵感和启发。<br></p><h5 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h5><ol><li>Tomas Akenine-Möller, Eric Haines, Naty Hoffman, Angelo Pesce, Michał Iwanicki, and Sébastien Hillaire,T.  Real-Time Rendering 4rd Edition[M]. Natick, MA, USA: A. K. Peters, Ltd., 2020. </li><li>Catmull, E., “A Subdivision Algorithm for Computer Display of Curved Surfaces,” PhD. thesis, Dept. of Computer Science, University of Utah, 1974.</li><li>Lance Williams. 1978. Casting curved shadows on curved surfaces. SIGGRAPH Comput. Graph. 12, 3 (August 1978), 270–274. <a href="https://doi.org/10.1145/965139.807402">https://doi.org/10.1145/965139.807402</a></li><li>Y. Wang and S. Molnar. Second-depth shadow mapping.  Technical Report TR94-019, Department of Computer Science, University of North Carolina - Chapel Hill, Dec. 1994.</li><li>Fernando, S. Fernandez, K. Bala, and D. P. Greenberg. Adaptive shadow maps. In SIGGRAPH 2001 Conference Proceedings, pages 387–390, 2001.</li><li>M. Stamminger and G. Drettakis. Perspective shadow maps. ACM Transactions on Graphics, 21(3):557–562, July 2002.</li><li>William T. Reeves, David H. Salesin, and Robert L. Cook. 1987. Rendering antialiased shadows with depth maps. SIGGRAPH Comput. Graph. 21, 4 (July 1987), 283–291. <a href="https://doi.org/10.1145/37402.37435">https://doi.org/10.1145/37402.37435</a></li><li><a href="https://developer.download.nvidia.com/shaderlibrary/docs/shadow_PCSS.pdf">https://developer.download.nvidia.com/shaderlibrary/docs/shadow_PCSS.pdf</a></li><li>William Donnelly and Andrew Lauritzen. 2006. Variance shadow maps. In Proceedings of the 2006 symposium on Interactive 3D graphics and games (I3D ‘06). Association for Computing Machinery, New York, NY, USA, 161–165. <a href="https://doi.org/10.1145/1111411.1111440">https://doi.org/10.1145/1111411.1111440</a></li><li><a href="https://developer.download.nvidia.com/SDK/10.5/opengl/src/cascaded_shadow_maps/doc/cascaded_shadow_maps.pdf">https://developer.download.nvidia.com/SDK/10.5/opengl/src/cascaded_shadow_maps/doc/cascaded_shadow_maps.pdf</a></li><li>Salvi, Marco, “Rendering Filtered Shadows with Exponential Shadow Maps,” in Wolfgang Engel, ed., ShaderX6, Charles River Media, pp. 257–274, 2008.</li><li>Yang, B., Dong, Z., Feng, J., Seidel, H.-P. and Kautz, J. (2010), Variance Soft Shadow Mapping. Computer Graphics Forum, 29: 2127-2134. <a href="https://doi.org/10.1111/j.1467-8659.2010.01800.x">https://doi.org/10.1111/j.1467-8659.2010.01800.x</a></li><li>Christoph Peters and Reinhard Klein. 2015. Moment shadow mapping. In Proceedings of the 19th Symposium on Interactive 3D Graphics and Games (i3D ‘15). Association for Computing Machinery, New York, NY, USA, 7–14. <a href="https://doi.org/10.1145/2699276.2699277">https://doi.org/10.1145/2699276.2699277</a></li><li>Lingqi Yan. Games202 Lecture3&amp;Lecture4.</li><li><a href="https://zhuanlan.zhihu.com/p/384446688">https://zhuanlan.zhihu.com/p/384446688</a></li><li><a href="https://zhuanlan.zhihu.com/p/478472753">https://zhuanlan.zhihu.com/p/478472753</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Rendering </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rendering </tag>
            
            <tag> Shadow </tag>
            
            <tag> Shadow Map </tag>
            
            <tag> PCF </tag>
            
            <tag> PCSS </tag>
            
            <tag> VSM </tag>
            
            <tag> MSM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rendering History</title>
      <link href="/2023/03/28/Rendering-History/"/>
      <url>/2023/03/28/Rendering-History/</url>
      
        <content type="html"><![CDATA[<div class="story post-story"><h2 id="真实感渲染"><a href="#真实感渲染" class="headerlink" title="真实感渲染"></a>真实感渲染</h2><h3 id="光照模型-Illumination-Model"><a href="#光照模型-Illumination-Model" class="headerlink" title="光照模型 Illumination Model"></a>光照模型 Illumination Model</h3><ul><li>灯光</li><li>阴影</li></ul><h3 id="基于物理的材质-Material"><a href="#基于物理的材质-Material" class="headerlink" title="基于物理的材质 Material"></a>基于物理的材质 Material</h3><ul><li>明暗</li><li>纹理</li><li>透明</li><li>一种标准的基本属性主要是Metallic-Roughness，另一种标准是Specular-Glossiness，前者对设计师更友好，后者侧重物理属性，保留了反射率F0。</li></ul><h3 id="光栅化-Rasterization"><a href="#光栅化-Rasterization" class="headerlink" title="光栅化 Rasterization"></a>光栅化 Rasterization</h3><h3 id="光线追踪"><a href="#光线追踪" class="headerlink" title="光线追踪"></a>光线追踪</h3><h3 id="消隐技术"><a href="#消隐技术" class="headerlink" title="消隐技术"></a>消隐技术</h3><h3 id="全局光照（Global-Illumination）"><a href="#全局光照（Global-Illumination）" class="headerlink" title="全局光照（Global Illumination）"></a>全局光照（Global Illumination）</h3><h3 id="后处理"><a href="#后处理" class="headerlink" title="后处理"></a>后处理</h3><h3 id="DLSS"><a href="#DLSS" class="headerlink" title="DLSS"></a>DLSS</h3></div><div class="story post-story"><h2 id="光照模型"><a href="#光照模型" class="headerlink" title="光照模型"></a>光照模型</h2><h3 id="局部光照模型"><a href="#局部光照模型" class="headerlink" title="局部光照模型"></a>局部光照模型</h3><ul><li>Lambert漫反射模型</li><li>Gourand光照模型</li><li>Phong光照模型</li><li>Blinn-Phong光照模型</li><li>Cook-Torrance模型</li></ul><h3 id="全局光照模型"><a href="#全局光照模型" class="headerlink" title="全局光照模型"></a>全局光照模型</h3><ul><li><p>光线追踪</p><ul><li><p>路径追踪</p></li><li><p>递归光线追踪 whitted-type</p></li><li><p>分布式光线追踪 distrubution</p></li><li><p>双向路径追踪 Bidirectional Path</p><ul><li><a href="https://graphics.stanford.edu/courses/cs348b-03/papers/veach-chapter10.pdf">https://graphics.stanford.edu/courses/cs348b-03/papers/veach-chapter10.pdf</a></li></ul></li><li><p>Metropolis</p></li><li><p>光子映射 Photon Mapping</p></li><li><p>基于点的全局光照</p></li></ul></li><li><p>辐射度算法</p></li><li><p>光子映射</p></li></ul></div><div class="story post-story"><h2 id="Other-Topic"><a href="#Other-Topic" class="headerlink" title="Other Topic"></a>Other Topic</h2><h3 id="Ray-Marching"><a href="#Ray-Marching" class="headerlink" title="Ray Marching"></a>Ray Marching</h3><h3 id="Percentage-Closer-Soft-Shadows-PCSS"><a href="#Percentage-Closer-Soft-Shadows-PCSS" class="headerlink" title="Percentage Closer Soft Shadows (PCSS)"></a>Percentage Closer Soft Shadows (PCSS)</h3><h2 id="大事记-amp-原文引用"><a href="#大事记-amp-原文引用" class="headerlink" title="大事记&amp;原文引用"></a>大事记&amp;原文引用</h2><h3 id="1760"><a href="#1760" class="headerlink" title="1760"></a>1760</h3><ul><li>Johann Heinrich Lambert在其著作Photometria中提出Lambert模型。</li><li>Half-Lambert是Valve公司提出来的算法，为了解决Lambert公式在灰面太暗的问题。”Half Lambert” lighting is a technique first developed in the original Half-Life.</li></ul><h3 id="1967"><a href="#1967" class="headerlink" title="1967"></a>1967</h3><ul><li><p>Siggraph（Special Interest Group for Computer GRAPHICS，计算机图形图像特别兴趣小组）成立</p></li><li><p>光照模型：Wylie等人第一次在显示物体时加入了光照效果。该论文提出，物体表面上一点接收到的光强，与该点到光源距离的平方成反比，且与光照方向和表面发现的夹角有关。</p><ul><li>Chris Wylie, Gordon Romney, David Evans, and Alan Erdahl. 1967. Half-tone perspective drawings by computer. In Proceedings of the November 14-16, 1967, fall joint computer conference (AFIPS ‘67 (Fall)). Association for Computing Machinery, New York, NY, USA, 49–58. <a href="https://doi.org/10.1145/1465611.1465619">https://doi.org/10.1145/1465611.1465619</a></li></ul></li></ul><h3 id="1968"><a href="#1968" class="headerlink" title="1968"></a>1968</h3><ul><li><p>Arthur Appel 在研究隐藏面消除时提出了光线投射算法（Ray Casting），并首次给出了光线跟踪算法的描述。其具体思路是从每一个像素射出一条射线，然后找到最接近的物体挡住射线的路径，而视平面上每个像素的颜色取决于从可见光表面产生的亮度。</p><ul><li>Arthur Appel. 1968. Some techniques for shading machine renderings of solids. In Proceedings of the April 30–May 2, 1968, spring joint computer conference (AFIPS ‘68 (Spring)). Association for Computing Machinery, New York, NY, USA, 37–45. <a href="https://doi.org/10.1145/1468075.1468082">https://doi.org/10.1145/1468075.1468082</a></li></ul></li></ul><h3 id="1970"><a href="#1970" class="headerlink" title="1970"></a>1970</h3><ul><li><p>光照模型：Bouknight提出第一个光反射模型，指出物体表面朝向是确定物体表面上一点光强的主要因素，用Lambert漫反射定律计算物体表面上各多边形的光强，对光照射不到的地方，用环境光代替。</p><ul><li>W. Jack Bouknight. 1970. A procedure for generation of three-dimensional half-toned computer graphics presentations. Commun. ACM 13, 9 (Sept. 1970), 527–536. <a href="https://doi.org/10.1145/362736.362739">https://doi.org/10.1145/362736.362739</a></li></ul></li></ul><h3 id="1971"><a href="#1971" class="headerlink" title="1971"></a>1971</h3><ul><li><p>光照模型：Gourand提出的基于“漫反射模型与插值”思想的Gourand模型。对多面体模型，用漫反射模型计算多边形顶点的光亮度，再用增量法插值计算。</p><ul><li>Gouraud, H. (1971). Continuous Shading of Curved Surfaces. IEEE Transactions on Computers, C-20, 623-629. <a href="https://ieeexplore.ieee.org/document/1671906">https://ieeexplore.ieee.org/document/1671906</a></li></ul></li></ul><h3 id="1974"><a href="#1974" class="headerlink" title="1974"></a>1974</h3><ul><li><p>Siggraph开始每年举办计算机图形学顶级年度会议。</p></li><li><p>Z-buffer算法</p><ul><li>Catmull, E., “A Subdivision Algorithm for Computer Display of Curved Surfaces,” PhD. thesis, Dept. of Computer Science, University of Utah, 1974.</li></ul></li></ul><h3 id="1975"><a href="#1975" class="headerlink" title="1975"></a>1975</h3><ul><li><p>光照模型：Phong提出图形学中第一个有影响的简单光照明模型。模型虽然只是一个经验模型，但是其真实度已达到可以接受的程度。在Phong光照模型的基础之上，相继出现了Goud明暗处理和Phong明暗处理两个增量式光照模型。</p><ul><li>Bui Tuong Phong. 1975. Illumination for computer generated pictures. Commun. ACM 18, 6 (June 1975), 311–317. <a href="https://doi.org/10.1145/360825.360839">https://doi.org/10.1145/360825.360839</a></li></ul></li></ul><h3 id="1976"><a href="#1976" class="headerlink" title="1976"></a>1976</h3><ul><li><p>UV mapping</p><ul><li>James F. Blinn and Martin E. Newell. 1976. Texture and reflection in computer generated images. Commun. ACM 19, 10 (Oct. 1976), 542–547. <a href="https://doi.org/10.1145/360349.360353">https://doi.org/10.1145/360349.360353</a></li></ul></li><li><p>用于消隐的数据结构</p><ul><li>James H. Clark. 1976. Hierarchical geometric models for visible surface algorithms. Commun. ACM 19, 10 (Oct. 1976), 547–554. <a href="https://doi.org/10.1145/360349.360354">https://doi.org/10.1145/360349.360354</a></li></ul></li></ul><h3 id="1977"><a href="#1977" class="headerlink" title="1977"></a>1977</h3><ul><li><p>光照模型：Blinn-Phong</p><ul><li>James F. Blinn. 1977. Models of light reflection for computer synthesized pictures. SIGGRAPH Comput. Graph. 11, 2 (Summer 1977), 192–198. <a href="https://doi.org/10.1145/965141.563893">https://doi.org/10.1145/965141.563893</a></li></ul></li><li><p>Shadow Volume</p><ul><li>Crow, Franklin C., “Shadow Algorithms for Computer Graphics,” Computer Graphics (SIGGRAPH ’77 Proceedings), vol. 11, no. 2, pp. 242–248, July 1977.</li></ul></li></ul><h3 id="1978"><a href="#1978" class="headerlink" title="1978"></a>1978</h3><ul><li><p>Shadow Map算法</p><ul><li><p>Lance Williams. 1978. Casting curved shadows on curved surfaces. SIGGRAPH Comput. Graph. 12, 3 (August 1978), 270–274. <a href="https://doi.org/10.1145/965139.807402">https://doi.org/10.1145/965139.807402</a></p></li><li><p>Development：</p><ul><li>C. Hourcade and A. Nicolas.  Algorithms for antialiased cast shadows. Computers and Graphics, 9(3):259–265, 1985.</li><li>Midpoint Shadow Map.  Andrew Woo, VII.1 - THE SHADOW DEPTH MAP REVISITED, Editor(s): DAVID KIRK, Graphics Gems III (IBM Version), Morgan Kaufmann, 1992,Pages 338-342,  <a href="https://doi.org/10.1016/B978-0-08-050755-2.50073-7">https://doi.org/10.1016/B978-0-08-050755-2.50073-7</a>.</li><li>Mark Segal, Carl Korobkin, Rolf van Widenfelt, Jim Foran, and Paul Haeberli. 1992.  Fast shadows and lighting effects using texture mapping. SIGGRAPH Comput. Graph. 26, 2 (July 1992), 249–252. <a href="https://doi.org/10.1145/142920.134071">https://doi.org/10.1145/142920.134071</a></li><li>Shenchang Eric Chen and Lance Williams. 1993.  View interpolation for image synthesis. In Proceedings of the 20th annual conference on Computer graphics and interactive techniques (SIGGRAPH ‘93). Association for Computing Machinery, New York, NY, USA, 279–288. <a href="https://doi.org/10.1145/166117.166153">https://doi.org/10.1145/166117.166153</a></li><li>Y. Wang and S. Molnar. Second-depth shadow mapping.  Technical Report TR94-019, Department of Computer Science, University of North Carolina - Chapel Hill, Dec. 1994.</li><li>. Fernando, S. Fernandez, K. Bala, and D. P. Greenberg. Adaptive shadow maps. In SIGGRAPH 2001 Conference Proceedings, pages 387–390, 2001.</li><li>M. Stamminger and G. Drettakis. Perspective shadow maps. ACM Transactions on Graphics, 21(3):557–562, July 2002.</li></ul></li></ul></li><li><p>感觉是消隐</p><ul><li>Edwin Catmull. 1978. A hidden-surface algorithm with anti-aliasing. SIGGRAPH Comput. Graph. 12, 3 (August 1978), 6–11. <a href="https://doi.org/10.1145/965139.807360">https://doi.org/10.1145/965139.807360</a></li></ul></li><li><p>太有名了先放在这里</p><ul><li>Turner Whitted. 1978. A scan line algorithm for computer display of curved surfaces. SIGGRAPH Comput. Graph. 12, SI (August 1978), 8–13. <a href="https://doi.org/10.1145/988437.988440">https://doi.org/10.1145/988437.988440</a></li></ul></li></ul><h3 id="1980"><a href="#1980" class="headerlink" title="1980"></a>1980</h3><ul><li><p>光照模型&amp;光线追踪：Whitted提出了Whitted模型，并第一次给出一般性光线跟踪算法的范例。该模型综合考虑了光的反射、折射透射、阴影等。此时的光线追踪才真正的变成一个强大的工具，其将光线投射算法扩展为递归算法（Recursive Ray Tracing）。</p><ul><li>Turner Whitted. 1980. An improved illumination model for shaded display. Commun. ACM 23, 6 (June 1980), 343–349. <a href="https://doi.org/10.1145/358876.358882">https://doi.org/10.1145/358876.358882</a></li></ul></li><li><p>八叉树？</p><ul><li>Steven M. Rubin and Turner Whitted. 1980. A 3-dimensional representation for fast rendering of complex scenes. SIGGRAPH Comput. Graph. 14, 3 (July 1980), 110–116. <a href="https://doi.org/10.1145/965105.807479">https://doi.org/10.1145/965105.807479</a></li></ul></li></ul><h3 id="1982"><a href="#1982" class="headerlink" title="1982"></a>1982</h3><ul><li><p>光照模型：Cook和Torrance为了克服Phong模型的缺点，提出了一个基于物理光学的表面反射模型—大名鼎鼎的Cook-Torrance微表面模型，使得模型中反射光的位置和分布与实际情况非常接近，因而用它绘制的图形具有很好的质感。</p><ul><li>R. L. Cook and K. E. Torrance. 1982. A Reflectance Model for Computer Graphics. ACM Trans. Graph. 1, 1 (Jan. 1982), 7–24. <a href="https://doi.org/10.1145/357290.357293">https://doi.org/10.1145/357290.357293</a></li></ul></li><li><p>体积散射 blinn</p></li></ul><h3 id="1983"><a href="#1983" class="headerlink" title="1983"></a>1983</h3><ul><li>光照模型：Hall和Greenbert在whitted基础上此进一步给出Hall光透射模型,考虑了漫透射和规则透射光。改进了whitted中投射高光效果，并再环境光中加入距离衰减因子，使之能够更好的模拟物体表面的透射特性。</li></ul><h3 id="1984"><a href="#1984" class="headerlink" title="1984"></a>1984</h3><ul><li><p>Cook于1984年引入蒙特卡洛方法（Monte Carlo method）到光线跟踪领域，将经典的光线跟踪方法扩展为分布式光线跟踪算法（Distributed Ray Tracing），又称为随机光线追踪（stochasticray tracing），可以模拟更多的效果，如金属光泽、软阴影、景深（ Depthof Field）、运动模糊等等。</p><ul><li>Robert L. Cook, Thomas Porter, and Loren Carpenter. 1984. Distributed ray tracing. SIGGRAPH Comput. Graph. 18, 3 (July 1984), 137–145. <a href="https://doi.org/10.1145/964965.808590">https://doi.org/10.1145/964965.808590</a></li></ul></li><li><p>Goral 1984年 辐射度算法</p></li></ul><h3 id="1986"><a href="#1986" class="headerlink" title="1986"></a>1986</h3><ul><li><p>光照模型&amp;光线追踪：Kajiya统一了以前所有的光照模型。Kajiya首先提出使类似于随机采样的蒙特卡罗（Monte Carlo）方法求解绘制方程的光线追踪算法（Raytracing）——通过对到达图像平面上的光线路径进行采样，然后估计它们对最终图像的贡献来生成图像。</p><ul><li>James T. Kajiya. 1986. The rendering equation. SIGGRAPH Comput. Graph. 20, 4 (Aug. 1986), 143–150. <a href="https://doi.org/10.1145/15886.15902">https://doi.org/10.1145/15886.15902</a></li></ul></li><li><p>Non-diffuse Radiosity</p><ul><li>David S. Immel, Michael F. Cohen, and Donald P. Greenberg. 1986. A radiosity method for non-diffuse environments. SIGGRAPH Comput. Graph. 20, 4 (Aug. 1986), 133–142. <a href="https://doi.org/10.1145/15886.15901">https://doi.org/10.1145/15886.15901</a></li></ul></li></ul><h3 id="1987"><a href="#1987" class="headerlink" title="1987"></a>1987</h3><ul><li><p>PCF算法</p><ul><li>William T. Reeves, David H. Salesin, and Robert L. Cook. 1987. Rendering antialiased shadows with depth maps. SIGGRAPH Comput. Graph. 21, 4 (July 1987), 283–291. <a href="https://doi.org/10.1145/37402.37435">https://doi.org/10.1145/37402.37435</a></li></ul></li></ul><h3 id="1991"><a href="#1991" class="headerlink" title="1991"></a>1991</h3><ul><li><p>非漫射辐射度（Non-diffuse Radiosity）</p><ul><li>Françis X. Sillion, James R. Arvo, Stephen H. Westin, and Donald P. Greenberg. 1991. A global illumination solution for general reflectance distributions. SIGGRAPH Comput. Graph. 25, 4 (July 1991), 187–196. <a href="https://doi.org/10.1145/127719.122739">https://doi.org/10.1145/127719.122739</a></li></ul></li><li><p>Hanrahan 1991年 分级辐射度算法（Hierarchical radiosity）</p></li><li><p>先放在这</p><ul><li>Xiao D. He, Kenneth E. Torrance, François X. Sillion, and Donald P. Greenberg. 1991. A comprehensive physical model for light reflection. SIGGRAPH Comput. Graph. 25, 4 (July 1991), 175–186. <a href="https://doi.org/10.1145/127719.122738">https://doi.org/10.1145/127719.122738</a></li></ul></li></ul><h3 id="1992"><a href="#1992" class="headerlink" title="1992"></a>1992</h3><ul><li>RenderMan规范，简称RISpec，是一个开放的API，由皮克斯开发，用于描述三维模型并把它转换成逼真的数字图像。RenderMan规范作为建模程序和渲染程序之间的通信协议（或称为接口），用于生成逼真的数字图像。</li></ul><h3 id="1993"><a href="#1993" class="headerlink" title="1993"></a>1993</h3><ul><li><p>不连续网格辐射度（Discontinuity meshing）</p><ul><li>Dani Lischinski, Filippo Tampieri, and Donald P. Greenberg. 1993. Combining hierarchical radiosity and discontinuity meshing. In Proceedings of the 20th annual conference on Computer graphics and interactive techniques (SIGGRAPH ‘93). Association for Computing Machinery, New York, NY, USA, 199–208. <a href="https://doi.org/10.1145/166117.166143">https://doi.org/10.1145/166117.166143</a></li></ul></li><li><p>Lafortune and Willems 1993 年• Veach and Guibas 1994年 双向路径跟踪</p></li></ul><h3 id="1994"><a href="#1994" class="headerlink" title="1994"></a>1994</h3><ul><li><p>微表面&amp;Roughness相关</p><ul><li>Michael Oren and Shree K. Nayar. 1994. Generalization of Lambert’s reflectance model. In Proceedings of the 21st annual conference on Computer graphics and interactive techniques (SIGGRAPH ‘94). Association for Computing Machinery, New York, NY, USA, 239–246. <a href="https://doi.org/10.1145/192161.192213">https://doi.org/10.1145/192161.192213</a></li></ul></li></ul><h3 id="1995"><a href="#1995" class="headerlink" title="1995"></a>1995</h3><ul><li>Diffusion for light transport</li></ul><h3 id="1996"><a href="#1996" class="headerlink" title="1996"></a>1996</h3><ul><li><p>光子映射 Photon Mapping</p><ul><li>Jensen, Henrik Wann. “Global Illumination using Photon Maps.” Rendering Techniques (1996).</li></ul></li></ul><h3 id="1997"><a href="#1997" class="headerlink" title="1997"></a>1997</h3><ul><li><p>Veach and Guibas 1997 马尔可夫链蒙特卡洛</p><ul><li>Robust Monte Carlo Methods for Light Transport Simulation</li></ul></li><li><p>光子映射 Photon Mapping</p><ul><li>Bruce Walter, Philip M. Hubbard, Peter Shirley, and Donald P. Greenberg. 1997. Global illumination using local linear density estimation. ACM Trans. Graph. 16, 3 (July 1997), 217–259. <a href="https://doi.org/10.1145/256157.256158">https://doi.org/10.1145/256157.256158</a></li></ul></li><li><p>Light Transport</p><ul><li>Veach, Eric &amp; Guibas, Leonidas. (1970). Metropolis Light Transport. Computer Graphics (SIGGRAPH ‘97 Proceedings). 31. 10.1145&#x2F;258734.258775.</li></ul></li><li><p>Keller 1997年Virtual point lights (Instant Radiosity)</p></li></ul><h3 id="1998"><a href="#1998" class="headerlink" title="1998"></a>1998</h3><ul><li><p>Jensen and Christensen 1998年Volumetric photon mapping</p></li><li><p>Bi-Directional Path Tracing</p><ul><li>Lafortune, Eric &amp; Willems, Yves. (1998). Bi-Directional Path Tracing. Proceedings of Third International Conference on Computational Graphics and Visualization Techniques (Compugraphics’. 93.</li></ul></li></ul><h3 id="2000"><a href="#2000" class="headerlink" title="2000"></a>2000</h3><ul><li>Pauly 2000年 Metropolis in volumes</li></ul><h3 id="2001"><a href="#2001" class="headerlink" title="2001"></a>2001</h3><ul><li><p>次表面散射</p><ul><li>Jensen H W, Marschner S R, Levoy M, et al. A practical model for subsurface light transport[C]&#x2F;&#x2F;Proceedings of the 28th annual conference on Computer graphics and interactive techniques. ACM, 2001: 511-518.</li></ul></li></ul><h3 id="2002"><a href="#2002" class="headerlink" title="2002"></a>2002</h3><ul><li>Kelemen et al. 2002Primary sample space MCMC</li></ul><h3 id="2005"><a href="#2005" class="headerlink" title="2005"></a>2005</h3><ul><li><p>Walter 2005年 LightCuts</p></li><li><p>Cline 2005年“Energy Redistribution” 和 非遍历 MCMC</p></li><li><p>Fernando发表了Percentage-Closer Soft Shadows，称为“百分比渐近柔和阴影（PCSS）。</p><ul><li><a href="https://developer.download.nvidia.com/shaderlibrary/docs/shadow_PCSS.pdf">https://developer.download.nvidia.com/shaderlibrary/docs/shadow_PCSS.pdf</a></li></ul></li><li><p>RSM算法（Reflective Shadow Map）</p><ul><li>Carsten Dachsbacher and Marc Stamminger. 2005. Reflective shadow maps. In Proceedings of the 2005 symposium on Interactive 3D graphics and games (I3D ‘05). Association for Computing Machinery, New York, NY, USA, 203–231. <a href="https://doi.org/10.1145/1053427.1053460">https://doi.org/10.1145/1053427.1053460</a></li></ul></li></ul><h3 id="2006"><a href="#2006" class="headerlink" title="2006"></a>2006</h3><ul><li><p>VSM算法（Variance shadow maps）</p><ul><li>William Donnelly and Andrew Lauritzen. 2006. Variance shadow maps. In Proceedings of the 2006 symposium on Interactive 3D graphics and games (I3D ‘06). Association for Computing Machinery, New York, NY, USA, 161–165. <a href="https://doi.org/10.1145/1111411.1111440">https://doi.org/10.1145/1111411.1111440</a></li></ul></li></ul><h3 id="2007"><a href="#2007" class="headerlink" title="2007"></a>2007</h3><ul><li><p>Walter 2007 年 Microfacet transmission model</p></li><li><p>CSM算法</p><ul><li><a href="https://developer.download.nvidia.com/SDK/10.5/opengl/src/cascaded_shadow_maps/doc/cascaded_shadow_maps.pdf">https://developer.download.nvidia.com/SDK/10.5/opengl/src/cascaded_shadow_maps/doc/cascaded_shadow_maps.pdf</a></li></ul></li></ul><h3 id="2008"><a href="#2008" class="headerlink" title="2008"></a>2008</h3><ul><li>Jarosz 2008年 光束辐射估计（Beam Radiance Estimate）</li></ul><h3 id="2010"><a href="#2010" class="headerlink" title="2010"></a>2010</h3><ul><li>Jakob 2010年Anisotropic volume media</li></ul><h3 id="2011"><a href="#2011" class="headerlink" title="2011"></a>2011</h3><ul><li>d’Eon and Irving 2011年Advanced diffusion models</li></ul><h3 id="2012"><a href="#2012" class="headerlink" title="2012"></a>2012</h3><ul><li><p>Jakob &amp;amp;amp; Marschner 2012年Manifold Exploration</p></li><li><p>Disney Principled BRDF</p><p>- </p><ul><li>MERL 100 BRDF 材质库</li></ul></li></ul><h3 id="2014"><a href="#2014" class="headerlink" title="2014"></a>2014</h3><ul><li>Křivánek 2014年Unifying Points, Beams, and Paths</li></ul><h3 id="2015"><a href="#2015" class="headerlink" title="2015"></a>2015</h3><ul><li><p>Kettunen 2015 梯度域路径跟踪</p></li><li><p>Stochastic Screen-Space Reflections</p><ul><li><a href="https://view.officeapps.live.com/op/view.aspx?src=https://advances.realtimerendering.com/s2015/Stochastic%2520Screen-Space%2520Reflections.pptx">https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fadvances.realtimerendering.com%2Fs2015%2FStochastic%2520Screen-Space%2520Reflections.pptx</a></li></ul></li><li><p>Moment Shadow Map</p><ul><li>Christoph Peters and Reinhard Klein. 2015. Moment shadow mapping. In Proceedings of the 19th Symposium on Interactive 3D Graphics and Games (i3D ‘15). Association for Computing Machinery, New York, NY, USA, 7–14. <a href="https://doi.org/10.1145/2699276.2699277">https://doi.org/10.1145/2699276.2699277</a></li></ul></li></ul><h3 id="2018"><a href="#2018" class="headerlink" title="2018"></a>2018</h3><ul><li><p>微软提出了DirectX Ray Tracing（DXR）的API，提供了Ray Tracing Pipeline的雏形。</p></li><li><p>NVIDIA宣布了可加速硬件中光线追踪速度的新架构Turing，以及搭载实时光线追踪技术的RTX系列显卡。Nvidia推出了新一代的RTX显卡，提供了Ray Tracing硬件加速的能力。</p></li><li><p>第一款搭载RTX实时混合光线追踪技术的游戏《战地5（Battlefield V）》正式面世，基于EA的Frostbite引擎，带来了出色的混合光线追踪反射（Hybrid Ray-Traced Reflections）渲染表现。</p></li><li><p>Eric Heitz于2018年提出了一种结合了解析直接光照（analytic direct illumination）和随机阴影（stochastic shadows）的新方法[13]）。在paper中，他们提出了一种比率估计器（ratio estimator），该比率估计器可以将解析光照技术（analytic illumination techniques）与随机光线追踪阴影（stochastic raytraced shadows）正确组合。</p><ul><li>Eric Heitz, Stephen Hill, and Morgan McGuire. 2018. Combining analytic direct illumination and stochastic shadows. In Proceedings of the ACM SIGGRAPH Symposium on Interactive 3D Graphics and Games (I3D ‘18). Association for Computing Machinery, New York, NY, USA, Article 2, 1–11. <a href="https://doi.org/10.1145/3190834.3190852">https://doi.org/10.1145/3190834.3190852</a></li></ul></li></ul><h3 id="2019"><a href="#2019" class="headerlink" title="2019"></a>2019</h3><ul><li><p>SIGGRAPH2019的Ray Tracing专题报告展望了实时光线追踪的未来。其中，SEED团队分享了自己的混合渲染管线（上图），管线由一个接一个的阶段串联，而每个阶段采用最合适的技术来实现。</p><ul><li>SIGGRAPH 2019, State-of-the-Art and Challenges in Game Ray Tracing</li></ul></li></ul><h3 id="2020"><a href="#2020" class="headerlink" title="2020"></a>2020</h3><ul><li>Vulkan也推出了Ray Tracing规范，同DXR非常相似。</li></ul><h3 id="2021"><a href="#2021" class="headerlink" title="2021"></a>2021</h3><ul><li>2021年，UE5的视频又掀起了一波热潮，新一代的渲染引擎Lumen则是一套完整的光线追踪管线，分为Software和Hardware两种形式。</li><li>Nvidia推出 RayTracing Gens Ⅱ。</li></ul><h3 id="2022"><a href="#2022" class="headerlink" title="2022"></a>2022</h3><ul><li>AMD推出自己的Ray Tracing库——HIP。</li></ul></div><div class="story post-story"><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><h3 id="https-zhuanlan-zhihu-com-p-50165536"><a href="#https-zhuanlan-zhihu-com-p-50165536" class="headerlink" title="https://zhuanlan.zhihu.com/p/50165536"></a><a href="https://zhuanlan.zhihu.com/p/50165536">https://zhuanlan.zhihu.com/p/50165536</a></h3><h3 id="https-zhuanlan-zhihu-com-p-49474631"><a href="#https-zhuanlan-zhihu-com-p-49474631" class="headerlink" title="https://zhuanlan.zhihu.com/p/49474631"></a><a href="https://zhuanlan.zhihu.com/p/49474631">https://zhuanlan.zhihu.com/p/49474631</a></h3><h3 id="https-zhuanlan-zhihu-com-p-29418992"><a href="#https-zhuanlan-zhihu-com-p-29418992" class="headerlink" title="https://zhuanlan.zhihu.com/p/29418992"></a><a href="https://zhuanlan.zhihu.com/p/29418992">https://zhuanlan.zhihu.com/p/29418992</a></h3></div>]]></content>
      
      
      <categories>
          
          <category> Rendering </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rendering </tag>
            
            <tag> RayTracing </tag>
            
            <tag> PathTracing </tag>
            
            <tag> Monte Carlo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PathTracing</title>
      <link href="/2023/03/24/PathTracing/"/>
      <url>/2023/03/24/PathTracing/</url>
      
        <content type="html"><![CDATA[<h3 id="Related-Information"><a href="#Related-Information" class="headerlink" title="Related Information:"></a>Related Information:</h3><ul><li><a href="https://raytracing.github.io/books/RayTracingInOneWeekend.html">https://raytracing.github.io/books/RayTracingInOneWeekend.html</a></li><li><a href="https://raytracing.github.io/books/RayTracingTheNextWeek.html">https://raytracing.github.io/books/RayTracingTheNextWeek.html</a></li><li><a href="https://agraphicsguynotes.com/posts/sample_microfacet_brdf/">https://agraphicsguynotes.com/posts/sample_microfacet_brdf/</a></li><li><a href="http://www.cim.mcgill.ca/~derek/ecse689_a3.html">http://www.cim.mcgill.ca/~derek/ecse689_a3.html</a></li><li><a href="https://raytracing.github.io/books/RayTracingInOneWeekend.html#dielectrics">https://raytracing.github.io/books/RayTracingInOneWeekend.html#dielectrics</a></li><li><a href="https://en.wikipedia.org/wiki/M%C3%B6ller%E2%80%93Trumbore_intersection_algorithm">https://en.wikipedia.org/wiki/M%C3%B6ller%E2%80%93Trumbore_intersection_algorithm</a></li><li><a href="https://math.stackexchange.com/questions/538458/how-to-sample-points-on-a-triangle-surface-in-3d">https://math.stackexchange.com/questions/538458/how-to-sample-points-on-a-triangle-surface-in-3d</a></li><li><a href="https://computergraphics.stackexchange.com/questions/5152/progressive-path-tracing-with-explicit-light-sampling">https://computergraphics.stackexchange.com/questions/5152/progressive-path-tracing-with-explicit-light-sampling</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> PathTracing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rendering </tag>
            
            <tag> RayTracing </tag>
            
            <tag> PathTracing </tag>
            
            <tag> Monte Carlo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visibility</title>
      <link href="/2023/02/17/Visibility/"/>
      <url>/2023/02/17/Visibility/</url>
      
        <content type="html"><![CDATA[<div class="story post-story"><h2 id="任务目标："><a href="#任务目标：" class="headerlink" title="任务目标："></a>任务目标：</h2><p>参与一个可微分渲染的项目，主要负责其中的渲染部分相关工作，在前期需要使用已有的Mesh和Texture数据生成网络所需要的输入数据。其中就包括Visibility，刚开始做的时候什么都不太懂，学习相关知识耽误了很多时间，故整理于此。</p></div><div class="story post-story"><h2 id="任务理解："><a href="#任务理解：" class="headerlink" title="任务理解："></a>任务理解：</h2><p>经与导师沟通后，本项目要求的Visibility并不是从相机角度看过去的可视性，而是更像环境光照那种，设想有一个无限大的球面，在球面上通过遍历不同的经纬得到不同的光线方向，对于模型上面的每一个顶点，计算在球面上各个方向其是否可视（光线不被其他物体或者面片遮挡）。<br><br>为了方便数据输入网络，导师还要求将这个可视数据通过球谐函数Spherical Harmonics计算得到在球谐函数空间的前9维系数，从而将每一个顶点在各个方向上是否可见的信息，转化为一个9维的向量，作为Mesh中顶点的附加属性。</p></div><div class="story post-story"><h2 id="具体实现："><a href="#具体实现：" class="headerlink" title="具体实现："></a>具体实现：</h2><p>因为在计算Visibility中需要对整个球面进行光线方向的采样，并计算其在整个场景中是否与其他物体或者面片相交，因此其实可以转化为使用一个光线追踪的框架来帮助完成这个工作，在前期探索中，曾经试图使用Games202 Assignment2的Nori框架来完成这件事，但是后面与导师沟通后，导师建议我使用Mitsuba来完成该工作，原因主要有下：Mitsuba的使用场合较为广泛，相关的资料和实验室能够提供的帮助也较多；另外学习Mitsuba也对我之后在渲染方向的继续探索有帮助。</p><p>而对于投影到SH这一步，目前我在Giuhub上找到一个开源的项目：</p><ul><li><a href="https://github.com/chalmersgit/SphericalHarmonics">https://github.com/chalmersgit/SphericalHarmonics</a></li></ul><p>初步决定在其基础上进行修改完成第二部分计算工作。这个项目初衷是针对Image Based Lighting的SH投影计算，其使用的IBL投影方式是Equirectangular Projection(ERP)。相关资料：</p><ul><li><a href="https://blog.csdn.net/lin453701006/article/details/71173090">https://blog.csdn.net/lin453701006/article/details/71173090</a></li></ul><p>因此首先要把球面采样的代码修改到与该投影方式对应，得到一张这样的图像，再使用该项目计算SH。</p></div><div class="story post-story"><h2 id="具体实现中遇到的问题"><a href="#具体实现中遇到的问题" class="headerlink" title="具体实现中遇到的问题"></a>具体实现中遇到的问题</h2><ul><li>从maya导出的mesh 在Maya中没有Transform 但是导入Blender有x轴上90度的旋转，而进入到Mitsuba时其在空间坐标系中的状态是Blender中去掉90旋转之后的状态，初步怀疑是Maya、Blender和Mitsuba三者的坐标系有些不同，但是目前还没有深入探索得到答案。</li><li>在进行球面采样的时候，需要为了防止边界出现问题，需要将每个像素点的坐标变换到像素点中心，即遍历xy时对其进行x+0.5 y+0.5的计算。</li></ul></div><div class="story post-story"><h2 id="相关知识点"><a href="#相关知识点" class="headerlink" title="相关知识点"></a>相关知识点</h2><p>Image Based Lighting分为三种不同的投影方式：</p><ul><li>Cube Map</li><li>Dual Paraboloid Map</li><li>Equirectangualr Map</li></ul></div><div class="story post-story"><h2 id="相关资料"><a href="#相关资料" class="headerlink" title="相关资料"></a>相关资料</h2><ul><li>Spherical Harmonics：<br><a href="https://www.jianshu.com/p/a379b4c6d346">https://www.jianshu.com/p/a379b4c6d346</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> Deep Face Project </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learing </tag>
            
            <tag> Artificial Intelligent </tag>
            
            <tag> Spherical Harmonics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些资源</title>
      <link href="/2022/11/10/%E4%B8%80%E4%BA%9B%E8%B5%84%E6%BA%90/"/>
      <url>/2022/11/10/%E4%B8%80%E4%BA%9B%E8%B5%84%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<p>常用Mesh：<a href="http://casual-effects.com/data/index.html">http://casual-effects.com/data/index.html</a></p><ul><li><p>shell转bat：</p><ul><li><a href="https://daniel-sc.github.io/bash-shell-to-bat-converter/">https://daniel-sc.github.io/bash-shell-to-bat-converter/</a></li></ul></li><li><p>Spherical Harmonics：<br><a href="https://www.jianshu.com/p/a379b4c6d346">https://www.jianshu.com/p/a379b4c6d346</a></p></li><li><p><a href="https://github.com/blurgyy/cg-2020">https://github.com/blurgyy/cg-2020</a></p></li><li><p>Chrono是c++11的一个时间库，可以用它来做程序运行时间的记录。</p></li><li><p><a href="https://www.cnblogs.com/jwk000/p/3560086.html">https://www.cnblogs.com/jwk000/p/3560086.html</a></p></li><li><p>git submodule 如何push 代码</p></li><li><p>cd your_submodule</p></li><li><p>git checkout master</p></li><li><p>git commit -a -m “commit message”</p></li><li><p>git push</p></li><li><p>cd ..</p></li><li><p>git add your_submodule</p></li><li><p>git commit -m “Update submodule”</p></li><li><p>git submodule update –remote</p></li><li><p>git pull –recurse-submodules</p></li><li><p>Warp是一个可以迁移拓扑并投影贴图的软件</p></li><li><p>TinyXML2是一个可以解析XML格式文件的库</p></li><li><p><a href="https://github.com/leethomason/tinyxml2">https://github.com/leethomason/tinyxml2</a></p></li><li><p>Maya里面的坐标系是Y轴朝上</p></li><li><p>Blender里面的坐标系是z轴朝上</p></li><li><p>都是右手坐标系</p></li><li><p>所以模型导入blender会自动沿着x轴旋转90度</p></li><li><p>PBRT:</p></li><li><p><a href="https://www.pbr-book.org/3ed-2018/contents">https://www.pbr-book.org/3ed-2018/contents</a></p></li><li><p><a href="https://github.com/BachiLi/lajolla_public">https://github.com/BachiLi/lajolla_public</a></p></li><li><p><a href="https://github.com/462cmu">https://github.com/462cmu</a></p></li><li><p><a href="https://github.com/wjakob/nori">https://github.com/wjakob/nori</a></p></li><li><p><a href="https://github.com/HW140701/Book-list-of-computational-geometry-and-computer-graphics">https://github.com/HW140701/Book-list-of-computational-geometry-and-computer-graphics</a></p></li><li><p><a href="https://blog.csdn.net/qq_21388689/article/details/117129404">https://blog.csdn.net/qq_21388689/article/details/117129404</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/553407062">https://zhuanlan.zhihu.com/p/553407062</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Neural Rendering</title>
      <link href="/2022/07/29/Neural-Rendering/"/>
      <url>/2022/07/29/Neural-Rendering/</url>
      
        <content type="html"><![CDATA[<ul><li><a href="https://www.youtube.com/watch?v=otly9jcZ0Jg">https://www.youtube.com/watch?v=otly9jcZ0Jg</a></li><li><a href="https://www.youtube.com/watch?v=aboFl5ozImM">https://www.youtube.com/watch?v=aboFl5ozImM</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Neural Rendering </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Neural Rendering </tag>
            
            <tag> Artificial Intelligence </tag>
            
            <tag> Rendering </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deep Face 初期实践</title>
      <link href="/2022/07/25/Deep-Face-%E5%88%9D%E6%9C%9F%E5%AE%9E%E8%B7%B5/"/>
      <url>/2022/07/25/Deep-Face-%E5%88%9D%E6%9C%9F%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<ul><li><p>解决CondaHTTPError:HTTP 000：<a href="https://blog.csdn.net/weixin_51484460/article/details/122179000">https://blog.csdn.net/weixin_51484460/article/details/122179000</a></p></li><li><p>批处理文件格式的Deep Face Lab及教程：<a href="https://blog.csdn.net/yihuaixu/article/details/120738257">https://blog.csdn.net/yihuaixu/article/details/120738257</a></p></li><li><p><a href="https://blog.csdn.net/u010554381/article/details/100131811">https://blog.csdn.net/u010554381/article/details/100131811</a></p></li><li><p>Deep Face Lab参数说明：<a href="https://blog.csdn.net/qq_28941587/article/details/113790231">https://blog.csdn.net/qq_28941587/article/details/113790231</a></p></li><li><p>数据集：<a href="https://github.com/ondyari/FaceForensics/">https://github.com/ondyari/FaceForensics/</a></p></li><li><ul><li><a href="http://kaldir.vc.in.tum.de/faceforensics_benchmark/">http://kaldir.vc.in.tum.de/faceforensics_benchmark/</a></li></ul></li><li><ul><li>下载：<a href="http://kaldir.vc.in.tum.de/faceforensics_download_v1.py">http://kaldir.vc.in.tum.de/faceforensics_download_v1.py</a></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Deep Face Project </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learing </tag>
            
            <tag> GAN </tag>
            
            <tag> Deep Fake </tag>
            
            <tag> Artificial Intelligent </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TA-learning-Note01</title>
      <link href="/2022/07/14/TA-learning/"/>
      <url>/2022/07/14/TA-learning/</url>
      
        <content type="html"><![CDATA[<p>一些零碎的知识</p><span id="more"></span><h3 id="Key-Words"><a href="#Key-Words" class="headerlink" title="Key Words:"></a>Key Words:</h3><ul><li><p>重要性采样</p></li><li><p>Image based lighting</p></li><li><p>Spherical Harmonics</p></li><li><p>Blender渲染中的两种重要性采样</p></li><li><ul><li>Indirect Light</li></ul></li><li><ul><li>Direct Light</li></ul></li><li><p>如何制作雨中布料渲染效果</p></li><li><ul><li><a href="https://www.youtube.com/watch?v=w3lwfMKkEwI">https://www.youtube.com/watch?v=w3lwfMKkEwI</a></li></ul></li><li><ul><li><a href="https://youngjoongkwon.wordpress.com/2017/11/30/real-time-animation-of-rain-wet-cloth-material-2016/">https://youngjoongkwon.wordpress.com/2017/11/30/real-time-animation-of-rain-wet-cloth-material-2016/</a></li></ul></li><li><ul><li><a href="https://cdn.jsdelivr.net/gh/YaelCassini/Papers/TA/Wet%20cloth%20animation%20with%20vertex%20based%20adhesion%20force%20model.pdf">https://cdn.jsdelivr.net/gh/YaelCassini/Papers/TA/Wet%20cloth%20animation%20with%20vertex%20based%20adhesion%20force%20model.pdf</a></li></ul></li><li><ul><li><a href="https://cdn.jsdelivr.net/gh/YaelCassini/Papers/TA/Real-time%20Animation%20of%20Rain-wet%20Cloth%20Material.pdf">https://cdn.jsdelivr.net/gh/YaelCassini/Papers/TA/Real-time%20Animation%20of%20Rain-wet%20Cloth%20Material.pdf</a></li></ul></li><li><p>Normal Mapping相关</p></li><li><ul><li>Triplanar Mapping</li></ul></li><li><ul><li><a href="https://blog.selfshadow.com/publications/blending-in-detail/#mjx-eqn-eqquat">https://blog.selfshadow.com/publications/blending-in-detail/#mjx-eqn-eqquat</a></li></ul></li><li><p>渲染中的坐标变换：</p></li><li><ul><li><a href="https://blog.csdn.net/sinat_34870723/article/details/113925012">https://blog.csdn.net/sinat_34870723/article/details/113925012</a></li></ul></li><li><ul><li><a href="https://zhuanlan.zhihu.com/p/115395322">https://zhuanlan.zhihu.com/p/115395322</a></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> TA-learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rendering </tag>
            
            <tag> Notes </tag>
            
            <tag> Technical Artist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deep Fake 初期调研</title>
      <link href="/2022/07/04/Deep%20Fake%20%E5%88%9D%E6%9C%9F%E8%B0%83%E7%A0%94/"/>
      <url>/2022/07/04/Deep%20Fake%20%E5%88%9D%E6%9C%9F%E8%B0%83%E7%A0%94/</url>
      
        <content type="html"><![CDATA[<ul><li><p>GAN论文总结：<a href="https://mp.weixin.qq.com/s?__biz=MzU5MTgzNzE0MA==&amp;mid=100002834&amp;idx=1&amp;sn=7d1c740509ba6b65f630f6db6bd51d7b&amp;chksm=7e29aea9495e27bfa746902298298c921320c3cb13a0619824528c3d1803f533779b7a93a242#rd">https://mp.weixin.qq.com/s?__biz=MzU5MTgzNzE0MA==&amp;mid=100002834&amp;idx=1&amp;sn=7d1c740509ba6b65f630f6db6bd51d7b&amp;chksm=7e29aea9495e27bfa746902298298c921320c3cb13a0619824528c3d1803f533779b7a93a242#rd</a></p></li><li><p>3DMM：<a href="https://zhuanlan.zhihu.com/p/161828142">https://zhuanlan.zhihu.com/p/161828142</a></p></li><li><p>深度学习入门：<a href="https://zhuanlan.zhihu.com/p/372029815">https://zhuanlan.zhihu.com/p/372029815</a></p></li><li><p>Keywords: 全连接神经网络、CNN、RNN、LTSM、GAN</p></li><li><p>CNN：<a href="https://zhuanlan.zhihu.com/p/38160157">https://zhuanlan.zhihu.com/p/38160157</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Deep Face Project </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learing </tag>
            
            <tag> GAN </tag>
            
            <tag> Deep Fake </tag>
            
            <tag> Artificial Intelligent </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Subsurface Scattering</title>
      <link href="/2022/06/15/Subsurface-Scattering/"/>
      <url>/2022/06/15/Subsurface-Scattering/</url>
      
        <content type="html"><![CDATA[<p>蒙特卡洛积分：</p><ul><li><a href="https://zhuanlan.zhihu.com/p/146144853">https://zhuanlan.zhihu.com/p/146144853</a></li><li><a href="https://www.cnblogs.com/time-flow1024/p/10094293.html#mjx-eqn-eq%3AFN">https://www.cnblogs.com/time-flow1024/p/10094293.html#mjx-eqn-eq%3AFN</a></li><li><a href="https://zhuanlan.zhihu.com/p/365624460">https://zhuanlan.zhihu.com/p/365624460</a></li><li>我悟了！</li></ul><p>Blender Random Walk SSS：</p><ul><li><a href="https://www.blendernation.com/2018/02/10/new-random-walk-method-sss-cycles/">https://www.blendernation.com/2018/02/10/new-random-walk-method-sss-cycles/</a></li><li><a href="https://www.youtube.com/watch?v=fSShkXJtWjU">https://www.youtube.com/watch?v=fSShkXJtWjU</a></li></ul><p>Blender Subsurface：</p><ul><li><a href="https://docs.blender.org/manual/en/latest/render/shader_nodes/shader/sss.html">https://docs.blender.org/manual/en/latest/render/shader_nodes/shader/sss.html</a></li></ul><p>BRDF、BTDF、BSDF、BSSDF：</p><ul><li><a href="https://zhuanlan.zhihu.com/p/27014447">https://zhuanlan.zhihu.com/p/27014447</a></li></ul><p>次表面散射：</p><ul><li><p>毛星云总结Gems 3：<a href="https://zhuanlan.zhihu.com/p/42433792">https://zhuanlan.zhihu.com/p/42433792</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/21247702?refer=graphics">https://zhuanlan.zhihu.com/p/21247702?refer=graphics</a></p></li><li><ol start="2001"><li>A Practical Model for Subsurface Light Transport</li></ol></li><li><p>引入偶极子：2001. A Practical Model for Subsurface Light Transport</p></li><li><p>引入多极子：2005. Light Diffusion in Multi-Layered Translucent Materials</p></li></ul><p>基于纹理空间、基于屏幕空间</p><p>基于纹理空间：Advanced Skin Rendering——Nvidia：<a href="https://developer.download.nvidia.com/presentations/2007/gdc/Advanced_Skin.pdf">https://developer.download.nvidia.com/presentations/2007/gdc/Advanced_Skin.pdf</a></p><ul><li><p>可分离的次表面散射：Separable Subsurface Scattering</p></li><li><p>Arnold 提供的次表面散射说明：<a href="https://docs.arnoldrenderer.com/display/A5AFMUG/Subsurface">https://docs.arnoldrenderer.com/display/A5AFMUG/Subsurface</a></p></li><li><p>Random Walk算法：<a href="https://blog.csdn.net/Da___Vinci/article/details/82958297">https://blog.csdn.net/Da___Vinci/article/details/82958297</a></p></li><li><p>一维随机游走：<a href="https://blog.csdn.net/qq_43186282/article/details/114585885">https://blog.csdn.net/qq_43186282/article/details/114585885</a></p></li><li><p><a href="http://www.iryoku.com/">http://www.iryoku.com/</a></p></li><li><p><a href="http://www.iryoku.com/separable-sss/">http://www.iryoku.com/separable-sss/</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Subsurface Scattering </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rendering </tag>
            
            <tag> Monte Carlo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Volantis主题配置</title>
      <link href="/2022/06/15/Volantis%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/06/15/Volantis%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>Volantis主题配制教程<br>转自：<a href="https://volantis.js.org/v5/theme-settings/">https://volantis.js.org/v5/theme-settings/</a></p><span id="more"></span><div class="story post-story"><h2 id="创建主题配置文件"><a href="#创建主题配置文件" class="headerlink" title="创建主题配置文件"></a>创建主题配置文件</h2><p>主题目录下的 <code>_config.yml</code> 文件通常负责主题相关配置，我们强烈建议您使用代替的主题配置文件以防止自己的配置丢失。那么如何使用代替主题配置文件呢？</p><div class="timeline"><div class="timenode"><div class="meta"><p><p>第 1&#x2F;2 步：创建配置文件</p></p></div><div class="body"><p>在博客根目录的 <code>_config.yml</code> 文件旁边新建一个文件： <code>_config.volantis.yml</code> ，这个文件中的配置信息优先级高于主题文件夹中的配置文件。</p></div></div><div class="timenode"><div class="meta"><p><p>第 2&#x2F;2 步：覆盖自定义配置</p></p></div><div class="body"><p>当您需要修改某项内容时，例如导航栏菜单，那么您需要在主题配置文件中找到相关内容，复制进自己创建的配置文件中：</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">navbar:</span></span><br><span class="line">  <span class="attr">visiable:</span> <span class="string">auto</span> <span class="comment"># always, auto</span></span><br><span class="line">  <span class="attr">logo:</span> <span class="comment"># choose [img] or [icon + title]</span></span><br><span class="line">    <span class="attr">img:</span> <span class="string">volantis-static/media/org.volantis/blog/Logo-NavBar@3x.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">title:</span></span><br><span class="line">  <span class="attr">menu:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">博客</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-rss</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/</span></span><br></pre></td></tr></table></figure><div class="note idea yellow"><p><strong>小提示</strong><br>使用「<code>npm i hexo-theme-volantis</code>」方式安装的主题，主题配置文件在「<code>blog/node_modules/hexo-theme-volantis/_config.yml</code>」<br>使用传统方式安装的主题，主题配置文件在「<code>blog/themes/volantis/_config.yml</code>」</p></div></div></div></div></div><div class="story post-story"><h2 id="自定义主题外观"><a href="#自定义主题外观" class="headerlink" title="自定义主题外观"></a>自定义主题外观</h2><h3 id="最大布局宽度"><a href="#最大布局宽度" class="headerlink" title="最大布局宽度"></a>最大布局宽度</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">max_width:</span> <span class="string">1080px</span> <span class="comment"># Sum of body width and sidebar width</span></span><br></pre></td></tr></table></figure><p>网页所呈现的内容的最大宽度，即 body 和 sidebar 的宽度之和。</p><h3 id="抗锯齿"><a href="#抗锯齿" class="headerlink" title="抗锯齿"></a>抗锯齿</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">font_smoothing:</span> <span class="literal">true</span> <span class="comment"># font-smoothing for webkit</span></span><br></pre></td></tr></table></figure><h3 id="自定义光标样式"><a href="#自定义光标样式" class="headerlink" title="自定义光标样式"></a>自定义光标样式</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">cursor:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">text:</span> <span class="string">volantis-static/media/cursor/text.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/inkss/common@1/cursor/text.png</span></span><br><span class="line">    <span class="attr">pointer:</span> <span class="string">volantis-static/media/cursor/pointer.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/inkss/common@1/cursor/pointer.png</span></span><br><span class="line">    <span class="attr">default:</span> <span class="string">volantis-static/media/cursor/left_ptr.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/inkss/common@1/cursor/left_ptr.png</span></span><br><span class="line">    <span class="attr">not-allowed:</span> <span class="string">volantis-static/media/cursor/circle.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/inkss/common@1/cursor/circle.png</span></span><br><span class="line">    <span class="attr">zoom-out:</span> <span class="string">volantis-static/media/cursor/zoom-out.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/inkss/common@1/cursor/zoom-out.png</span></span><br><span class="line">    <span class="attr">zoom-in:</span> <span class="string">volantis-static/media/cursor/zoom-in.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/inkss/common@1/cursor/zoom-in.png</span></span><br><span class="line">    <span class="attr">grab:</span> <span class="string">volantis-static/media/cursor/openhand.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/inkss/common@1/cursor/openhand.png</span></span><br></pre></td></tr></table></figure><h3 id="导航栏样式"><a href="#导航栏样式" class="headerlink" title="导航栏样式"></a>导航栏样式</h3><p>您可以设置导航栏的高度以及视觉特效，视觉特效目前可选的有：</p><ul><li><strong>shadow</strong>：卡片阴影。</li><li><strong>floatable</strong>：当鼠标移动到容器内时，呈现出浮起来的效果。</li><li><strong>blur</strong>：背景模糊效果（毛玻璃），当浏览器不支持时显示为不透明。</li></ul><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">navbar:</span></span><br><span class="line">    <span class="attr">height:</span> <span class="string">64px</span></span><br><span class="line">    <span class="attr">width:</span> <span class="string">auto</span> <span class="comment"># auto, max</span></span><br><span class="line">    <span class="attr">effect:</span> [<span class="string">shadow</span>, <span class="string">blur</span>] <span class="comment"># [shadow, floatable, blur]</span></span><br></pre></td></tr></table></figure><h3 id="滚动条样式"><a href="#滚动条样式" class="headerlink" title="滚动条样式"></a>滚动条样式</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">scrollbar:</span></span><br><span class="line">    <span class="attr">size:</span> <span class="string">4px</span></span><br><span class="line">    <span class="attr">border:</span> <span class="string">2px</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&#x27;#2196f3&#x27;</span></span><br><span class="line">    <span class="attr">hover:</span> <span class="string">&#x27;#ff5722&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="侧边栏样式"><a href="#侧边栏样式" class="headerlink" title="侧边栏样式"></a>侧边栏样式</h3><p>视觉特效参数同上，值得注意的是：卡片的 <code>floatable</code> 效果和 <code>blur</code> 效果相冲突。</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">sidebar:</span></span><br><span class="line">    <span class="attr">effect:</span> [<span class="string">shadow</span>] <span class="comment"># [shadow, floatable, blur]</span></span><br></pre></td></tr></table></figure><h3 id="正文区域样式"><a href="#正文区域样式" class="headerlink" title="正文区域样式"></a>正文区域样式</h3><p>视觉特效参数同上，值得注意的是：卡片的 <code>floatable</code> 效果和 <code>blur</code> 效果相冲突。您可以在 <code>language: true</code> 这里设置代码块显示语言名称。<code>text_align</code> 可以设置 h1&#x2F;h2&#x2F;h3&#x2F;h4&#x2F;p 的文字对齐方向。</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">    <span class="attr">effect:</span> [<span class="string">shadow</span>] <span class="comment"># [shadow, floatable, blur]</span></span><br><span class="line">    <span class="attr">highlight:</span></span><br><span class="line">      <span class="attr">language:</span> <span class="literal">true</span> <span class="comment"># show language of codeblock</span></span><br><span class="line">      <span class="attr">copy_btn:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">text_align:</span> <span class="comment"># left, right, justify, center</span></span><br><span class="line">      <span class="attr">h1:</span> <span class="string">left</span></span><br><span class="line">      <span class="attr">h2:</span> <span class="string">left</span></span><br><span class="line">      <span class="attr">h3:</span> <span class="string">left</span></span><br><span class="line">      <span class="attr">h4:</span> <span class="string">left</span></span><br><span class="line">      <span class="attr">p:</span> <span class="string">justify</span></span><br></pre></td></tr></table></figure><h3 id="布局间距"><a href="#布局间距" class="headerlink" title="布局间距"></a>布局间距</h3><p>您可以设置几种标题的布局间距 h2&#x2F;h3&#x2F;h4、段落间距 line、区块内部的段落间距 inline。</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">gap:</span></span><br><span class="line">    <span class="attr">h2:</span> <span class="string">48px</span> <span class="comment"># Spacing above H2 (only px unit)</span></span><br><span class="line">    <span class="attr">h3:</span> <span class="string">24px</span> <span class="comment"># Spacing above H3 (only px unit)</span></span><br><span class="line">    <span class="attr">h4:</span> <span class="string">16px</span> <span class="comment"># Spacing above H4 (only px unit)</span></span><br><span class="line">    <span class="attr">p:</span> <span class="string">1em</span> <span class="comment"># Paragraph spacing between paragraphs</span></span><br><span class="line">    <span class="attr">line_height:</span> <span class="number">1.6</span> <span class="comment"># normal, 1.5, 1.75, 2 ...</span></span><br></pre></td></tr></table></figure><h3 id="自定义字体"><a href="#自定义字体" class="headerlink" title="自定义字体"></a>自定义字体</h3><p>您可以自定义正文和代码字体。</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">fontfamily:</span></span><br><span class="line">    <span class="attr">logofont:</span></span><br><span class="line">      <span class="attr">fontfamily:</span> <span class="string">&#x27;&quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial&#x27;</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;Varela Round&#x27;</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">volantis-static/media/fonts/VarelaRound/VarelaRound-Regular.ttf</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-fonts/VarelaRound/VarelaRound-Regular.ttf</span></span><br><span class="line">      <span class="attr">weight:</span> <span class="string">normal</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">normal</span></span><br><span class="line">    <span class="attr">bodyfont:</span></span><br><span class="line">      <span class="attr">fontfamily:</span> <span class="string">&#x27;UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial&#x27;</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;UbuntuMono&#x27;</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">volantis-static/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-fonts/UbuntuMono/UbuntuMono-Regular.ttf</span></span><br><span class="line">      <span class="attr">weight:</span> <span class="string">normal</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">normal</span></span><br><span class="line">    <span class="attr">codefont:</span></span><br><span class="line">      <span class="attr">fontfamily:</span> <span class="string">&#x27;Menlo, UbuntuMono, Monaco&#x27;</span></span><br><span class="line">      <span class="comment"># name: &#x27;Monaco&#x27;</span></span><br><span class="line">      <span class="comment"># url: volantis-static/media/fonts/Monaco/Monaco.ttf # https://cdn.jsdelivr.net/gh/volantis-x/cdn-fonts/Monaco/Monaco.ttf</span></span><br><span class="line">      <span class="comment"># weight: normal</span></span><br><span class="line">      <span class="comment"># style: normal</span></span><br></pre></td></tr></table></figure><h3 id="自定义颜色"><a href="#自定义颜色" class="headerlink" title="自定义颜色"></a>自定义颜色</h3><span class='btn solid large center'><a class="button" href='https://mhg-lab.github.io/pages/color/' title='多彩配色方案'><i class='fad fa-paper-plane'></i>多彩配色方案</a></span><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">color_scheme:</span></span><br><span class="line">  <span class="comment"># ------------</span></span><br><span class="line">  <span class="comment"># 通用颜色</span></span><br><span class="line">  <span class="attr">common:</span></span><br><span class="line">    <span class="comment"># 主题色</span></span><br><span class="line">    <span class="attr">theme:</span> <span class="string">&#x27;#44D7B6&#x27;</span></span><br><span class="line">    <span class="comment"># 链接色</span></span><br><span class="line">    <span class="attr">link:</span> <span class="string">&#x27;#2196f3&#x27;</span></span><br><span class="line">    <span class="comment"># 按钮色</span></span><br><span class="line">    <span class="attr">button:</span> <span class="string">&#x27;#44D7B6&#x27;</span></span><br><span class="line">    <span class="comment"># 鼠标放到交互元素上时的色</span></span><br><span class="line">    <span class="attr">hover:</span> <span class="string">&#x27;#ff5722&#x27;</span></span><br><span class="line">    <span class="comment"># 主题色块内部的文字颜色</span></span><br><span class="line">    <span class="attr">inner:</span> <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">    <span class="comment"># 选中区域文字的背景颜色</span></span><br><span class="line">    <span class="attr">selection:</span> <span class="string">&#x27;alpha(#2196f3, 0.2)&#x27;</span></span><br><span class="line">  <span class="comment"># ------------</span></span><br><span class="line">  <span class="comment"># 亮色主题（默认）</span></span><br><span class="line">  <span class="attr">light:</span></span><br><span class="line">    <span class="comment"># 网站背景色</span></span><br><span class="line">    <span class="attr">site_bg:</span> <span class="string">&#x27;#f4f4f4&#x27;</span></span><br><span class="line">    <span class="comment"># 网站背景上的文字</span></span><br><span class="line">    <span class="attr">site_inner:</span> <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">    <span class="comment"># 网站页脚文字</span></span><br><span class="line">    <span class="attr">site_footer:</span> <span class="string">&#x27;#666&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 卡片背景色</span></span><br><span class="line">    <span class="attr">card:</span> <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">    <span class="comment"># 卡片上的普通文字</span></span><br><span class="line">    <span class="attr">text:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 区块和代码块背景色</span></span><br><span class="line">    <span class="attr">block:</span> <span class="string">&#x27;#f6f6f6&#x27;</span></span><br><span class="line">    <span class="comment"># 代码块高亮时的背景色</span></span><br><span class="line">    <span class="attr">codeblock:</span> <span class="string">&#x27;#FFF7EA&#x27;</span></span><br><span class="line">    <span class="comment"># 行内代码颜色</span></span><br><span class="line">    <span class="attr">inlinecode:</span> <span class="string">&#x27;#D56D28&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 文章部分</span></span><br><span class="line">    <span class="attr">h1:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line">    <span class="attr">h2:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line">    <span class="attr">h3:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line">    <span class="attr">h4:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line">    <span class="attr">h5:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line">    <span class="attr">h6:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line">    <span class="attr">p:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 列表文字</span></span><br><span class="line">    <span class="attr">list:</span> <span class="string">&#x27;#666&#x27;</span></span><br><span class="line">    <span class="comment"># 列表 hover 时的文字</span></span><br><span class="line">    <span class="attr">list_hl:</span> <span class="string">&#x27;mix($color-theme, #000, 80)&#x27;</span></span><br><span class="line">    <span class="comment"># 辅助性文字</span></span><br><span class="line">    <span class="attr">meta:</span> <span class="string">&#x27;#888&#x27;</span></span><br><span class="line">  <span class="comment"># ------------</span></span><br><span class="line">  <span class="comment"># 暗色主题</span></span><br><span class="line">  <span class="attr">dark:</span></span><br><span class="line">    <span class="comment"># 网站背景色</span></span><br><span class="line">    <span class="attr">site_bg:</span> <span class="string">&#x27;#222&#x27;</span></span><br><span class="line">    <span class="comment"># 网站背景上的文字</span></span><br><span class="line">    <span class="attr">site_inner:</span> <span class="string">&#x27;#eee&#x27;</span></span><br><span class="line">    <span class="comment"># 网站页脚文字</span></span><br><span class="line">    <span class="attr">site_footer:</span> <span class="string">&#x27;#aaa&#x27;</span></span><br><span class="line">    <span class="comment"># 卡片背景色</span></span><br><span class="line">    <span class="attr">card:</span> <span class="string">&#x27;#444&#x27;</span></span><br><span class="line">    <span class="comment"># 卡片上的普通文字</span></span><br><span class="line">    <span class="attr">text:</span> <span class="string">&#x27;#eee&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 区块和代码块背景色</span></span><br><span class="line">    <span class="attr">block:</span> <span class="string">&#x27;#3a3a3a&#x27;</span></span><br><span class="line">    <span class="comment"># 代码块高亮时的背景色</span></span><br><span class="line">    <span class="attr">codeblock:</span> <span class="string">&#x27;#343a3c&#x27;</span></span><br><span class="line">    <span class="comment"># 行内代码颜色</span></span><br><span class="line">    <span class="attr">inlinecode:</span> <span class="string">&#x27;#D56D28&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 文章部分</span></span><br><span class="line">    <span class="attr">h1:</span> <span class="string">&#x27;#eee&#x27;</span></span><br><span class="line">    <span class="attr">h2:</span> <span class="string">&#x27;#eee&#x27;</span></span><br><span class="line">    <span class="attr">h3:</span> <span class="string">&#x27;#ddd&#x27;</span></span><br><span class="line">    <span class="attr">h4:</span> <span class="string">&#x27;#ddd&#x27;</span></span><br><span class="line">    <span class="attr">h5:</span> <span class="string">&#x27;#ddd&#x27;</span></span><br><span class="line">    <span class="attr">h6:</span> <span class="string">&#x27;#ddd&#x27;</span></span><br><span class="line">    <span class="attr">p:</span> <span class="string">&#x27;#bbb&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 列表文字</span></span><br><span class="line">    <span class="attr">list:</span> <span class="string">&#x27;#aaa&#x27;</span></span><br><span class="line">    <span class="comment"># 列表 hover 时的文字</span></span><br><span class="line">    <span class="attr">list_hl:</span> <span class="string">&#x27;mix($color-theme, #fff, 80)&#x27;</span></span><br><span class="line">    <span class="comment"># 辅助性文字</span></span><br><span class="line">    <span class="attr">meta:</span> <span class="string">&#x27;#888&#x27;</span></span><br><span class="line">    <span class="comment"># 夜间图片亮度</span></span><br><span class="line">    <span class="attr">brightness:</span> <span class="number">70</span><span class="string">%</span></span><br></pre></td></tr></table></figure><h3 id="自定义右键菜单"><a href="#自定义右键菜单" class="headerlink" title="自定义右键菜单"></a>自定义右键菜单</h3><p>自定义右键菜单自 <code>5.0.0-rc.8</code> 版本进行了全新重构，与历史版本相比，重构版右键菜单拥有更灵活的配置。</p><p>由于新版右键菜单配置较为复杂，原版菜单<strong>暂时性</strong>保留，在配置文件上新版右键以  <code>rightmenus</code> 命名。</p><blockquote><p><em>为了方面称呼，以<strong>新版右键</strong>代指重构版右键菜单，<strong>老版右键</strong>代指历史版本右键菜单。</em></p></blockquote><h4 id="差异对比"><a href="#差异对比" class="headerlink" title="差异对比"></a>差异对比</h4><p>新旧两版右键菜单的差异如下：</p><table><thead><tr><th>对比项</th><th>老版右键</th><th>新版右键</th></tr></thead><tbody><tr><td>自定义菜单项</td><td>只支持新增链接型菜单</td><td>同时支持事件型和链接型菜单</td></tr><tr><td>菜单项显示与顺序调整</td><td>部分支持</td><td>完全支持</td></tr><tr><td>内置菜单自定义调整</td><td>部分支持</td><td>完全支持修改文字描述、图标显示、功能实现等内容</td></tr><tr><td>自定义响应事件处理</td><td>不支持</td><td>支持自行添加</td></tr><tr><td>复制图片至剪切板</td><td>仅支持 PNG 格式图片</td><td>任意格式的图片</td></tr><tr><td>全局音乐控制</td><td>支持</td><td>支持</td></tr></tbody></table><h4 id="新版右键菜单"><a href="#新版右键菜单" class="headerlink" title="新版右键菜单"></a>新版右键菜单</h4><p>新版右键在菜单项上根据配置文件自行生成前端代码，所以统一了一个共用的菜单对象：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">id</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">link</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">event</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">group</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><p>同时为了响应不同状态下的右键行为，提出了<strong>内置组</strong> （<code>defaultGroup</code>）的概念，相应的对于右键默认提供的功能实现则定义为<strong>内置实现</strong>（<code>defaultEvent</code>）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">defaultEvent</span>: [<span class="string">&#x27;copyText&#x27;</span>, <span class="string">&#x27;copyLink&#x27;</span>, <span class="string">&#x27;copyPaste&#x27;</span>, <span class="string">&#x27;copyAll&#x27;</span>, <span class="string">&#x27;copyCut&#x27;</span>, <span class="string">&#x27;copyImg&#x27;</span>, <span class="string">&#x27;printMode&#x27;</span>, <span class="string">&#x27;readMode&#x27;</span>],</span><br><span class="line">  <span class="attr">defaultGroup</span>: [<span class="string">&#x27;navigation&#x27;</span>, <span class="string">&#x27;inputBox&#x27;</span>, <span class="string">&#x27;seletctText&#x27;</span>, <span class="string">&#x27;elementCheck&#x27;</span>, <span class="string">&#x27;elementImage&#x27;</span>, <span class="string">&#x27;articlePage&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体来说，内置组对应右键行为，例如 <code>inputBox</code> 代表在输入框下右键行为；内置实现对应自定义右键默认提供的功能实现，例如 <code>readMode</code> 代表了阅读模式。</p><h5 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h5><figure class="highlight yml"><figcaption><span>plugins/menus 类的组内数据支持对象（单个菜单）或数组（一系列菜单）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rightmenus:</span></span><br><span class="line">  <span class="attr">order:</span></span><br><span class="line">    <span class="string">menus.groupName</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="string">defaultGroupItem</span></span><br><span class="line">  <span class="attr">menus:</span></span><br><span class="line">    <span class="attr">groupName:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="string">menu</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="string">menu</span>&#125;</span><br><span class="line">    <span class="attr">groupName1:</span> &#123;<span class="string">menu</span>&#125;</span><br></pre></td></tr></table></figure><h6 id="右键菜单加载"><a href="#右键菜单加载" class="headerlink" title="右键菜单加载"></a><strong>右键菜单加载</strong></h6><p>菜单的具体加载由 <code>order</code> 控制，可供使用的内容为：plugins.[组名], menus.[组名], hr, music 这四大类。</p><h6 id="右键菜单排序"><a href="#右键菜单排序" class="headerlink" title="右键菜单排序"></a><strong>右键菜单排序</strong></h6><p>菜单的排序由 <code>order</code> 字段的先后顺序和组内菜单项的先后顺序决定。</p><h6 id="右键菜单类"><a href="#右键菜单类" class="headerlink" title="右键菜单类"></a><strong>右键菜单类</strong></h6><p>菜单项共分为两大类：<code>plugins</code> 和 <code>menus</code>，前者放置内置组及内置菜单，允许添加&#x2F;修改组内菜单；后者为用户自建菜单类，允许添加&#x2F;修改组及组内菜单。一般意义上 plugins 类的组为动态组，根据实际的右键状态进行显示；menus 类中内容由用户添加，菜单项默认显示。</p><h6 id="右键菜单项"><a href="#右键菜单项" class="headerlink" title="右键菜单项"></a><strong>右键菜单项</strong></h6><p>菜单项共六个字段：<code>id</code>, <code>name</code>, <code>icon</code>, <code>link</code>, <code>event</code>, <code>group</code>，具体作用如下：</p><ul><li>id: 唯一值</li><li>name: 用于菜单名称显示</li><li>icon: 用于菜单图标显示</li><li>link: 跳转链接</li><li>event: 事件，当输入内容不为内置事件时，作 JavaScript 代码执行</li><li>group: 菜单项所处分组名称</li></ul><div class="note info"><p>note link&#x2F;event 二选一，同时出现时仅处理 link。</p></div><h5 id="内置功能"><a href="#内置功能" class="headerlink" title="内置功能"></a>内置功能</h5><h6 id="内置组"><a href="#内置组" class="headerlink" title="内置组"></a><strong>内置组</strong></h6><table><thead><tr><th>组名</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td><em>navigation</em></td><td><em>导航组件，横向排列，共用一行，仅显示图标</em></td><td><em>原则上支持的数量不限</em></td></tr><tr><td><em>inputBox</em></td><td><em>文本输入框相关组件</em></td><td><em>生效于 input&#x2F;textarea</em></td></tr><tr><td><em>seletctText</em></td><td><em>文本选中类组件</em></td><td><em>生效于右键选中文本，<strong>text</strong> 为选中的文本</em></td></tr><tr><td><em>elementCheck</em></td><td><em>链接判断组件</em></td><td><em>生效于链接处的右键行为，<strong>link</strong> 为链接地址</em></td></tr><tr><td><em>elementImage</em></td><td><em>图片判断类组件</em></td><td><em>生效于图片类的右键行为，<strong>link</strong> 为链接地址</em></td></tr><tr><td><em>articlePage</em></td><td><em>文章页面组件</em></td><td><em>生效于 post.article 页面</em></td></tr></tbody></table><div class="note info"><p>note 除 navigation 外的内置组，在显示时会隐藏含 link 属性的菜单项。</p></div><h6 id="内置实现"><a href="#内置实现" class="headerlink" title="内置实现"></a><strong>内置实现</strong></h6><table><thead><tr><th>事件名</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td><em>copyText</em></td><td>复制文本</td><td>复制选中文本</td></tr><tr><td><em>copyLink</em></td><td>复制链接地址</td><td>复制 <code>a</code> 或 <code>image</code> 下的链接至剪切板</td></tr><tr><td><em>copyPaste</em></td><td>粘贴文本</td><td>需要用户批准相应权限，仅支持粘贴文本至输入框（暂不支持粘贴图片）</td></tr><tr><td><em>copyAll</em></td><td>全选文本</td><td>选中输入框内的文本内容</td></tr><tr><td><em>copyCut</em></td><td>剪切文本</td><td>剪切输入框中选中的文本内容</td></tr><tr><td><em>copyImg</em></td><td>复制图片</td><td>支持 Chrome 浏览器，复制图片资源至剪切板</td></tr><tr><td><em>printMode</em></td><td>打印页面</td><td>一个调制过样式的打印功能</td></tr><tr><td><em>readMode</em></td><td>阅读模式</td><td>一个简单的阅读模式功能</td></tr></tbody></table><h5 id="默认设置"><a href="#默认设置" class="headerlink" title="默认设置"></a>默认设置</h5><h6 id="iconPrefix"><a href="#iconPrefix" class="headerlink" title="iconPrefix"></a><strong>iconPrefix<String></strong></h6><p>Fontawesome 图标前缀，音乐类组件使用，参考内容：<em>fa-solid, fa-regular, fa-light, fa-thin, fa-duotone, fa-brands</em>。</p><h6 id="articleShowLink"><a href="#articleShowLink" class="headerlink" title="articleShowLink"></a><strong>articleShowLink<Boolean></strong></h6><p>在 articlePage 组显示时（文章页）时依旧显示含 link 属性的菜单项。</p><h6 id="musicAlwaysShow"><a href="#musicAlwaysShow" class="headerlink" title="musicAlwaysShow"></a><strong>musicAlwaysShow<Boolean></strong></h6><p>当设定全局音乐播放器时，是否一直显示音乐控制菜单。false：仅当音乐播放时启用。</p><h6 id="corsAnywhere"><a href="#corsAnywhere" class="headerlink" title="corsAnywhere"></a><strong>corsAnywhere<String></strong></h6><p>适用于复制图片文件的场景，当图片源未设置 Access-Control-Allow-Origin 时，图片复制由于 CORS 问题失败。</p><p>你可以自行部署相应项目解决该问题，详见：<a href="https://github.com/Rob--W/cors-anywhere">Rob–W&#x2F;cors-anywhere</a> 或者 <a href="https://github.com/Zibri/cloudflare-cors-anywhere">Zibri&#x2F;cloudflare-cors-anywhere</a>。</p><h5 id="回调方法"><a href="#回调方法" class="headerlink" title="回调方法"></a>回调方法</h5><p><strong><code>volantis.rightmenu.handle</code></strong> 在右键菜单打开时执行。</p><p>volantis.rightmenu.handle(callBack[,”callBackName”, “setRequestAnimationFrame &#x3D; true”])。</p><p>此外，你还可以在 <code>volantis.mouseEvent</code> 处获得 MouseEvent 信息。</p><h5 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h5><details ><summary> blog/_config.volantis.yml </summary>              <div class='content'>              <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 自定义右键 新</span></span><br><span class="line"><span class="attr">rightmenus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 右键菜单项及加载顺序</span></span><br><span class="line">  <span class="comment"># 内容示例：plugins.[组名], menus.[组名], hr(分割线，推荐去线留白), music(音乐控制器)</span></span><br><span class="line">  <span class="attr">order:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">plugins.navigation</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">hr</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">plugins.inputBox</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">plugins.seletctText</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">plugins.elementCheck</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">plugins.elementImage</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">menus.link</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">hr</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">menus.darkMode</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">plugins.articlePage</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">music</span></span><br><span class="line">  <span class="comment">############################</span></span><br><span class="line">  <span class="comment"># - &#123;id: &#x27;&#x27;, name: &#x27;&#x27;, icon: &#x27;&#x27;, link: &#x27;&#x27;, event: &#x27;&#x27;, group: &#x27;&#x27;&#125;</span></span><br><span class="line">  <span class="comment"># id: 唯一值</span></span><br><span class="line">  <span class="comment"># name: 用于菜单名称显示</span></span><br><span class="line">  <span class="comment"># icon: 用于菜单图标显示</span></span><br><span class="line">  <span class="comment"># link: 跳转链接</span></span><br><span class="line">  <span class="comment"># event: 事件，当输入内容不为内置事件时，作 JavaScript 代码执行</span></span><br><span class="line">  <span class="comment"># group: 菜单项所处分组名称</span></span><br><span class="line">  <span class="comment"># 注： </span></span><br><span class="line">  <span class="comment"># 1. link/event 二选一，同时出现时仅处理 link</span></span><br><span class="line">  <span class="comment"># 2. 内置事件列表： copyText, copyLink, copyPaste, copyAll, copyCut, copyImg, printMode, readMode</span></span><br><span class="line">  <span class="comment"># 3. 内置组列表：navigation, inputBox, seletctText, elementCheck, elementImage, articlePage</span></span><br><span class="line">  <span class="comment"># 4. plugins 列允许自定义组内项目</span></span><br><span class="line">  <span class="comment"># 5. menus   列允许自定义组及其内容</span></span><br><span class="line">  <span class="comment"># 6. 除 navigation 外的内置组，在显示时会隐藏含 link 属性的菜单项</span></span><br><span class="line">  <span class="comment">###########################</span></span><br><span class="line">  <span class="comment"># 基础项设置</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="comment"># 图标前缀 fa-solid, fa-regular, fa-light, fa-thin, fa-duotone, fa-brands</span></span><br><span class="line">    <span class="attr">iconPrefix:</span> <span class="string">fa-solid</span></span><br><span class="line">    <span class="comment"># 例外，在 articlePage 组显示时（文章页）时依旧显示含 link 属性的菜单项</span></span><br><span class="line">    <span class="attr">articleShowLink:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># 当设定全局音乐播放器时，是否一直显示音乐控制菜单。false：仅当音乐播放时启用</span></span><br><span class="line">    <span class="attr">musicAlwaysShow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># 适用于复制图片文件的场景，当图片源未设置 Access-Control-Allow-Origin 时，图片复制由于 CORS 问题失败</span></span><br><span class="line">    <span class="comment"># 你可以自行部署相应项目解决该问题，详见：https://github.com/Rob--W/cors-anywhere 或者 https://github.com/Zibri/cloudflare-cors-anywhere</span></span><br><span class="line">    <span class="attr">corsAnywhere:</span> </span><br><span class="line">  <span class="comment"># 右键内置组，预置实现</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="comment"># 导航组件</span></span><br><span class="line">    <span class="comment"># 横向排列，共用一行，仅显示图标 (原则上支持的数量不限)</span></span><br><span class="line">    <span class="attr">navigation:</span> </span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;left&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;转到上一页&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-arrow-left&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;history.back()&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;navigation&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;right&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;转到下一页&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-arrow-right&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;history.forward()&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;navigation&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;redo&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;刷新当前页面&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-redo&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;window.location.reload()&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;navigation&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;up&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;回到顶部&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-arrow-up&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;VolantisApp.scrolltoElement(volantis.dom.bodyAnchor)&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;navigation&#x27;</span>&#125;</span><br><span class="line">      <span class="comment">#- &#123;id: &#x27;home&#x27;, name: &#x27;回到首页&#x27;, icon: &#x27;fa-solid fa-home&#x27;, link: &#x27;/&#x27;, group: &#x27;navigation&#x27;&#125;</span></span><br><span class="line">    <span class="comment"># 文本输入框相关组件</span></span><br><span class="line">    <span class="comment"># 生效于 input/textarea，粘贴、剪切、全选</span></span><br><span class="line">    <span class="attr">inputBox:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;copyPaste&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;粘贴文本&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-paste&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;copyPaste&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;inputBox&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;copyAll&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;全选文本&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-object-ungroup&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;copyAll&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;inputBox&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;copyCut&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;剪切文本&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-cut&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;copyCut&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;inputBox&#x27;</span>&#125;</span><br><span class="line">    <span class="comment"># 文本选中类组件</span></span><br><span class="line">    <span class="comment"># 生效于右键选中文本，__text__ 为选中的文本。     </span></span><br><span class="line">    <span class="attr">seletctText:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;copyText&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;复制文本&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-copy&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;copyText&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;seletctText&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;searchWord&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;站内搜索&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-search&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;OpenSearch(__text__)&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;seletctText&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;bingSearch&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;必应搜索&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-search&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;window.open(`https://cn.bing.com/search?q=$&#123;__text__&#125;`)&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;seletctText&#x27;</span>&#125;</span><br><span class="line">      <span class="comment">#- &#123;id: &#x27;googleSearch&#x27;, name: &#x27;谷歌搜索&#x27;, icon: &#x27;fa-solid fa-search&#x27;, event: &#x27;window.open(`https://www.google.com/search?q=$&#123;__text__&#125;`)&#x27;, group: &#x27;seletctText&#x27;&#125;</span></span><br><span class="line">    <span class="comment"># 链接判断组件</span></span><br><span class="line">    <span class="comment"># 生效于链接处的右键行为，__link__ 为链接地址</span></span><br><span class="line">    <span class="attr">elementCheck:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;openTab&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;新标签页打开&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-external-link-square-alt&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;window.open(__link__)&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;elementCheck&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;copyLink&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;复制链接地址&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-link&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;copyLink&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;elementCheck&#x27;</span>&#125;</span><br><span class="line">    <span class="comment"># 图片判断类组件</span></span><br><span class="line">    <span class="comment"># 生效于图片类的右键行为，__link__ 为链接地址</span></span><br><span class="line">    <span class="attr">elementImage:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;copyImg&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;复制图片&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-image&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;copyImg&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;elementImage&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;googleImg&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;谷歌识图&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-images&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;window.open(`https://www.google.com.hk/searchbyimage?image_url=$&#123;__link__&#125;`)&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;elementImage&#x27;</span>&#125;</span><br><span class="line">    <span class="comment"># 文章页面组件</span></span><br><span class="line">    <span class="comment"># 生效于 post.article 页面</span></span><br><span class="line">    <span class="attr">articlePage:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;printMode&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;打印页面&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-print&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;printMode&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;articlePage&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;readMode&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;阅读模式&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-book-open&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;readMode&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;articlePage&#x27;</span>&#125;</span><br><span class="line">  <span class="comment"># 右键自定义菜单区域</span></span><br><span class="line">  <span class="attr">menus:</span></span><br><span class="line">    <span class="attr">link:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;help&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;常见问题&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-question&#x27;</span>, <span class="attr">link:</span> <span class="string">&#x27;https://volantis.js.org/faqs/&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;link&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;examples&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;示例博客&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-rss&#x27;</span>, <span class="attr">link:</span> <span class="string">&#x27;https://volantis.js.org/examples/&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;link&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;contributors&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;加入社区&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-fan&#x27;</span>, <span class="attr">link:</span> <span class="string">&#x27;https://volantis.js.org/contributors/&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;link&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> <span class="string">hr</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;source_docs&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;本站源码&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-code-branch&#x27;</span>, <span class="attr">link:</span> <span class="string">&#x27;https://github.com/volantis-x/volantis-docs/&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;link&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;source_theme&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;主题源码&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-code-branch&#x27;</span>, <span class="attr">link:</span> <span class="string">&#x27;https://github.com/volantis-x/hexo-theme-volantis/&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;link&#x27;</span>&#125;</span><br><span class="line">    <span class="attr">darkMode:</span> </span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;darkMode&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;暗黑模式&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-moon&#x27;</span>, <span class="attr">event:</span> <span class="string">&#x27;volantis.dark.toggle()&#x27;</span>, <span class="attr">group:</span> <span class="string">&#x27;darkMode&#x27;</span>&#125;</span><br><span class="line"><span class="comment">###</span></span><br></pre></td></tr></table></figure>              </div>            </details><h5 id="高级玩法"><a href="#高级玩法" class="headerlink" title="高级玩法"></a>高级玩法</h5><p>可以利用 <em>Custom Files 自定义文件</em> 功能，实现自定义右键菜单脚本及菜单项控制。</p><ul><li>一个在右键菜单中添加 <strong>查看上一篇</strong>、<strong>查看下一篇</strong> 菜单项的范例：</li></ul><div class="tabs" id="tab-rightmenus"><ul class="nav-tabs"><li class="tab active"><a class="#rightmenus-1">blog/_config.volantis.yml</a></li><li class="tab"><a class="#rightmenus-2">blog/source/_volantis/bodyEnd.ejs</a></li></ul><div class="tab-content"><div class="tab-pane active" id="rightmenus-1"><figure class="highlight yml"><figcaption><span>省略了部分不相关内容</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rightmenus:</span></span><br><span class="line">  <span class="attr">order:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">menus.prevNext</span></span><br><span class="line">  <span class="attr">menus:</span></span><br><span class="line">    <span class="attr">prevNext:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;prev&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;查看上一篇&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-angles-left&#x27;</span>, <span class="attr">event:</span> <span class="string">&quot;volantis.rightmenu.jump(&#x27;prev&#x27;)&quot;</span>, <span class="attr">group:</span> <span class="string">&#x27;prevNext&#x27;</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">id:</span> <span class="string">&#x27;next&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;查看下一篇&#x27;</span>, <span class="attr">icon:</span> <span class="string">&#x27;fa-solid fa-angles-right&#x27;</span>, <span class="attr">event:</span> <span class="string">&quot;volantis.rightmenu.jump(&#x27;next&#x27;)&quot;</span>, <span class="attr">group:</span> <span class="string">&#x27;prevNext&#x27;</span>&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="rightmenus-2"><figure class="highlight js"><figcaption><span>为了方便管理，将函数挂在 volantis.rightmenu 对象下</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt; </span><br><span class="line">  volantis.<span class="property">rightmenu</span>.<span class="property">jump</span> = <span class="function">(<span class="params">type</span>) =&gt;</span> &#123; </span><br><span class="line">    <span class="keyword">const</span> selector = type === <span class="string">&#x27;prev&#x27;</span> ? <span class="string">&#x27;article .prev-next a.prev&#x27;</span> : <span class="string">&#x27;article .prev-next a.next&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> item = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(selector); </span><br><span class="line">    <span class="keyword">if</span>(!!item) &#123; </span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">typeof</span> pjax !== <span class="string">&#x27;undefined&#x27;</span>) &#123; </span><br><span class="line">        pjax.<span class="title function_">loadUrl</span>(item.<span class="property">href</span>) </span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = item.<span class="property">href</span>; </span><br><span class="line">      &#125; </span><br><span class="line">    &#125; </span><br><span class="line">  &#125; </span><br><span class="line"> </span><br><span class="line">  volantis.<span class="property">rightmenu</span>.<span class="title function_">handle</span>(<span class="function">() =&gt;</span> &#123; </span><br><span class="line">    <span class="keyword">const</span> prev = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#prev&#x27;</span>).<span class="property">parentElement</span>, </span><br><span class="line">      next = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#next&#x27;</span>).<span class="property">parentElement</span>, </span><br><span class="line">      articlePrev = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;article .prev-next a.prev p.title&#x27;</span>), </span><br><span class="line">      articleNext = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;article .prev-next a.next p.title&#x27;</span>); </span><br><span class="line"> </span><br><span class="line">    prev.<span class="property">style</span>.<span class="property">display</span> = articlePrev ? <span class="string">&#x27;block&#x27;</span> : <span class="string">&#x27;none&#x27;</span>; </span><br><span class="line">    prev.<span class="property">title</span> = articlePrev ? articlePrev.<span class="property">innerText</span> : <span class="literal">null</span>; </span><br><span class="line">    next.<span class="property">style</span>.<span class="property">display</span> = articleNext ? <span class="string">&#x27;block&#x27;</span> : <span class="string">&#x27;none&#x27;</span>; </span><br><span class="line">    next.<span class="property">title</span> = articleNext ? articleNext.<span class="property">innerText</span> : <span class="literal">null</span>; </span><br><span class="line">  &#125;, <span class="string">&#x27;prevNext&#x27;</span>, <span class="literal">false</span>) </span><br><span class="line">&lt;/script&gt; </span><br></pre></td></tr></table></figure></div></div></div><h4 id="老版右键菜单"><a href="#老版右键菜单" class="headerlink" title="老版右键菜单"></a>老版右键菜单</h4><p>目前老版右键与新版右键共存，但同时只能开启一个自定义右键菜单。</p><h5 id="配置文件-1"><a href="#配置文件-1" class="headerlink" title="配置文件"></a>配置文件</h5><details ><summary> blog/_config.volantis.yml </summary>              <div class='content'>              <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义右键菜单</span></span><br><span class="line"><span class="attr">rightmenu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">faicon:</span> <span class="string">fa</span>              <span class="comment"># 公共图标类型 fa fal fa-solid fa-duotone</span></span><br><span class="line">  <span class="comment"># hr: 分割线, music: 音乐控制器</span></span><br><span class="line">  <span class="attr">layout:</span> [<span class="string">home</span>, <span class="string">hr</span>, <span class="string">help</span>, <span class="string">examples</span>, <span class="string">contributors</span>, <span class="string">hr</span>, <span class="string">source_docs</span>, <span class="string">source_theme</span>, <span class="string">hr</span>, <span class="string">print</span>, <span class="string">darkmode</span>, <span class="string">reading</span>, <span class="string">music</span>]</span><br><span class="line">  <span class="comment">### 可选功能项 ###</span></span><br><span class="line">  <span class="attr">print:</span>                  <span class="comment"># 只有文章页才允许自定义打印</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">打印页面</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-print</span></span><br><span class="line">  <span class="attr">darkmode:</span>        <span class="comment"># 需开启 plugins.darkmodejs</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">暗黑模式</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-moon</span></span><br><span class="line">  <span class="attr">reading:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">阅读模式</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-book-open</span></span><br><span class="line">  <span class="attr">customPicUrl:</span>    <span class="comment"># 右键的图片复制：只有 Chrome 支持，且只支持 PNG 格式的图片。</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span>  <span class="comment"># 如果使用了对象存储且开启了自适应 Webp，那么可以提供额外的链接用以替换图片的访问地址</span></span><br><span class="line">    <span class="attr">old:</span> <span class="comment">#https://static.inkss.cn/img/article/</span></span><br><span class="line">    <span class="attr">new:</span> <span class="comment">#https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@master/img/article/</span></span><br><span class="line">  <span class="attr">music:</span>           <span class="comment"># 当设定全局音乐播放器时，是否一直显示音乐控制菜单。false：仅当音乐播放时启用</span></span><br><span class="line">    <span class="attr">alwaysShow:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">### 自定义菜单 ###</span></span><br><span class="line">  <span class="attr">help:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">常见问题</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-question</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://volantis.js.org/faqs/</span></span><br><span class="line">  <span class="attr">examples:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">示例博客</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-rss</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://volantis.js.org/examples/</span></span><br><span class="line">  <span class="attr">contributors:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">加入社区</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-fan</span> <span class="string">fa-spin</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://volantis.js.org/contributors/</span></span><br><span class="line">  <span class="attr">source_docs:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">本站源码</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-code-branch</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/volantis-docs/</span></span><br><span class="line">  <span class="attr">source_theme:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">主题源码</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-code-branch</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/hexo-theme-volantis/</span></span><br><span class="line"><span class="comment">####</span></span><br></pre></td></tr></table></figure>              </div>            </details></div><div class="story post-story"><h2 id="设置网站导航栏"><a href="#设置网站导航栏" class="headerlink" title="设置网站导航栏"></a>设置网站导航栏</h2><h3 id="导航栏配置"><a href="#导航栏配置" class="headerlink" title="导航栏配置"></a>导航栏配置</h3><p>导航栏分为 logo、menu、search 三个区域设置，其中 logo 区域如果设置了图片，则不能显示图标和标题， menu 区域的设置可以写在一个单独的文件中。</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意事项：建议规范全站路径 URL 最后带一个 &quot;/&quot; 例如 &quot;about/&quot;</span></span><br><span class="line"><span class="attr">navbar:</span></span><br><span class="line">  <span class="attr">visiable:</span> <span class="string">auto</span> <span class="comment"># always, auto</span></span><br><span class="line">  <span class="attr">logo:</span> <span class="comment"># choose [img] or [icon + title]</span></span><br><span class="line">    <span class="attr">img:</span> <span class="string">volantis-static/media/org.volantis/blog/Logo-NavBar@3x.png</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">title:</span></span><br><span class="line">  <span class="attr">menu:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">博客</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-rss</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">分类</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-folder-open</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">categories/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">标签</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-tags</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">tags/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">归档</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-archive</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">archives/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">友链</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-link</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">friends/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">关于</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-info-circle</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">about/</span></span><br><span class="line">  <span class="attr">search:</span> <span class="string">Search...</span>   <span class="comment"># Search bar placeholder</span></span><br></pre></td></tr></table></figure><h3 id="菜单嵌套"><a href="#菜单嵌套" class="headerlink" title="菜单嵌套"></a>菜单嵌套</h3><p>导航栏菜单支持嵌套，嵌套的属性名为 <code>rows</code> ，写法示例：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">更多</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-ellipsis-v</span></span><br><span class="line">  <span class="attr">rows:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">主题源码</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/hexo-theme-volantis/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">更新日志</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/hexo-theme-volantis/releases/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hr</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">有疑问？</span></span><br><span class="line">      <span class="attr">rows:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">看</span> <span class="string">FAQ</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">faqs/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">看</span> <span class="string">本站源码</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/volantis-docs/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">提</span> <span class="string">Issue</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/hexo-theme-volantis/issues/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hr</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">公告和测试博文</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">archives/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">示例博客</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">examples/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">特别感谢</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">contributors/</span></span><br></pre></td></tr></table></figure><h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><p>在子菜单中，新增一个只有 <code>name: hr</code> 的“菜单”就会被渲染成一个分割线。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hr</span></span><br></pre></td></tr></table></figure><h3 id="小标题"><a href="#小标题" class="headerlink" title="小标题"></a>小标题</h3><p>在子菜单中，新增一个只有 <code>name: 小标题内容</code>（也可以有 <code>icon: 小标题的图标</code>）的“菜单”就会被渲染成一个小标题。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">近期</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-clock</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">  <span class="attr">rows:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">热门文章</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-fire</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ProHUD</span> <span class="string">开源库的设计思路</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">blog/2019-08-27-prohud/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ValueX：实用的安全对象类型转换库</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">blog/2019-08-29-valuex/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">心率管家</span> <span class="string">App</span> <span class="string">的设计与开发</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">blog/2019-07-23-heartmate/</span></span><br></pre></td></tr></table></figure><h3 id="播放器"><a href="#播放器" class="headerlink" title="播放器"></a>播放器</h3><p>在子菜单中，新增一个 <code>icon: fa-solid fa-compact-disc</code> 的“菜单”就会被渲染成一个 APlayer 播放器。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">背景音乐</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-compact-disc</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="设置网站页脚"><a href="#设置网站页脚" class="headerlink" title="设置网站页脚"></a>设置网站页脚</h2><p>您通过 <code>layout</code> 可以自由布局网站页脚内容 <code>aplayer</code>, <code>social</code>, <code>license</code>, <code>info</code>, <code>copyright</code>。</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">site_footer:</span></span><br><span class="line">  <span class="comment"># layout of footer: [aplayer, social, license, info, copyright]</span></span><br><span class="line">  <span class="attr">layout:</span> [<span class="string">aplayer</span>, <span class="string">social</span>, <span class="string">license</span>, <span class="string">info</span>, <span class="string">copyright</span>]</span><br><span class="line">  <span class="attr">social:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-rss</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">atom.xml</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-envelope</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">mailto:me@xaoxuu.com</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/xaoxuu</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-headphones-alt</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://music.163.com/#/user/home?id=63035382</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="string">&#x27;[Copyright © 2017-2021 XXX](/)&#x27;</span></span><br><span class="line">  <span class="comment"># You can add your own property here. (Support markdown, for example: br: &#x27;&lt;br&gt;&#x27;)</span></span><br><span class="line">  <span class="attr">br:</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span></span><br></pre></td></tr></table></figure><p>其中，<code>aplayer</code> 需要在插件部分设置中启用。您可以新增文字属性，用于展示其它文字信息，例如：</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">site_footer:</span></span><br><span class="line">  <span class="attr">layout:</span> [<span class="string">...</span>, <span class="string">br</span>, <span class="string">hello</span>, <span class="string">...</span>]</span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># You can add your own property here. (Support markdown, for example: br: &#x27;&lt;br&gt;&#x27;)</span></span><br><span class="line">  <span class="attr">br:</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span></span><br><span class="line">  <span class="attr">hello:</span> <span class="string">&#x27;[Hello World](/)&#x27;</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="网站与文章封面"><a href="#网站与文章封面" class="headerlink" title="网站与文章封面"></a>网站与文章封面</h2><h3 id="封面高度"><a href="#封面高度" class="headerlink" title="封面高度"></a>封面高度</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="attr">height_scheme:</span> <span class="string">full</span> <span class="comment"># full, half</span></span><br><span class="line">  <span class="string">...</span></span><br></pre></td></tr></table></figure><p>目前主题提供两种首页封面高度方案，其它页面均为半屏幕高度。</p><h3 id="封面布局方案"><a href="#封面布局方案" class="headerlink" title="封面布局方案"></a>封面布局方案</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">scheme:</span> <span class="string">dock</span> <span class="comment"># search (搜索), dock (坞), featured (精选), focus (焦点)</span></span><br><span class="line">  <span class="string">...</span></span><br></pre></td></tr></table></figure><div class="table"><table><thead><tr><th align="left">布局方案</th><th align="left">适合场景</th></tr></thead><tbody><tr><td align="left">search</td><td align="left">注重搜索</td></tr><tr><td align="left">dock</td><td align="left">入口选项比较多</td></tr><tr><td align="left">featured</td><td align="left">选项在4个左右</td></tr><tr><td align="left">focus</td><td align="left">选项在4个左右</td></tr></tbody></table></div><h3 id="默认显示设置"><a href="#默认显示设置" class="headerlink" title="默认显示设置"></a>默认显示设置</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">home:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">others:</span> <span class="literal">false</span> <span class="comment"># can be written in front-matter &#x27;cover: true&#x27;</span></span><br></pre></td></tr></table></figure><p>由于主页、归档是 hexo 自动生成的，您需要在主题配置文件中设置是否显示封面，而其它页面则可以在 <code>front-matter</code> 中通过设置 <code>cover: true/false</code> 来决定显示封面或者不显示封面。</p></div><div class="story post-story"><h2 id="文章布局配置"><a href="#文章布局配置" class="headerlink" title="文章布局配置"></a>文章布局配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文章布局</span></span><br><span class="line"><span class="attr">article:</span></span><br><span class="line">  <span class="comment"># 文章列表页面的文章卡片布局方案</span></span><br><span class="line">  <span class="attr">preview:</span></span><br><span class="line">    <span class="attr">scheme:</span> <span class="string">landscape</span> <span class="comment"># landscape</span></span><br><span class="line">    <span class="comment"># pin icon for post</span></span><br><span class="line">    <span class="attr">pin_icon:</span> <span class="string">https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4cc.svg</span></span><br><span class="line">    <span class="comment"># auto generate title if not exist</span></span><br><span class="line">    <span class="attr">auto_title:</span> <span class="literal">true</span> <span class="comment"># false, true</span></span><br><span class="line">    <span class="comment"># auto generate excerpt if not exist</span></span><br><span class="line">    <span class="attr">auto_excerpt:</span> <span class="literal">true</span> <span class="comment"># false, true</span></span><br><span class="line">    <span class="comment"># show split line or not</span></span><br><span class="line">    <span class="attr">line_style:</span> <span class="string">solid</span> <span class="comment"># hidden, solid, dashed, dotted</span></span><br><span class="line">    <span class="comment"># show readmore button</span></span><br><span class="line">    <span class="attr">readmore:</span> <span class="string">auto</span> <span class="comment"># auto, always</span></span><br><span class="line">  <span class="comment"># 文章详情页面的文章卡片本体布局方案</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">    <span class="comment"># 文章顶部信息</span></span><br><span class="line">    <span class="comment"># 从 meta_library 中取</span></span><br><span class="line">    <span class="attr">top_meta:</span> [<span class="string">author</span>, <span class="string">category</span>, <span class="string">date</span>, <span class="string">counter</span>]</span><br><span class="line">    <span class="comment"># ----------------</span></span><br><span class="line">    <span class="comment"># 文章页脚组件</span></span><br><span class="line">    <span class="attr">footer_widget:</span></span><br><span class="line">      <span class="comment"># ----------------</span></span><br><span class="line">      <span class="comment"># 参考资料、相关资料等 (for layout: post/docs)</span></span><br><span class="line">      <span class="attr">references:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">参考资料</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-quote-left</span></span><br><span class="line">        <span class="comment"># 在 front-matter 中:</span></span><br><span class="line">        <span class="comment">#   references:</span></span><br><span class="line">        <span class="comment">#     - title: 某篇文章</span></span><br><span class="line">        <span class="comment">#       url: https://</span></span><br><span class="line">        <span class="comment"># 即可显示此组件。</span></span><br><span class="line">      <span class="comment"># ----------------</span></span><br><span class="line">      <span class="comment"># 相关文章，需要安装插件 (for layout: post)</span></span><br><span class="line">      <span class="comment"># npm i hexo-related-popular-posts</span></span><br><span class="line">      <span class="attr">related_posts:</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">相关文章</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bookmark</span></span><br><span class="line">        <span class="attr">max_count:</span> <span class="number">5</span></span><br><span class="line">        <span class="comment"># 设为空则不使用文章头图</span></span><br><span class="line">        <span class="attr">placeholder_img:</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/046.jpg</span></span><br><span class="line">      <span class="comment"># ----------------</span></span><br><span class="line">      <span class="comment"># 版权声明组件 (for layout: post/docs)</span></span><br><span class="line">      <span class="attr">copyright:</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">permalink:</span> <span class="string">&#x27;本文永久链接是：&#x27;</span></span><br><span class="line">        <span class="attr">content:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">&#x27;博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议&#x27;</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">permalink</span></span><br><span class="line">      <span class="comment"># ----------------</span></span><br><span class="line">      <span class="comment"># 打赏组件 (for layout: post/docs)</span></span><br><span class="line">      <span class="attr">donate:</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">images:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/qrcode/github@volantis.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/qrcode/github@volantis.png</span></span><br><span class="line">    <span class="comment"># 文章底部信息</span></span><br><span class="line">    <span class="comment"># 从 meta_library 中取</span></span><br><span class="line">    <span class="attr">bottom_meta:</span> [<span class="string">updated</span>, <span class="string">tags</span>, <span class="string">share</span>]</span><br><span class="line">    <span class="comment"># meta library</span></span><br><span class="line">    <span class="attr">meta_library:</span></span><br><span class="line">      <span class="comment"># 默认文章作者（可在 front-matter 中覆盖）</span></span><br><span class="line">      <span class="attr">author:</span></span><br><span class="line">        <span class="attr">avatar:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">请设置文章作者</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">      <span class="comment"># 文章创建日期</span></span><br><span class="line">      <span class="attr">date:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-calendar-alt</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">&#x27;发布于：&#x27;</span></span><br><span class="line">        <span class="attr">format:</span> <span class="string">&#x27;ll&#x27;</span> <span class="comment"># 日期格式 http://momentjs.com/docs/</span></span><br><span class="line">      <span class="comment"># 文章更新日期</span></span><br><span class="line">      <span class="attr">updated:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-edit</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">&#x27;更新于：&#x27;</span></span><br><span class="line">        <span class="attr">format:</span> <span class="string">&#x27;ll&#x27;</span> <span class="comment"># 日期格式 http://momentjs.com/docs/</span></span><br><span class="line">      <span class="comment"># 文章分类</span></span><br><span class="line">      <span class="attr">category:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">      <span class="comment"># 文章浏览计数</span></span><br><span class="line">      <span class="attr">counter:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-eye</span></span><br><span class="line">        <span class="attr">unit:</span> <span class="string">&#x27;次浏览&#x27;</span></span><br><span class="line">      <span class="comment"># 文章字数和阅读时长</span></span><br><span class="line">      <span class="attr">wordcount:</span></span><br><span class="line">        <span class="attr">icon_wordcount:</span> <span class="string">fas</span> <span class="string">fa-keyboard</span></span><br><span class="line">        <span class="attr">icon_duration:</span> <span class="string">fas</span> <span class="string">fa-hourglass-half</span></span><br><span class="line">      <span class="comment"># 文章标签</span></span><br><span class="line">      <span class="attr">tags:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-hashtag</span></span><br><span class="line">      <span class="comment"># 分享</span></span><br><span class="line">      <span class="attr">share:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">qq</span></span><br><span class="line">          <span class="attr">img:</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qq.png</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">qzone</span></span><br><span class="line">          <span class="attr">img:</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qzone.png</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">weibo</span></span><br><span class="line">          <span class="attr">img:</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/weibo.png</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="comment"># qrcode # 当id为qrcode时需要安装插件  npm i hexo-helper-qrcode</span></span><br><span class="line">          <span class="attr">img:</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/wechat.png</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="comment"># telegram</span></span><br><span class="line">          <span class="attr">img:</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/telegram.png</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中 <code>top_meta</code> 和 <code>bottom_meta</code> 部分的取值自 <code>meta_library</code> 库。</p></div><div class="story post-story"><h2 id="侧边栏配置"><a href="#侧边栏配置" class="headerlink" title="侧边栏配置"></a>侧边栏配置</h2><p>侧边栏小组件与 meta 库不同的是：除了现有的 widget ，您可以很轻易地创建自己的 widget ，然后放在需要的地方。此外，您还可以将 widget 写在单独的文件中。</p><details ><summary> 查看所有相关配置 </summary>              <div class='content'>              <figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="comment"># 主页、分类、归档等独立页面</span></span><br><span class="line">  <span class="attr">for_page:</span> [<span class="string">blogger</span>, <span class="string">category</span>, <span class="string">tagcloud</span>, <span class="string">qrcode</span>]</span><br><span class="line">  <span class="comment"># layout: docs/post 这类文章页面</span></span><br><span class="line">  <span class="attr">for_post:</span> [<span class="string">toc</span>]</span><br><span class="line">  <span class="comment"># 侧边栏组件库</span></span><br><span class="line">  <span class="attr">widget_library:</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># blogger info widget</span></span><br><span class="line">    <span class="attr">blogger:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">blogger</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png</span></span><br><span class="line">      <span class="attr">shape:</span> <span class="string">rectangle</span> <span class="comment"># circle, rectangle</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/about/</span></span><br><span class="line">      <span class="attr">title:</span></span><br><span class="line">      <span class="attr">subtitle:</span></span><br><span class="line">      <span class="attr">jinrishici:</span> <span class="literal">true</span> <span class="comment"># Poetry Today. You can set a string, and it will be displayed when loading fails.</span></span><br><span class="line">      <span class="attr">social:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># toc widget (valid only in articles)</span></span><br><span class="line">    <span class="attr">toc:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">toc</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">header:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-list</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">本文目录</span></span><br><span class="line">      <span class="attr">list_number:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">min_depth:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">max_depth:</span> <span class="number">5</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># category widget</span></span><br><span class="line">    <span class="attr">category:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">category</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">header:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/blog/categories/</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># tagcloud widget</span></span><br><span class="line">    <span class="attr">tagcloud:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">tagcloud</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">header:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">热门标签</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/blog/tags/</span></span><br><span class="line">      <span class="attr">min_font:</span> <span class="number">14</span></span><br><span class="line">      <span class="attr">max_font:</span> <span class="number">24</span></span><br><span class="line">      <span class="attr">color:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">start_color:</span> <span class="string">&#x27;#999&#x27;</span></span><br><span class="line">      <span class="attr">end_color:</span> <span class="string">&#x27;#555&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># qrcode widget</span></span><br><span class="line">    <span class="attr">donate:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">qrcode</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">height:</span> <span class="string">64px</span>  <span class="comment"># Automatic height if not set</span></span><br><span class="line">      <span class="attr">images:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/qrcode/github@volantis.png</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/qrcode/github@volantis.png</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># webinfo widget</span></span><br><span class="line">    <span class="attr">webinfo:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">webinfo</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>]</span><br><span class="line">      <span class="attr">header:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-award</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">站点信息</span></span><br><span class="line">      <span class="attr">type:</span></span><br><span class="line">        <span class="attr">article:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">text:</span> <span class="string">&#x27;文章数目：&#x27;</span></span><br><span class="line">          <span class="attr">unit:</span> <span class="string">&#x27;篇&#x27;</span></span><br><span class="line">        <span class="attr">runtime:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">data:</span> <span class="string">&#x27;2020/01/01&#x27;</span>    <span class="comment"># 填写建站日期</span></span><br><span class="line">          <span class="attr">text:</span> <span class="string">&#x27;已运行时间：&#x27;</span></span><br><span class="line">          <span class="attr">unit:</span> <span class="string">&#x27;天&#x27;</span></span><br><span class="line">        <span class="attr">wordcount:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">text:</span> <span class="string">&#x27;本站总字数：&#x27;</span>   <span class="comment"># 需要启用 wordcount</span></span><br><span class="line">          <span class="attr">unit:</span> <span class="string">&#x27;字&#x27;</span></span><br><span class="line">        <span class="attr">visitcounter:</span></span><br><span class="line">          <span class="attr">siteuv:</span></span><br><span class="line">            <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">text:</span> <span class="string">&#x27;本站访客数：&#x27;</span></span><br><span class="line">            <span class="attr">unit:</span> <span class="string">&#x27;人&#x27;</span></span><br><span class="line">          <span class="attr">sitepv:</span></span><br><span class="line">            <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">text:</span> <span class="string">&#x27;本站总访问量：&#x27;</span></span><br><span class="line">            <span class="attr">unit:</span> <span class="string">&#x27;次&#x27;</span></span><br><span class="line">        <span class="attr">lastupd:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">friendlyShow:</span> <span class="literal">true</span>    <span class="comment"># 更友好的时间显示</span></span><br><span class="line">          <span class="attr">text:</span> <span class="string">&#x27;最后活动时间：&#x27;</span></span><br><span class="line">          <span class="attr">unit:</span> <span class="string">&#x27;日&#x27;</span></span><br></pre></td></tr></table></figure>              </div>            </details><p>每一个小部件都有 <code>class</code> 和 <code>display</code>，前者代表这个小部件是什么，后者代表这个小部件在什么桌面和移动平台中是否显示，如果在移动平台显示，由于屏幕宽度有限，侧边栏的小部件则会被移动到正文区域下方，因此部分侧边栏小部件便失去意义，建议设置为仅桌面端显示。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">小部件名:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">小部件类别</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">小部件在桌面端是否显示</span>, <span class="string">小部件在移动设备是否显示</span>]</span><br><span class="line">  <span class="attr">pjaxReload:</span> <span class="literal">true</span> <span class="comment"># 是否 pjax 重载 默认 true; 设置为 false 时 确保所有页面都含有该小部件</span></span><br></pre></td></tr></table></figure><h3 id="博主信息部件"><a href="#博主信息部件" class="headerlink" title="博主信息部件"></a>博主信息部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">blogger:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">blogger</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png</span></span><br><span class="line">  <span class="attr">title:</span></span><br><span class="line">  <span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">jinrishici:</span> <span class="literal">true</span> <span class="comment"># Poetry Today. You can set a string, and it will be displayed when loading fails.</span></span><br><span class="line">  <span class="attr">social:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>其中，今日诗词 <code>jinrishici</code> 如果设置为一个字符串，这个字符串会变成占位文字，加载失败时显示。如果不需要，就请设置为 <code>jinrishici: false</code>。<code>social</code> 的具体内容请在网站页脚部分设置。</p><h3 id="文章目录部件"><a href="#文章目录部件" class="headerlink" title="文章目录部件"></a>文章目录部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">toc</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">header:</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-list</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">本文目录</span></span><br><span class="line">  <span class="attr">list_number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">min_depth:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><p>这个部件只能放置在侧边栏，并且在文章中有效。在移动设备中预览时，手指向上滑动时，导航栏右边会出现 TOC 按钮，点击即可展开 TOC 部件。如果您需要显示章节序号，请设置 <code>list_number</code>。 <code>min_depth</code> 和 <code>max_depth</code> 代表 TOC 支持的标题层级，最大范围是2～6。</p><h3 id="文章分类部件"><a href="#文章分类部件" class="headerlink" title="文章分类部件"></a>文章分类部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">category:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">category</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">header:</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/blog/categories/</span></span><br></pre></td></tr></table></figure><p>这个部件可以直接显示所有文章分类，如果您希望有一个独立的页面来展示，需要自己创建一个文件，具体操作在「页面」部分文档中。</p><h3 id="标签云部件"><a href="#标签云部件" class="headerlink" title="标签云部件"></a>标签云部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tagcloud:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">tagcloud</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">header:</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">热门标签</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/blog/tags/</span></span><br><span class="line">  <span class="attr">min_font:</span> <span class="number">14</span></span><br><span class="line">  <span class="attr">max_font:</span> <span class="number">24</span></span><br><span class="line">  <span class="attr">color:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">start_color:</span> <span class="string">&#x27;#999&#x27;</span></span><br><span class="line">  <span class="attr">end_color:</span> <span class="string">&#x27;#555&#x27;</span></span><br></pre></td></tr></table></figure><p>这个部件可以直接显示所有文章的标签，如果您希望有一个独立的页面来展示，需要自己创建一个文件，具体操作在「页面」部分文档中。</p><h3 id="二维码部件"><a href="#二维码部件" class="headerlink" title="二维码部件"></a>二维码部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">donate:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">qrcode</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">64px</span>  <span class="comment"># Automatic height if not set</span></span><br><span class="line">  <span class="attr">images:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/qrcode/github@volantis.png</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/qrcode/github@volantis.png</span></span><br></pre></td></tr></table></figure><p>您可以放置在文章页脚用于展示打赏图片，也可以放置在侧边栏。</p><h3 id="通用文本部件"><a href="#通用文本部件" class="headerlink" title="通用文本部件"></a>通用文本部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">repos:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">text</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">header:</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">点个赞吧</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://github.com/xaoxuu/</span></span><br><span class="line">  <span class="attr">content:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;您的赞对我来说很重要，如果您喜欢本主题，希望能够给下面的项目点个赞来支持一下。&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;[&lt;img src=&quot;https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/proj/prohud/logo.png&quot; height=&quot;50px&quot;&gt;](https://github.com/xaoxuu/ProHUD)&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;[&lt;img src=&quot;https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/proj/valuex/logo.png&quot; height=&quot;50px&quot;&gt;](https://github.com/xaoxuu/ValueX)&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;[&lt;img src=&quot;https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/proj/inspire/logo.png&quot; height=&quot;50px&quot;&gt;](https://github.com/xaoxuu/Inspire)&#x27;</span></span><br></pre></td></tr></table></figure><p>您可以创建用于展示任何文本内容的文本部件。</p><h3 id="通用列表部件"><a href="#通用列表部件" class="headerlink" title="通用列表部件"></a>通用列表部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wiki-hexo-theme:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">list</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">header:</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-chevron-left</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">Hexo</span> <span class="string">Themes</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/wiki/</span></span><br><span class="line">  <span class="attr">rows:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Volantis</span> <span class="string">for</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/wiki/volantis/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Resume</span> <span class="string">for</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/wiki/resume/</span></span><br></pre></td></tr></table></figure><p>您可以创建用于展示任何链接列表的列表部件。列表的 <code>rows</code> 中的每一项支持的属性有： <code>name</code>、<code>url</code>、<code>icon</code>、<code>img</code>、<code>avatar</code>，其中 <code>img</code> 是方形图片的链接，<code>avatar</code> 是圆形图片的链接。</p><h4 id="组索引"><a href="#组索引" class="headerlink" title="组索引"></a>组索引</h4><p>这个部件的布局继承自 list 部件，用于展示文章所属的分组的文章列表。请将您的 Volantis 升级至 <u>2.5</u> 版本以上使用。</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">group-1:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">group</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">header:</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">Git</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/wiki/git/</span></span><br></pre></td></tr></table></figure><p>在文章的 front-matter 中设置：</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">group:</span> <span class="string">group-1</span></span><br><span class="line"><span class="attr">order:</span> <span class="number">16</span></span><br><span class="line"><span class="attr">sidebar:</span> [<span class="string">group-1</span>, <span class="string">toc</span>]</span><br></pre></td></tr></table></figure><p>「group-1」卡片将会以列表的形式显示所有设置了 <code>group: group-1</code> 的文章，顺序按照 <code>order</code> 从小到大排列。</p><h3 id="通用网格部件"><a href="#通用网格部件" class="headerlink" title="通用网格部件"></a>通用网格部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feedback:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">grid</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>]</span><br><span class="line">  <span class="attr">header:</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-headset</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">联系开发者</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/hexo-theme-volantis</span></span><br><span class="line">  <span class="attr">fixed:</span> <span class="literal">true</span> <span class="comment"># 固定宽度</span></span><br><span class="line">  <span class="attr">rows:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">反馈BUG</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bug</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/hexo-theme-volantis/issues/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">疑问求助</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-question-circle</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/hexo-theme-volantis/issues/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">提个建议</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-lightbulb</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/volantis-x/hexo-theme-volantis/issues/</span></span><br></pre></td></tr></table></figure><p>您可以创建用于展示任何链接列表的网格部件。网格默认根据文字长度自动确定每一个格子的宽度，如果文字长短不一，建议通过设置 <code>fixed: true</code> 来固定宽度，此时文字过长的格子中的文字会换行显示。</p><h3 id="通用页面部件"><a href="#通用页面部件" class="headerlink" title="通用页面部件"></a>通用页面部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">page</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>]</span><br><span class="line">  <span class="attr">pid:</span> <span class="string">haha</span></span><br><span class="line">  <span class="attr">content:</span> <span class="string">excerpt</span> <span class="comment"># excerpt, more, content</span></span><br></pre></td></tr></table></figure><p>您可以把整个页面的md内容作为一个小部件渲染显示出来。只需要设置小部件里的 <code>pid</code> 属性和文章的 <code>front-matter</code> 中设置一样的 <code>pid</code> 即可。 <code>content</code> 代表这个部件显示的内容，可选 <code>excerpt</code>，<code>more</code>，<code>content</code> 分别对应文章的摘要、摘要后面的内容、全文。</p><h3 id="音乐部件"><a href="#音乐部件" class="headerlink" title="音乐部件"></a>音乐部件</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">music:</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">music</span></span><br><span class="line">  <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">  <span class="attr">pjaxReload:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="选择评论系统"><a href="#选择评论系统" class="headerlink" title="选择评论系统"></a>选择评论系统</h2><p>目前共支持 14 款评论系统：</p><p>artalk, giscus, beaudar, utterances, twikoo, waline, discuss, disqus, disqusjs, gitalk, vssue, livere, isso, hashover</p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&lt;i</span> <span class="string">class=&#x27;fas</span> <span class="string">fa-comments&#x27;&gt;&lt;/i&gt;</span> <span class="string">评论</span></span><br><span class="line">  <span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">giscus</span></span><br></pre></td></tr></table></figure><hr><details cyan><summary> GitHub Discussions 系列 </summary>              <div class='content'>              <div class="tabs" id="tab-comments-github-discussions-"><ul class="nav-tabs"><li class="tab active"><a class="#comments-github-discussions--1">giscus</a></li></ul><div class="tab-content"><div class="tab-pane active" id="comments-github-discussions--1"><p><i class='fas fa-comment-dots fa-fw'></i> A comments system powered by GitHub Discussions.<br><i class='fas fa-globe fa-fw'></i> <a href="https://giscus.app/">https://giscus.app/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">giscus</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># giscus</span></span><br><span class="line">  <span class="comment"># https://giscus.app</span></span><br><span class="line">  <span class="comment"># https://github.com/laymonage/giscus</span></span><br><span class="line">  <span class="attr">giscus:</span></span><br><span class="line">    <span class="comment"># 以下配置按照 yml 格式增删填写即可</span></span><br><span class="line">    <span class="comment"># repo: xxx/xxx</span></span><br><span class="line">    <span class="comment"># repo-id: xxx</span></span><br><span class="line">    <span class="comment"># category: xxx</span></span><br><span class="line">    <span class="comment"># category-id: xxx</span></span><br><span class="line">    <span class="comment"># mapping: &quot;pathname&quot;</span></span><br><span class="line">    <span class="comment"># reactions-enabled: &quot;1&quot;</span></span><br><span class="line">    <span class="comment"># emit-metadata: &quot;0&quot;</span></span><br><span class="line">    <span class="comment"># lang: &quot;zh-CN&quot;</span></span><br><span class="line">    <span class="comment"># 以上配置按照 yml 格式增删填写即可</span></span><br><span class="line">    <span class="attr">theme:</span></span><br><span class="line">      <span class="attr">light:</span> <span class="string">&quot;light&quot;</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/css/giscus/light.css</span></span><br><span class="line">      <span class="attr">dark:</span> <span class="string">&quot;dark&quot;</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/css/giscus/dark.css</span></span><br></pre></td></tr></table></figure></div></div></div>              </div>            </details><details green><summary> GitHub Issues 系列 </summary>              <div class='content'>              <div class="tabs" id="tab-comments-github-issues-"><ul class="nav-tabs"><li class="tab active"><a class="#comments-github-issues--1">beaudar</a></li><li class="tab"><a class="#comments-github-issues--2">utterances</a></li><li class="tab"><a class="#comments-github-issues--3">Vssue</a></li><li class="tab"><a class="#comments-github-issues--4">Gitalk</a></li></ul><div class="tab-content"><div class="tab-pane active" id="comments-github-issues--1"><p><i class='fas fa-comment-dots fa-fw'></i> Beaudar 名称源于粤语“表达”的发音，是 Utterances 的中文版本。<br><i class='fas fa-globe fa-fw'></i> <a href="https://beaudar.lipk.org/">https://beaudar.lipk.org/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">beaudar</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># beaudar</span></span><br><span class="line">  <span class="comment"># https://beaudar.lipk.org/</span></span><br><span class="line">  <span class="attr">beaudar:</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">xxx/xxx</span></span><br><span class="line">    <span class="attr">issue-term:</span> <span class="string">pathname</span></span><br><span class="line">    <span class="attr">issue-number:</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">top</span></span><br><span class="line">    <span class="attr">order:</span> <span class="string">desc</span></span><br><span class="line">    <span class="attr">theme:</span></span><br><span class="line">      <span class="attr">light:</span> <span class="string">github-light</span></span><br><span class="line">      <span class="attr">dark:</span> <span class="string">github-dark</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">✨💬✨</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-github-issues--2"><p><i class='fas fa-comment-dots fa-fw'></i> A lightweight comments widget built on GitHub issues.<br><i class='fas fa-globe fa-fw'></i> <a href="https://utteranc.es/">https://utteranc.es/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">utterances</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># utterances</span></span><br><span class="line">  <span class="comment"># https://utteranc.es/</span></span><br><span class="line">  <span class="attr">utterances:</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">xxx/xxx</span></span><br><span class="line">    <span class="attr">issue-term:</span> <span class="string">pathname</span></span><br><span class="line">    <span class="attr">issue-number:</span></span><br><span class="line">    <span class="attr">theme:</span></span><br><span class="line">      <span class="attr">light:</span> <span class="string">github-light</span></span><br><span class="line">      <span class="attr">dark:</span> <span class="string">github-dark</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">✨💬✨</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-github-issues--3"><p><i class='fas fa-comment-dots fa-fw'></i> Vue 驱动的、基于 Issue 的评论插件<br><i class='fas fa-globe fa-fw'></i> <a href="https://vssue.js.org/zh/">https://vssue.js.org/zh/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">vssue</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">vssue:</span></span><br><span class="line">    <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">clientId:</span></span><br><span class="line">    <span class="attr">clientSecret:</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-github-issues--4"><p><i class='fas fa-comment-dots fa-fw'></i> A modern comment component based on Github Issue and Preact.<br><i class='fas fa-globe fa-fw'></i> <a href="https://gitalk.github.io/">https://gitalk.github.io/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">gitalk</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">gitalk:</span></span><br><span class="line">    <span class="attr">clientID:</span></span><br><span class="line">    <span class="attr">clientSecret:</span></span><br><span class="line">    <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">admin:</span> <span class="comment"># []</span></span><br></pre></td></tr></table></figure><p>clientID 和 clientSecret 的获取方法可自行搜索教程，这里仅简单描述一下步骤：</p><ol><li>点击 GitHub -&gt; Settings <code>https://github.com/settings/profile</code></li><li>点击 Developer settings <code>https://github.com/settings/developers</code></li><li>点击 New OAuth App <code>https://github.com/settings/applications/new</code></li><li>填写信息：<br><strong>Application name</strong> 随便填，我的是：<code>xaoxuu.com</code><br><strong>Homepage URL</strong> 和 <strong>Authorization callback URL</strong> 都写你的网址，我的是：<code>https://xaoxuu.com</code></li></ol><p><strong>可以通过设置 gitalk.id 实现多个页面共用一个评论框。</strong></p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">/wiki/volantis/</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></div></div></div>              </div>            </details><details yellow><summary> Disqus 系列 </summary>              <div class='content'>              <div class="tabs" id="tab-comments-disqus-"><ul class="nav-tabs"><li class="tab active"><a class="#comments-disqus--1">Disqus</a></li><li class="tab"><a class="#comments-disqus--2">DisqusJS</a></li><li class="tab"><a class="#comments-disqus--3">Isso</a></li></ul><div class="tab-content"><div class="tab-pane active" id="comments-disqus--1"><p><i class='fas fa-comment-dots fa-fw'></i> Disqus - The #1 way to build an audience on your website.<br><i class='fas fa-globe fa-fw'></i> <a href="https://disqus.com/">https://disqus.com/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">disqus</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">disqus:</span></span><br><span class="line">    <span class="attr">shortname:</span></span><br></pre></td></tr></table></figure><p><strong>可以通过设置 disqus.path 实现多个页面共用一个评论框。</strong></p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">disqus:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/wiki/volantis/</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-disqus--2"><p><i class='fas fa-comment-dots fa-fw'></i> Render Disqus comments in Mainland China using Disqus API<br><i class='fas fa-globe fa-fw'></i> <a href="https://github.com/SukkaW/DisqusJS">https://github.com/SukkaW/DisqusJS</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">disqusjs</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># DisqusJS</span></span><br><span class="line">  <span class="comment"># https://github.com/SukkaW/DisqusJS</span></span><br><span class="line">  <span class="attr">disqusjs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="comment"># 全局评论地址</span></span><br><span class="line">    <span class="comment"># 配置项按照yml格式继续填写即可 除了 [siteName url identifier] 选项</span></span><br><span class="line">    <span class="comment">#shortname:</span></span><br><span class="line">    <span class="comment">#api:</span></span><br><span class="line">    <span class="comment">#apikey:</span></span><br><span class="line">    <span class="comment">#admin:</span></span><br><span class="line">    <span class="comment">#nesting:</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-disqus--3"><p><i class='fas fa-comment-dots fa-fw'></i> A commenting server similar to Disqus.<br><i class='fas fa-globe fa-fw'></i> <a href="https://posativ.org/isso/">https://posativ.org/isso/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">isso</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">isso:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://example.com/(path/)</span></span><br><span class="line">    <span class="attr">src:</span> <span class="string">https://example.com/(path/)js/embed.min.js</span></span><br></pre></td></tr></table></figure></div></div></div>              </div>            </details><details blue><summary> Valine 衍生系列 </summary>              <div class='content'>              <div class="note error"><p>Valine 在 5.0 版本被移除,具体原因可参考<a href="https://github.com/next-theme/hexo-theme-next/issues/188#issuecomment-766578906">hexo-theme-next#188#issuecomment-766578906</a></p></div><p>以下是在解决 valine 遗留问题同一时期产生的评论系统故归为一类, 然在其社区issue中也报告了类似的攻击事件(eg: <a href="https://github.com/imaegoo/twikoo/issues/157">twikoo#157</a> <a href="https://github.com/walinejs/waline/issues/424">waline#424</a> <a href="https://github.com/walinejs/waline/issues/430">waline#430</a>),故请谨慎选择.</p><div class="tabs" id="tab-comments-valine-"><ul class="nav-tabs"><li class="tab active"><a class="#comments-valine--1">discuss</a></li><li class="tab"><a class="#comments-valine--2">twikoo</a></li><li class="tab"><a class="#comments-valine--3">Waline</a></li></ul><div class="tab-content"><div class="tab-pane active" id="comments-valine--1"><p><i class='fas fa-comment-dots fa-fw'></i> 一款简单，安全，免费的评论系统 | A simple, safe, free comment system<br><i class='fas fa-globe fa-fw'></i> <a href="https://discuss.js.org/">https://discuss.js.org</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">discuss</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># Discuss</span></span><br><span class="line">  <span class="comment"># https://discuss.js.org</span></span><br><span class="line">  <span class="attr">discuss:</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/npm/discuss/dist/Discuss.js</span> <span class="comment"># 建议锁定版本</span></span><br><span class="line">    <span class="attr">serverURLs:</span> <span class="comment"># Discuss server address url</span></span><br><span class="line">    <span class="comment"># https://discuss.js.org/Quick-Start.html#path</span></span><br></pre></td></tr></table></figure><p>其中，<code>placeholder</code> 支持在 front-matter 中设置。</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">discuss:</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">你觉得xxx怎么样呢？</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>也可以通过设置 <code>discuss.path</code> 实现多个页面共用一个评论框。</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">discuss:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-valine--2"><p><i class='fas fa-comment-dots fa-fw'></i> 一个简洁、安全、免费的静态网站评论系统 | A simple, safe, free comment system.<br><i class='fas fa-globe fa-fw'></i> <a href="https://twikoo.js.org/">https://twikoo.js.org/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">twikoo</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">twikoo:</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/npm/twikoo@latest</span> <span class="comment"># 建议锁定版本</span></span><br><span class="line">    <span class="attr">path:</span> <span class="comment"># 全局评论地址</span></span><br><span class="line">    <span class="comment"># 其他配置项按照yml格式继续填写即可 除了 [el path] 选项</span></span><br><span class="line">    <span class="attr">envId:</span> <span class="string">xxxxxxxxxxxxxxx</span> <span class="comment"># 腾讯云环境id</span></span><br></pre></td></tr></table></figure><p>其中，<code>placeholder</code> 支持在 front-matter 中设置。</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">你觉得xxx怎么样呢？</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>也可以通过设置 <code>twikoo.path</code> 实现多个页面共用一个评论框。</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-valine--3"><p><i class='fas fa-comment-dots fa-fw'></i> 一个简洁、安全、免费的静态网站评论系统 | A simple, safe, free comment system.<br><i class='fas fa-globe fa-fw'></i> <a href="https://waline.js.org/">https://waline.js.org/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">waline</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># Waline</span></span><br><span class="line">  <span class="comment"># https://waline.js.org/</span></span><br><span class="line">  <span class="attr">waline:</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js</span></span><br><span class="line">    <span class="attr">path:</span> <span class="comment"># 全局评论地址 目前设置全局评论地址后visitor失效,这是waline的问题</span></span><br><span class="line">    <span class="attr">placeholder:</span> <span class="string">快来评论吧~</span>  <span class="comment"># 评论占位提示</span></span><br><span class="line">    <span class="attr">imageHosting:</span> <span class="string">https://7bu.top/api/upload</span> <span class="comment"># 图床api（默认使用去不图床）</span></span><br><span class="line">    <span class="comment"># 其他配置项按照yml格式继续填写即可 除了 [el path placeholder uploadImage] 选项</span></span><br><span class="line">    <span class="attr">serverURL:</span> <span class="string">xxxxxxxxxxxxxxx</span> <span class="comment"># Waline 的服务端地址（必填） 测试用地址: https://waline-ruddy.vercel.app</span></span><br><span class="line">    <span class="string">...</span> <span class="string">可选配置项详见源码</span></span><br></pre></td></tr></table></figure><p>其中，<code>placeholder</code> 支持在 front-matter 中设置。</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">你觉得xxx怎么样呢？</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>也可以通过设置 <code>waline.path</code> 实现多个页面共用一个评论框。</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></div></div></div>              </div>            </details><details red><summary> Others 其他系列 </summary>              <div class='content'>              <div class="tabs" id="tab-comments-others-"><ul class="nav-tabs"><li class="tab active"><a class="#comments-others--1">Artalk</a></li><li class="tab"><a class="#comments-others--2">Livere</a></li><li class="tab"><a class="#comments-others--3">Hashover</a></li><li class="tab"><a class="#comments-others--4">More...</a></li></ul><div class="tab-content"><div class="tab-pane active" id="comments-others--1"><p><i class='fas fa-comment-dots fa-fw'></i> 一款简洁的自托管评论系统 | A Selfhosted Comment System.<br><i class='fas fa-globe fa-fw'></i> <a href="https://artalk.js.org/">https://artalk.js.org/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">artalk</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">artalk:</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/npm/artalk@2.1.3/dist/Artalk.js</span></span><br><span class="line">    <span class="attr">css:</span> <span class="string">https://cdn.jsdelivr.net/npm/artalk@2.1.3/dist/Artalk.css</span></span><br><span class="line">    <span class="attr">server:</span> <span class="string">http://127.0.0.1:8080/api</span>    <span class="comment"># 修改为自建的后端服务地址</span></span><br></pre></td></tr></table></figure><p>其中，<code>placeholder</code> 支持在 front-matter 中设置。</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">artalk:</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">你觉得xxx怎么样呢？</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>也可以通过设置 <code>artalk.path</code> 实现多个页面共用一个评论框。</p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">artalk:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-others--2"><p><i class='fas fa-comment-dots fa-fw'></i> Communication makes better world.<br><i class='fas fa-globe fa-fw'></i> <a href="https://www.livere.com/">https://www.livere.com/</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">livere</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">livere:</span></span><br><span class="line">    <span class="attr">uid:</span> <span class="comment">#你的livere的uid</span></span><br></pre></td></tr></table></figure><p>在这里查看你的 uid：<code>https://livere.com/insight/myCode</code>，在【代码管理 -&gt; 一般网站】中找到如下这段代码，其中 <code>data-uid</code> 中的内容就是你的 <code>livere_uid</code>。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 来必力City版安装代码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;lv-container&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;city&quot;</span> <span class="attr">data-uid</span>=<span class="string">&quot;你的livere的uid&quot;</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-others--3"><p><i class='fas fa-comment-dots fa-fw'></i> A free and open source PHP comment system designed to allow completely anonymous comments and easy theming.<br><i class='fas fa-globe fa-fw'></i> <a href="https://www.barkdull.org/software/hashover">https://www.barkdull.org/software/hashover</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">hashover</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">hashover:</span></span><br><span class="line">    <span class="attr">src:</span> <span class="string">https://example.com/(path/)comments.php</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comments-others--4"><figure class="highlight plaintext"><figcaption><span>blog/themes/volantis/layout/_third-party/comments/评论系统名称/layout.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这里写布局代码</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>blog/themes/volantis/layout/_third-party/comments/评论系统名称/script.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这里要写加载 js 的代码</span><br></pre></td></tr></table></figure><p><span class='btn large center'><a class="button" href='https://github.com/volantis-x/' title='收录更多评论系统'><i class='fas fa-plus'></i>收录更多评论系统</a></span></p></div></div></div>              </div>            </details><hr><p><strong>可以通过在 front-matter 设置 config 实现在特定页面修改评论系统的相关配置。</strong></p><p><strong>支持的有(按字母顺序): discuss, giscus, gitalk, twikoo, waline</strong></p><figure class="highlight yaml"><figcaption><span>front-matter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">id:</span> <span class="string">/233/</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="站内搜索"><a href="#站内搜索" class="headerlink" title="站内搜索"></a>站内搜索</h2><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">hexo</span>  <span class="comment"># hexo</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/xxxxxxxx/js/search/hexo.js</span></span><br></pre></td></tr></table></figure><p>默认配置为 Hexo 搜索，但是需要安装插件才能使用：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -S hexo-generator-json-content</span><br></pre></td></tr></table></figure><div class="note error"><p>原 google, algolia, azure, baidu 站内搜索 系祖传代码, 且文档丢失, 不便后续维护 在 5.0 版本移除</p></div></div><div class="story post-story"><h2 id="插件库"><a href="#插件库" class="headerlink" title="插件库"></a>插件库</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>Volantis 为丰富的插件提供了兼容性优化。大部分插件您只需开启和关闭，无需进行设置。</p><h3 id="幻灯片背景-视差滚动效果"><a href="#幻灯片背景-视差滚动效果" class="headerlink" title="幻灯片背景(视差滚动效果)"></a>幻灯片背景(视差滚动效果)</h3><div class="note error"><p>jquery.backstretch 在 5.0 版本 移除, 被 parallax 替代</p></div><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">parallax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">cover</span>       <span class="comment"># cover: sticky on the cover.   fixed: Fixed as background for the site.</span></span><br><span class="line">    <span class="attr">shuffle:</span> <span class="literal">true</span>         <span class="comment"># shuffle playlist</span></span><br><span class="line">    <span class="attr">duration:</span> <span class="number">10000</span>       <span class="comment"># Duration (ms)</span></span><br><span class="line">    <span class="attr">fade:</span> <span class="number">1500</span>            <span class="comment"># fade duration (ms) (Not more than 1500)</span></span><br><span class="line">    <span class="attr">images:</span>               <span class="comment"># For personal use only. At your own risk if used for commercial purposes !!!</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span></span><br><span class="line">      <span class="string">...</span></span><br></pre></td></tr></table></figure><p>幻灯片背景图片显示的位置可以选择粘贴在封面上，跟随封面一起滑动，也可以选择固定作为网页背景图片。</p><h3 id="highlight-js"><a href="#highlight-js" class="headerlink" title="highlight.js"></a>highlight.js</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># 代码高亮</span></span><br><span class="line">  <span class="attr">code_highlight:</span> <span class="string">highlightjs</span> <span class="comment"># highlightjs or prismjs</span></span><br><span class="line">  <span class="comment"># highlight.js</span></span><br><span class="line">  <span class="attr">highlightjs:</span></span><br><span class="line">    <span class="attr">copy_code:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 如果开启 js, hexo.config.highlight.enable 需要设置为 false</span></span><br><span class="line">    <span class="attr">js:</span> <span class="comment">#https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/highlight.min.js # Please set hexo.config.highlight.enable = false !!!</span></span><br><span class="line">    <span class="attr">css:</span> <span class="string">https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/styles/default.min.css</span></span><br><span class="line">    <span class="comment"># more: https://www.jsdelivr.com/package/npm/highlight.js?path=styles</span></span><br></pre></td></tr></table></figure><p>如果需要使用 highlight.js 进行语法高亮，请将站点配置文件中的 <code>highlight.enable</code> 设置为 <code>false</code> 否则不会加载插件。您可以在 <u>94</u> 种 <a href="https://www.jsdelivr.com/package/npm/highlight.js?path=styles">语法高亮主题</a> 中挑选喜爱的主题，然后替换上面的 css 链接。</p><div class="note warning"><p>如果您使用 highlight.js 请确保没有使用 hexo 官方的 codeblock 标签，否则会报错。</p></div><div class="note bug red"><p>经测试，使用 highlight.js 的情况下，部分容器内的代码可能仍然会被渲染甚至报错。</p></div><h3 id="APlayer-音乐播放器"><a href="#APlayer-音乐播放器" class="headerlink" title="APlayer 音乐播放器"></a>APlayer 音乐播放器</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># APlayer is only available in mainland China.</span></span><br><span class="line">  <span class="comment"># APlayer config: https://github.com/metowolf/MetingJS</span></span><br><span class="line">  <span class="attr">aplayer:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">js:</span></span><br><span class="line">      <span class="attr">aplayer:</span> <span class="string">https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js</span></span><br><span class="line">      <span class="attr">meting:</span> <span class="string">https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js</span></span><br><span class="line">    <span class="comment"># Required</span></span><br><span class="line">    <span class="attr">server:</span> <span class="string">netease</span>   <span class="comment"># netease, tencent, kugou, xiami, baidu</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">playlist</span>    <span class="comment"># song, playlist, album, search, artist</span></span><br><span class="line">    <span class="attr">id:</span> <span class="number">3175833810</span>    <span class="comment"># song id / playlist id / album id / search keyword</span></span><br><span class="line">    <span class="comment"># Optional</span></span><br><span class="line">    <span class="attr">fixed:</span> <span class="literal">false</span>      <span class="comment"># enable fixed mode</span></span><br><span class="line">    <span class="attr">theme:</span> <span class="string">&#x27;#1BCDFC&#x27;</span>  <span class="comment"># main color</span></span><br><span class="line">    <span class="attr">autoplay:</span> <span class="literal">false</span>   <span class="comment"># audio autoplay</span></span><br><span class="line">    <span class="attr">order:</span> <span class="string">list</span>       <span class="comment"># player play order, values: &#x27;list&#x27;, &#x27;random&#x27;</span></span><br><span class="line">    <span class="attr">loop:</span> <span class="string">all</span>         <span class="comment"># player loop play, values: &#x27;all&#x27;, &#x27;one&#x27;, &#x27;none&#x27;</span></span><br><span class="line">    <span class="attr">volume:</span> <span class="number">0.7</span>       <span class="comment"># default volume, notice that player will remember user setting, default volume will not work after user set volume themselves</span></span><br><span class="line">    <span class="attr">list_max_height:</span> <span class="string">320px</span> <span class="comment"># list max height</span></span><br><span class="line">    <span class="attr">list_folded:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>APlayer播放器只可以在中国大陆地区使用。相关文档： <a href="https://aplayer.js.org/">APlayer</a> | <a href="https://github.com/metowolf/MetingJS">MetingJS</a></p></div><h3 id="暗黑模式"><a href="#暗黑模式" class="headerlink" title="暗黑模式"></a>暗黑模式</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># 暗黑模式 darkmode</span></span><br><span class="line">  <span class="comment"># 开关按钮：在 navbar.menu 中添加：</span></span><br><span class="line">  <span class="comment"># - name: 暗黑模式 # 可自定义</span></span><br><span class="line">  <span class="comment">#   icon: fas fa-moon # 可自定义</span></span><br><span class="line">  <span class="comment">#   toggle: darkmode</span></span><br><span class="line">  <span class="attr">darkmode:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="结束支持"><a href="#结束支持" class="headerlink" title="结束支持"></a>结束支持</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># 旧版 Internet Explorer 淘汰行动</span></span><br><span class="line">  <span class="comment"># https://www.microsoft.com/zh-cn/WindowsForBusiness/End-of-IE-support</span></span><br><span class="line">  <span class="comment"># 本主题不支持Internet Explorer的任何版本!!!</span></span><br><span class="line">  <span class="attr">killOldVersionsOfIE:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 禁用JavaScript提示</span></span><br><span class="line">  <span class="comment"># 本页面需要浏览器支持（启用）JavaScript</span></span><br><span class="line">  <span class="comment"># 主题中的某些插件必须启用JavaScript才能正常工作，例如开启scrollreveal如果禁用JavaScript会导致卡片消失</span></span><br><span class="line">  <span class="attr">killNoScript:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="Artitalk"><a href="#Artitalk" class="headerlink" title="Artitalk"></a>Artitalk</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># Artitalk https://artitalk.js.org</span></span><br><span class="line">  <span class="comment"># 配置过程请参考：https://artitalk.js.org/doc.html</span></span><br><span class="line">  <span class="comment"># 使用过旧版本的请修改Leancloud shuoshuo class部分列名：https://artitalk.js.org/release.html</span></span><br><span class="line">  <span class="comment"># 除appID和appKEY外均为选填项</span></span><br><span class="line">  <span class="attr">artitalk:</span></span><br><span class="line">    <span class="comment"># Set `plugins: [&quot;artitalk&quot;]` to enable in front-matter</span></span><br><span class="line">    <span class="comment"># 不支持 Pjax</span></span><br><span class="line">    <span class="comment"># 配置项按照yml格式继续填写即可</span></span><br><span class="line">    <span class="attr">appId:</span> <span class="string">ogP8qj3veMh0LFpFWMPOyF0X-MdYXbMMI</span> <span class="comment"># your appID</span></span><br><span class="line">    <span class="attr">appKey:</span> <span class="string">nHXLd3N3Jgh460t2iRQKWAtr</span> <span class="comment"># your appKEY</span></span><br><span class="line">    <span class="comment"># serverURL:  #leancloud绑定的api访问域名，使用国际版的话不需要填写</span></span><br><span class="line">    <span class="comment"># lang: # 语言设置，zh为汉语，en为英语，es为西班牙语。默认为汉语</span></span><br><span class="line">    <span class="comment"># pageSize: #每页说说的显示数量</span></span><br><span class="line">    <span class="comment"># shuoPla: #在编辑说说的输入框中的占位符</span></span><br><span class="line">    <span class="comment"># avatarPla: #自定义头像url的输入框的占位符</span></span><br><span class="line">    <span class="comment"># motion: #加载动画的开关，1为开，0为关，默认为开</span></span><br><span class="line">    <span class="comment"># bgImg: #说说输入框背景图片url</span></span><br><span class="line">    <span class="comment"># color1: #说说背景颜色1&amp;按钮颜色1</span></span><br><span class="line">    <span class="comment"># color2: #说说背景颜色2&amp;按钮颜色2</span></span><br><span class="line">    <span class="comment"># color3: #说说字体颜色</span></span><br><span class="line">    <span class="comment"># cssUrl: #自定义css接口</span></span><br></pre></td></tr></table></figure><h3 id="BBtalk"><a href="#BBtalk" class="headerlink" title="BBtalk"></a>BBtalk</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># BBtalk https://bb.js.org</span></span><br><span class="line">  <span class="attr">bbtalk:</span></span><br><span class="line">    <span class="comment"># Set `plugins: [&quot;bbtalk&quot;]` to enable in front-matter</span></span><br><span class="line">    <span class="comment"># 支持 Pjax</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/npm/bbtalk@0.1.5/dist/bbtalk.min.js</span> <span class="comment"># BBtalk.js</span></span><br><span class="line">    <span class="attr">appId:</span> <span class="string">0KzOX4vC7Jsk6vzUGNeEiUaI-gzGzoHsz</span> <span class="comment"># your appID</span></span><br><span class="line">    <span class="attr">appKey:</span> <span class="string">HwCiWuxfpvKiLm4teCUgTIba</span> <span class="comment"># your appKEY</span></span><br><span class="line">    <span class="attr">serverURLs:</span> <span class="string">https://bbapi.heson10.com</span> <span class="comment"># Request Api 域名</span></span><br></pre></td></tr></table></figure><h3 id="Tidio"><a href="#Tidio" class="headerlink" title="Tidio"></a>Tidio</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># 聊天功能</span></span><br><span class="line">  <span class="attr">chat_service:</span> <span class="string">tidio</span> <span class="comment"># tidio or gitter</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Tidio</span></span><br><span class="line">  <span class="comment"># https://www.tidio.com/</span></span><br><span class="line">  <span class="attr">tidio:</span></span><br><span class="line">    <span class="attr">id:</span> <span class="string">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></span><br></pre></td></tr></table></figure><h3 id="友链朋友圈"><a href="#友链朋友圈" class="headerlink" title="友链朋友圈"></a>友链朋友圈</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># 友链朋友圈 hexo-circle-of-friends</span></span><br><span class="line">  <span class="comment"># https://github.com/Rock-Candy-Tea/hexo-circle-of-friends</span></span><br><span class="line">  <span class="comment"># https://zfe.space/post/friend-link-circle.html</span></span><br><span class="line">  <span class="attr">fcircle:</span></span><br><span class="line">    <span class="comment"># Set `plugins: [&quot;fcircle&quot;]` to enable in front-matter</span></span><br><span class="line">    <span class="comment"># 支持 Pjax</span></span><br><span class="line">    <span class="attr">api:</span> <span class="string">&#x27;&#x27;</span> <span class="comment"># api 地址</span></span><br><span class="line">    <span class="attr">max_number:</span> <span class="number">20</span> <span class="comment"># 页面展示文章数量</span></span><br><span class="line">    <span class="attr">add_number:</span> <span class="number">10</span> <span class="comment"># 每次加载增加的篇数</span></span><br><span class="line">    <span class="attr">opentype:</span> <span class="string">&#x27;_blank&#x27;</span> <span class="comment"># &#x27;_blank&#x27;打开新标签,&#x27;_self&#x27;本窗口打开</span></span><br><span class="line">    <span class="attr">nofollow:</span> <span class="literal">true</span> <span class="comment"># 禁止搜索引擎抓取</span></span><br><span class="line">    <span class="comment"># loadingCutom: # 自定义loading图 例如: &lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt; | &lt;img src=&quot;你的图片地址&quot; alt=&quot;加载中...&quot;&gt;</span></span><br></pre></td></tr></table></figure><h3 id="消息提示"><a href="#消息提示" class="headerlink" title="消息提示"></a>消息提示</h3><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># 消息提示 </span></span><br><span class="line">  <span class="comment"># izitoast@1.4.0</span></span><br><span class="line">  <span class="attr">message:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">css:</span> <span class="string">volantis-static/libs/izitoast/dist/css/iziToast.min.css</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">volantis-static/libs/izitoast/dist/js/iziToast.min.js</span></span><br><span class="line">    <span class="attr">icon:</span>     <span class="comment"># 默认图标，支持对图标添加颜色，可选值：see：/source/css/_style/_plugins/fontcolor.styl</span></span><br><span class="line">      <span class="attr">default:</span> <span class="string">fa-solid</span> <span class="string">fa-info-circle</span> <span class="string">light-blue</span></span><br><span class="line">      <span class="attr">quection:</span> <span class="string">fa-solid</span> <span class="string">fa-question-circle</span> <span class="string">light-blue</span></span><br><span class="line">    <span class="attr">time:</span>     <span class="comment"># 默认持续时间</span></span><br><span class="line">      <span class="attr">default:</span> <span class="number">5000</span></span><br><span class="line">      <span class="attr">quection:</span> <span class="number">20000</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">&#x27;topRight&#x27;</span>                 <span class="comment"># 弹出位置 可选值：topRight, bottomRight, bottomLeft, topLeft, topCenter, bottomCenter, center</span></span><br><span class="line">    <span class="attr">transitionIn:</span> <span class="string">&#x27;bounceInLeft&#x27;</span>         <span class="comment"># 弹窗打开动画 可选值：bounceInLeft, bounceInRight, bounceInUp, bounceInDown, fadeIn, fadeInDown, fadeInUp, fadeInLeft, fadeInRight, flipInX</span></span><br><span class="line">    <span class="attr">transitionOut:</span> <span class="string">&#x27;fadeOutRight&#x27;</span>        <span class="comment"># 弹窗关闭动画 可选值：fadeOut, fadeOutUp, fadeOutDown, fadeOutLeft, fadeOutRight, flipOutX</span></span><br><span class="line">    <span class="attr">titleColor:</span> <span class="string">&#x27;var(--color-text)&#x27;</span>      <span class="comment"># 标题颜色</span></span><br><span class="line">    <span class="attr">messageColor:</span> <span class="string">&#x27;var(--color-text)&#x27;</span>    <span class="comment"># 消息颜色</span></span><br><span class="line">    <span class="attr">backgroundColor:</span> <span class="string">&#x27;var(--color-card)&#x27;</span> <span class="comment"># 默认背景色</span></span><br><span class="line">    <span class="attr">zindex:</span> <span class="number">2147483647</span>                   <span class="comment"># 层级</span></span><br><span class="line">    <span class="attr">copyright:</span>                           <span class="comment"># 是否在复制时弹出版权提示，影响范围：ctrl+c、代码块复制按钮、右键复制选项</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">title:</span> <span class="string">&#x27;知识共享许可协议&#x27;</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">&#x27;请遵守 CC BY-NC-SA 4.0 协议。&#x27;</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">&#x27;far fa-copyright light-blue&#x27;</span></span><br><span class="line">    <span class="attr">aplayer:</span>                              <span class="comment"># 是否开启音乐通知；播放、暂停、失败 时的图标</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">play:</span> <span class="string">fa-solid</span> <span class="string">fa-play</span></span><br><span class="line">      <span class="attr">pause:</span> <span class="string">fa-solid</span> <span class="string">fa-pause</span></span><br><span class="line">    <span class="attr">rightmenu:</span>                            </span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span>                        <span class="comment"># 是否开启右键模块的消息通知</span></span><br><span class="line">      <span class="attr">notice:</span> <span class="literal">true</span>                        <span class="comment"># 唤醒原右键菜单的通知 </span></span><br></pre></td></tr></table></figure><h3 id="轮播标签"><a href="#轮播标签" class="headerlink" title="轮播标签"></a>轮播标签</h3><p>使用方法参见：<a href="/v5/tag-plugins/#swiper">swiper</a></p><figure class="highlight yaml"><figcaption><span>blog/_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">css:</span> <span class="string">https://unpkg.com/swiper@6/swiper-bundle.min.css</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">https://unpkg.com/swiper@6/swiper-bundle.min.js</span></span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github Pages </tag>
            
            <tag> Hexo </tag>
            
            <tag> Volantis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人主页搭建流程</title>
      <link href="/2022/06/08/%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/"/>
      <url>/2022/06/08/%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>本网站建立依附于Github Pages，使用到的框架是Hexo（基于Node.js），使用的主题是Volantis，图床使用Github自行搭建。目前用到的外部支持有：Busuanzi、Giscus、Parallax等。</p><span id="more"></span><p>搭建参考教程链接：</p><ul><li><a href="https://zhuanlan.zhihu.com/p/60578464">https://zhuanlan.zhihu.com/p/60578464</a></li><li><a href="https://zhuanlan.zhihu.com/p/111614119">https://zhuanlan.zhihu.com/p/111614119</a></li></ul><br><div class="story post-story"><h2 id="主要步骤"><a href="#主要步骤" class="headerlink" title="主要步骤"></a>主要步骤</h2><h3 id="1-安装Git和Node-js"><a href="#1-安装Git和Node-js" class="headerlink" title="1. 安装Git和Node.js"></a>1. 安装Git和Node.js</h3><ul><li>Git官网：<a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></li><li><ul><li>检查是否安装成功命令（cmd）：<code>git--version</code></li></ul></li><li>Node.js官网：<a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></li><li><ul><li>检查是否安装成功命令（cmd）：<code>node -v</code> 和 <code>npm -v</code></li></ul></li></ul><h3 id="2-本地部署Hexo博客"><a href="#2-本地部署Hexo博客" class="headerlink" title="2. 本地部署Hexo博客"></a>2. 本地部署Hexo博客</h3><h4 id="0-新建文件夹"><a href="#0-新建文件夹" class="headerlink" title="0. 新建文件夹"></a>0. 新建文件夹</h4><ul><li>空文件夹名：用户名.github.io（用户名为github用户名）<h4 id="1-安装Hexo"><a href="#1-安装Hexo" class="headerlink" title="1. 安装Hexo"></a>1. 安装Hexo</h4></li><li>右键Git Bash Here，输入命令：<code>$ npm install hexo-cli -g</code></li><li>检查是否安装成功命令：hexo -v</li><li>安装一键部署插件：<code>npm install hexo-deployer-git --save</code><h4 id="2-hexo初始化并安装依赖"><a href="#2-hexo初始化并安装依赖" class="headerlink" title="2. hexo初始化并安装依赖"></a>2. hexo初始化并安装依赖</h4></li><li>hexo init</li><li>npm install</li><li>Hexo文件夹目录结构：<br><img src="https://cdn.jsdelivr.net/gh/YaelCassini/MyGraphBed/note/202206141355.jpg" alt="这是图片" title="Hexo博客文件夹目录结构"><h4 id="3-生成页面并本地预览"><a href="#3-生成页面并本地预览" class="headerlink" title="3. 生成页面并本地预览"></a>3. 生成页面并本地预览</h4></li><li>hexo g &amp;&amp; hexo s</li><li>切换端口号预览：hexo server -p 5000<h4 id="4-修改-config中的主题为volantis"><a href="#4-修改-config中的主题为volantis" class="headerlink" title="4. 修改_config中的主题为volantis"></a>4. 修改_config中的主题为volantis</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: volantis</span><br></pre></td></tr></table></figure><h4 id="5-下载Volantis主题，编译查看效果"><a href="#5-下载Volantis主题，编译查看效果" class="headerlink" title="5. 下载Volantis主题，编译查看效果"></a>5. 下载Volantis主题，编译查看效果</h4></li><li>安装主题：<code>npm i hexo-theme-volantis</code></li><li>安装 Hexo 搜索的依赖包：<code>npm i hexo-generator-search hexo-generator-json-content</code></li><li>安装 Stylus 渲染器：<code>npm i hexo-renderer-stylus</code></li></ul><h4 id="6-创建Volantis主题所需要的页面"><a href="#6-创建Volantis主题所需要的页面" class="headerlink" title="6. 创建Volantis主题所需要的页面"></a>6. 创建Volantis主题所需要的页面</h4><ul><li><p>参考链接：<a href="https://blog.csdn.net/qq_44161695/article/details/117648144">https://blog.csdn.net/qq_44161695/article/details/117648144</a></p></li><li><p>创建分类：hexo new page “categories”，并修改内容为：</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: category</span><br><span class="line">index: true</span><br><span class="line">title: 所有分类</span><br><span class="line">sidebar: [blogger]</span><br><span class="line">date: 2022-06-08 18:09:42</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>创建标签：hexo new page “tags”，并修改内容为：</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: tag</span><br><span class="line">index: true</span><br><span class="line">title: 所有标签</span><br><span class="line">sidebar: [blogger]</span><br><span class="line">date: 2022-06-08 18:10:12</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>创建关于我：hexo new page “about”，并修改内容为：</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: docs</span><br><span class="line">seo_title: 关于</span><br><span class="line">bottom_meta: false</span><br><span class="line">sidebar: []</span><br><span class="line">valine:</span><br><span class="line">placeholder: 有什么想对我说的呢？</span><br><span class="line">date: 2022-06-08 18:10:36</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>创建友链：hexo new page “friends”</p></li></ul><h4 id="7-主题样式配置"><a href="#7-主题样式配置" class="headerlink" title="7. 主题样式配置"></a>7. 主题样式配置</h4><ul><li>新建_config.volantis.yaml，参考Volantis官网源码修改_config.volantis.</li><li>yaml文件：<a href="https://github.com/volantis-x/community/blob/main/_config.volantis.yml">https://github.com/volantis-x/community/blob/main/_config.volantis.yml</a></li></ul><h4 id="8-常用命令"><a href="#8-常用命令" class="headerlink" title="8. 常用命令"></a>8. 常用命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;name&quot;       # 新建文章</span><br><span class="line">hexo new page &quot;name&quot;  # 新建页面</span><br><span class="line">hexo g                # 生成页面</span><br><span class="line">hexo d                # 部署</span><br><span class="line">hexo g -d             # 生成页面并部署</span><br><span class="line">hexo s                # 本地预览</span><br><span class="line">hexo clean            # 清除缓存和已生成的静态文件</span><br><span class="line">hexo help             # 帮助</span><br></pre></td></tr></table></figure><h4 id="9-tips"><a href="#9-tips" class="headerlink" title="9. tips"></a>9. tips</h4><ol><li><p>Hexo 设置显示文章摘要，首页不显示全文</p><p> Hexo 主页文章列表默认会显示文章全文，浏览时很不方便，可以在文章中插入 <code>&lt;!--more--&gt;</code> 进行分段。</p><p> 该代码前面的内容会作为摘要显示，而后面的内容会替换为 “Read More” 隐藏起来。</p></li><li><p>连接不上Github：</p><p> <a href="https://blog.csdn.net/sinat_32017511/article/details/115762643">https://blog.csdn.net/sinat_32017511/article/details/115762643</a><br> <a href="https://blog.csdn.net/Sheyami/article/details/121631887">https://blog.csdn.net/Sheyami/article/details/121631887</a></p><p> 另外 可以尝试在.git&#x2F;config中增加：</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[http]</span><br><span class="line"> sslVerify = false</span><br></pre></td></tr></table></figure><p> 最终解决方案：旧设备也重新Clone（orz</p></li></ol><br><h3 id="3-部署到Github"><a href="#3-部署到Github" class="headerlink" title="3. 部署到Github"></a>3. 部署到Github</h3><ul><li>Github官网：<a href="https://github.com/">https://github.com/</a><h4 id="0-创建仓库：仓库名：用户名-github-io"><a href="#0-创建仓库：仓库名：用户名-github-io" class="headerlink" title="0. 创建仓库：仓库名：用户名.github.io"></a>0. 创建仓库：仓库名：用户名.github.io</h4><h4 id="1-本地配置git-username和git-useremail"><a href="#1-本地配置git-username和git-useremail" class="headerlink" title="1. 本地配置git username和git useremail"></a>1. 本地配置git username和git useremail</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Name&quot;</span><br><span class="line">git config --global user.email &quot;Email&quot;</span><br></pre></td></tr></table></figure><h4 id="2-SSH-key配置"><a href="#2-SSH-key配置" class="headerlink" title="2. SSH-key配置"></a>2. SSH-key配置</h4></li><li>参考链接：<a href="https://zhuanlan.zhihu.com/p/111614119">https://zhuanlan.zhihu.com/p/111614119</a></li><li>本地生成密钥：  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;Email&quot;</span><br></pre></td></tr></table></figure></li><li>打开：C:&#x2F;Users&#x2F;用户名&#x2F;.ssh&#x2F;id_rsa.pub，并全选复制。</li><li>在Github-Settings新建SSH，并粘贴。</li><li>本地输入以下命令检查是否成功连接：  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><h4 id="3-在-config-yaml中加入deploy配置"><a href="#3-在-config-yaml中加入deploy配置" class="headerlink" title="3. 在_config.yaml中加入deploy配置"></a>3. 在_config.yaml中加入deploy配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">type: git</span><br><span class="line">repository: git@github.com:panakot/panakot.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure><h4 id="4-部署网页并查看效果"><a href="#4-部署网页并查看效果" class="headerlink" title="4. 部署网页并查看效果"></a>4. 部署网页并查看效果</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure></li></ul><br><h3 id="4-使用github建立图床"><a href="#4-使用github建立图床" class="headerlink" title="4. 使用github建立图床"></a>4. 使用github建立图床</h3><h4 id="1-新建Github仓库"><a href="#1-新建Github仓库" class="headerlink" title="1. 新建Github仓库"></a>1. 新建Github仓库</h4><h4 id="2-下载图片并上传到Github仓库"><a href="#2-下载图片并上传到Github仓库" class="headerlink" title="2. 下载图片并上传到Github仓库"></a>2. 下载图片并上传到Github仓库</h4><h4 id="3-通过链接访问图片"><a href="#3-通过链接访问图片" class="headerlink" title="3. 通过链接访问图片"></a>3. 通过链接访问图片</h4><br><h3 id="5-配置插件"><a href="#5-配置插件" class="headerlink" title="5. 配置插件"></a>5. 配置插件</h3><h4 id="1-配置计数busuanzi"><a href="#1-配置计数busuanzi" class="headerlink" title="1. 配置计数busuanzi"></a>1. 配置计数busuanzi</h4><h4 id="2-配置插件giscus："><a href="#2-配置插件giscus：" class="headerlink" title="2. 配置插件giscus："></a>2. 配置插件giscus：</h4><ul><li>官网：- <a href="https://giscus.app/zh-CN">https://giscus.app/zh-CN</a></li><li><a href="https://www.michaeltan.org/posts/giscus/">https://www.michaeltan.org/posts/giscus/</a></li><li><a href="https://vuepress-theme-hope.github.io/v1/comment/zh/guide/giscus.html">https://vuepress-theme-hope.github.io/v1/comment/zh/guide/giscus.html</a></li></ul><br><h3 id="6-多设备管理源码"><a href="#6-多设备管理源码" class="headerlink" title="6. 多设备管理源码"></a>6. 多设备管理源码</h3><ul><li>参考链接：<a href="https://www.zhihu.com/question/21193762/answer/103097754">https://www.zhihu.com/question/21193762/answer/103097754</a></li><li><a href="https://blog.csdn.net/heimu24/article/details/81210640">https://blog.csdn.net/heimu24/article/details/81210640</a></li><li><a href="https://zhangypcn.github.io/2020/07/04/Personal-Website-Hexo-Source-Management/">https://zhangypcn.github.io/2020/07/04/Personal-Website-Hexo-Source-Management/</a></li><li><a href="https://www.zhihu.com/question/21193762/answer/103097754">https://www.zhihu.com/question/21193762/answer/103097754</a></li></ul><h4 id="旧设备："><a href="#旧设备：" class="headerlink" title="旧设备："></a>旧设备：</h4><ul><li>Github新建仓库YealCassini_BlogCode，以使用git管理Hexo源码</li><li>将源码传到Github仓库</li><li>.gitignore:  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br></pre></td></tr></table></figure></li></ul><h4 id="新设备："><a href="#新设备：" class="headerlink" title="新设备："></a>新设备：</h4><ul><li>安装Git和Node.js</li><li>生成SSH key并添加到github</li><li>git clone</li><li>npm install</li><li>npm install hexo-deployer-git –save</li></ul></div><div class="story post-story"><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="Icon网站"><a href="#Icon网站" class="headerlink" title="Icon网站"></a>Icon网站</h3><ul><li><a href="https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0.0/assets/svg/">https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0.0/assets/svg/</a></li><li><a href="https://unpkg.com/browse/volantis-static@0.0.1649552113628/media/org.volantis/icon/1322024-social-media/">https://unpkg.com/browse/volantis-static@0.0.1649552113628/media/org.volantis/icon/1322024-social-media/</a></li><li><a href="https://fontawesome.com/icons?d=gallery">https://fontawesome.com/icons?d=gallery</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github Pages </tag>
            
            <tag> Hexo </tag>
            
            <tag> Volantis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/06/08/hello-world/"/>
      <url>/2022/06/08/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><div class="story post-story"><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p></div>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
